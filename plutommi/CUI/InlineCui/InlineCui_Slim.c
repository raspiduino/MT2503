/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*******************************************************************************
 * Filename:
 * ---------
 *  InlineCui.c
 *
 * Project:
 * --------
 *  MAUI
 *
 * Description:
 * ------------
 *  
 *
 * Author:
 * -------
 * -------
 *
 *==============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *==============================================================================
 *******************************************************************************/

#include "app_str.h"
#include "InlineCui.h"
#include "wgui_fixed_menuitems.h"
#include "Menucuigprot.h"
#include "mmi_rp_srv_inline_editor_def.h"

#include "InlineCuiGprot.h"
#include "MMIDataType.h"
#include "GlobalResDef.h"
#include "wgui_inline_edit.h"
#include "GlobalConstants.h"
#include "gui_typedef.h"
#include "mmi_frm_scenario_gprot.h"
#include "ImeGprot.h"
#include "gui_data_types.h"
#include "kal_non_specific_general_types.h"
#include "mmi_rp_srv_editor_def.h"
#include "wgui_categories_util.h"
#include "string.h"
#include "mmi_frm_input_gprot.h"
#include "mmi_frm_events_gprot.h"
#include "mmi_frm_history_gprot.h"
#include "MMI_fw_trc.h"
#include "DebugInitDef_Int.h"
#include "kal_trace.h"
#include "wgui_inputs.h"
#include "MMI_features.h"
#include "wgui_categories_inputs.h"
#include "gui.h"
#include "app_buff_alloc.h"
#include "mmi_frm_mem_gprot.h"
#include "kal_release.h"
#include "Unicodexdcl.h"
#include "stdio.h"
#include "CustDataRes.h"
#include "gui_inputs.h"
#include "wgui_touch_screen.h"
#include "wgui_categories_list.h"
#include "wgui_fixed_menus.h"
#include "gui_fixed_menus.h"
#include "gui_fixed_menuitems.h"
#include "wgui_progress_bar.h"
#include "wgui_include.h"
#include "wgui_title.h"
#include "gui_title.h"
#include "gui_virtual_keyboard_language_type.h"
#include "wgui_datetime.h"

/***************************************************************************** 
*  Define
*****************************************************************************/

#define INLINE_TEXT_EDIT_HISTORY_ID                1
#define INLINE_SELECT_HISTORY_ID                   3
#define INLINE_USER_DEFINED_SELECT_HISTORY_ID      4
#define INLINE_DATE_HISTORY_ID                     5
#define INLINE_TIME_HISTORY_ID                     6
#define INLINE_DOW_SELECT_HISTORY_ID               7
#define INLINE_TIME_PERIOD_HISTORY_ID              8
#define INLINE_IP4_HISTORY_ID                      9
#define INLINE_FULL_SCREEN_EDIT_HISTORY_ID         10
#define INLINE_MULTI_LINE_EDIT_HISTORY_ID          11
#define INLINE_COLOR_SELECT_SCREEN_ID              12
#define INLINE_IMAGE_TEXT_HISTORY_ID               13

#ifdef __INLINE_DATETIME_SLIM__
#define INLINE_DATETIME_HISTORY_ID                     14
#endif
/***************************************************************************** 
*  Extern Variables
*****************************************************************************/

/***************************************************************************** 
*  Global Variables
*****************************************************************************/
cui_inline_instance_struct *g_cui_inline_current_instance;

#ifndef INLINE_CUI_MEMORY_FROM_ASM
cui_inline_instance_struct g_cui_inline_instance[CUI_INLINE_INSTANCE_COUNT];
#endif


#ifdef INLINE_CUI_MEMORY_FROM_ASM
cui_inline_asm_instance_struct g_cui_inline_asm_instance[CUI_INLINE_INSTANCE_COUNT];
#endif

//#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) || defined(__MMI_INLINE_ITEM_TEXT_EDIT__) || defined(__MMI_INLINE_ITEM_IMAGETEXT__) || defined(__MMI_INLINE_ITEM_FULLSCREEN_EDIT__)

#ifndef INLINE_CUI_MEMORY_FROM_ASM
U8 cui_inline_text_buffer[CUI_INLINE_TEXT_INSTANCE_COUNT][CUI_INLINE_TEXT_BUFFER_SIZE];
U8 cui_inline_text_buffer_is_malloc[CUI_INLINE_TEXT_INSTANCE_COUNT];
#endif

//#endif

#if defined(__MMI_INLINE_ITEM_DATE__) || defined(__MMI_INLINE_ITEM_TIME__) // || defined(__MMI_INLINE_ITEM_TIME_PEROID__)

cui_inline_date_time_struct cui_inline_date_time_buffer[CUI_INLINE_DATE_TIME_INSTANCE_COUNT];
U8 cui_inline_date_time_buffer_is_malloc[CUI_INLINE_DATE_TIME_INSTANCE_COUNT];

#endif

#if defined(__MMI_INLINE_ITEM_IP4__)
cui_inline_ip4_data_struct cui_inline_ip4_buffer[CUI_INLINE_IP4_INSTANCE_COUNT];
U8 cui_inline_ip4_buffer_is_malloc[CUI_INLINE_IP4_INSTANCE_COUNT];
#endif

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
HILITE_STR  cui_inline_ml_hilist_buffer[CUI_INLINE_ML_HILIST_COUNT];
KAL_ADM_ID cui_inline_ml_adm_id = NULL;
S32 cui_inline_ml_alloc_count;
#endif

mmi_id g_cui_inline_gid;

/*****************************************************************************  
*  Local Variables 
*****************************************************************************/
// for inline slim, remove 2 const table
#if 0
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif

/*****************************************************************************  
*   Local Functions  
*****************************************************************************/
static void cui_inline_set_item_to_pluto_inline(
                S32 index,
                cui_inline_item_common_data_struct *common_data,
                cui_inline_item_data_union *special_data);
static void cui_inline_set_item_default_activation(
                cui_inline_item_id id,
                cui_inline_item_common_data_struct *common_data);
static void cui_inline_draw_softkey(WGUI_SOFTKEY_ENUM key);
#ifdef __INLINE_DATETIME_SLIM__
static void cui_inline_format_date(U8 *datestr, U8 *day, U8 *month, U8 *year, U8 *dummy);
static void cui_inline_format_time(U8 *string_buffer, U8 *hours_buffer, U8 *min_buffer, U8 *am_pm_flag, U8 *dummy);
#else
static void cui_inline_format_date(U8 *datestr, U8 *day, U8 *month, U8 *year);
static void cui_inline_format_time(U8 *string_buffer, U8 *hours_buffer, U8 *min_buffer, U8 *am_pm_flag);
#endif
#if 0
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif
#endif
static void cui_inline_format_ip4(U8 *string_buffer, U8 *ip1, U8 *ip2, U8 *ip3, U8 *ip4);
static mmi_ret cui_inline_proc_func(mmi_event_struct *param);
#ifdef INLINE_CUI_MEMORY_FROM_ASM
static cui_inline_instance_struct *cui_inline_create_instance(mmi_id app_id,KAL_ADM_ID app_adm_id,U16* memory_p);
#else
static cui_inline_instance_struct *cui_inline_create_instance(void);
#endif
static void cui_inline_instance_delete_instance(cui_inline_instance_struct *p);

static void cui_inline_entry_screen_ext(mmi_scrn_essential_struct *scrn_data);
static void cui_inline_exit_screen(void);
static void cui_inline_delete_item_data(cui_inline_item_struct *item_data);

void cui_inline_set_item_caption(mmi_id gid, U16 item_id, PU8 text_p);
void cui_inline_set_item_displayonly(mmi_id gid, U16 item_id, PU8 text_p, U16 default_text_id);
void cui_inline_set_item_multiline_read_only(mmi_id gid, U16 item_id, PU8 buffer, U8 height_of_item);
void cui_inline_set_item_text_edit(
        mmi_id gid,
        U16 item_id,
        PU8 buffer,
        S32 buffer_size,
        U32 input_type,
        S16 input_extended_type,
        mmi_imm_input_mode_enum *required_input_mode_set,
        U16 default_text_id);
void cui_inline_set_item_multiline_edit(mmi_id gid, U16 item_id, PU8 buffer, S32 buffer_size, U32 input_type, U8 height_of_item);
void cui_inline_set_item_fullscreen_edit(
        mmi_id gid,
        U16 item_id,
        cui_inline_set_item_fullscreen_edit_struct *fullscreen_attr);
void cui_inline_set_item_image_text(mmi_id gid, U16 item_id, cui_inline_set_item_image_text_struct *imagetext_attr);
void cui_inline_set_item_date(mmi_id gid, U16 item_id, cui_inline_set_item_date_time_struct *date_attr);
void cui_inline_set_item_time(mmi_id gid, U16 item_id, cui_inline_set_item_time_struct *time_attr);
void cui_inline_set_item_time_period(mmi_id gid, U16 item_id, cui_inline_set_item_time_period_struct *time_attr);
void cui_inline_set_item_ip4(mmi_id gid, U16 item_id, cui_inline_set_item_ip4_struct *ip4_attr);
void cui_inline_set_item_color_select(
        mmi_id gid,
        U16 item_id,
        S32 n_color,
        U8 highlighted_index,
        const color *list_of_color);

void cui_inline_set_item_dow_select(mmi_id gid, U16 item_id, PU8 list_of_states);
void cui_inline_set_item_progress_bar(mmi_id gid, U16 item_id, cui_inline_set_item_progress_bar_struct *cui_data);

S32 cui_inline_set_item_select_with_string_id(mmi_id gid, U16 item_id, S32 n_items, U16 *list_of_string_id, U8 highlighted_item);
MMI_BOOL cui_inline_selector_is_set_by_string_id(cui_inline_select_struct *select_data);


void cui_inline_evt_deint_group(mmi_id gid);

void cui_inline_multiline_rdly_highlight_list_change_index(S32 idx);

void cui_inline_multiline_rdly_highlight_list_click(S32 idx);

void cui_inline_set_char_filter_to_inline(MMI_BOOL *is_allowed, const UI_character_type * * characters_list);

void cui_inline_evt_item_select_focus_changed(MMI_ID gid, S32 select_index);

static void cui_inline_evt_item_back_without_changed(MMI_ID gid, U16 index);
static void cui_inline_evt_item_changed_int(MMI_ID gid, U16 index);

/*****************************************************************************  
*   Extern Functions 
*****************************************************************************/


#define CUI_INLINE_LOCAL_FUNCTION


/*****************************************************************************
 * FUNCTION
 *  cui_inline_entry_options_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_entry_options_screen(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance;
    mmi_id option_menu_gid;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    g_cui_inline_gid = mmi_frm_group_get_active_id();
    inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_gid);

    option_menu_gid = cui_menu_create(g_cui_inline_gid,
        CUI_MENU_SRC_TYPE_RESOURCE,
        CUI_MENU_TYPE_OPTION,
        MENU_ID_INLINE_EDITOR_OPT, 
        MMI_TRUE, (void *)inline_instance);
    //cui_menu_enable_cascading_option_menu(option_menu_gid);
    cui_menu_set_default_title_image(option_menu_gid, (PU8)get_image(inline_instance->title_icon));
    cui_menu_run(option_menu_gid);       
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_convert_type_to_cui
 * DESCRIPTION
 *  
 * PARAMETERS
 *  pluto_type      [IN]        
 * RETURNS
 *  
 *****************************************************************************/
S32 cui_inline_convert_type_to_cui(S32 pluto_type)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 item_type = -1;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (pluto_type & 0xFF)
    {
        case INLINE_ITEM_TYPE_CAPTION:
        {
            item_type = CUI_INLINE_ITEM_TYPE_CAPTION;
            break;
        }
        case INLINE_ITEM_TYPE_DISPLAY_ONLY:
        {
            item_type = CUI_INLINE_ITEM_TYPE_DISPLAY_ONLY;
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY:
        {
            item_type = CUI_INLINE_ITEM_TYPE_MULTILINE_RD_ONLY; 
            break;
        }
#endif        
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_TEXT_EDIT;
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_MULTILINE_EDIT; 
            break;
        }
#endif        
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_FULLSCREEN_EDIT;
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif        
#endif        
        case INLINE_ITEM_TYPE_DATE:
        {
            item_type = CUI_INLINE_ITEM_TYPE_DATE;
            break;
        }
        case INLINE_ITEM_TYPE_TIME:
        {
            item_type = CUI_INLINE_ITEM_TYPE_TIME;
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif
#endif
#if defined (__MMI_INLINE_ITEM_IP4__)
        case INLINE_ITEM_TYPE_IP4_EDIT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_IP4;
            break;
        }
#endif        
        case INLINE_ITEM_TYPE_SELECT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_SELECT;
            break;
        }
#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)        
        case INLINE_ITEM_TYPE_COLOR_SELECT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_COLOR_SELECT;
            break;
        }
#endif         
        case INLINE_ITEM_TYPE_USER_DEFINED_SELECT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_USER_DEFINED_SELECT;
            break;
        }
#if defined (__MMI_INLINE_ITEM_DOW__)        
        case INLINE_ITEM_TYPE_DOW_SELECT:
        {
            item_type = CUI_INLINE_ITEM_TYPE_DOW;
            break;
        }
#endif
#if defined (__MMI_INLINE_ITEM_PROGRESS_BAR__)
        case INLINE_ITEM_TYPE_PROGRESS_BAR:
        {
            item_type = CUI_INLINE_ITEM_TYPE_PROGRESS_BAR;
            break;
        }
#endif        
    }

    return item_type;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_convert_type_to_inline
 * DESCRIPTION
 *  
 * PARAMETERS
 *  pluto_type      [IN]        
 * RETURNS
 *  
 *****************************************************************************/
S32 cui_inline_convert_type_to_inline(S32 pluto_type)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 item_type = -1;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (pluto_type & 0xFF)
    {
        case CUI_INLINE_ITEM_TYPE_CAPTION:
        {
            item_type = INLINE_ITEM_TYPE_CAPTION;
            break;
        }
        case CUI_INLINE_ITEM_TYPE_DISPLAY_ONLY:
        {
            item_type = INLINE_ITEM_TYPE_DISPLAY_ONLY;
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case CUI_INLINE_ITEM_TYPE_MULTILINE_RD_ONLY:
        {
            item_type = INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY;
            break;
        }
#endif         
        case CUI_INLINE_ITEM_TYPE_TEXT_EDIT:
        {
            item_type = INLINE_ITEM_TYPE_TEXT_EDIT;
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case CUI_INLINE_ITEM_TYPE_MULTILINE_EDIT:
        {
            item_type = INLINE_ITEM_TYPE_MULTI_LINE_EDIT; 
            break;
        }
#endif        
        case CUI_INLINE_ITEM_TYPE_FULLSCREEN_EDIT:
        {
            item_type = INLINE_ITEM_TYPE_FULL_SCREEN_EDIT;
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif   
#endif        
        case CUI_INLINE_ITEM_TYPE_DATE:
        {
            item_type = INLINE_ITEM_TYPE_DATE;
            break;
        }
        case CUI_INLINE_ITEM_TYPE_TIME:
        {
            item_type = INLINE_ITEM_TYPE_TIME;
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif 
#endif 
#if defined (__MMI_INLINE_ITEM_IP4__)
        case CUI_INLINE_ITEM_TYPE_IP4:
        {
            item_type = INLINE_ITEM_TYPE_IP4_EDIT;
            break;
        }
#endif        
        case CUI_INLINE_ITEM_TYPE_SELECT:
        {
            item_type = INLINE_ITEM_TYPE_SELECT;
            break;
        }
#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)        
        case CUI_INLINE_ITEM_TYPE_COLOR_SELECT:
        {
            item_type = INLINE_ITEM_TYPE_COLOR_SELECT; 
            break;
        }
#endif        
        case CUI_INLINE_ITEM_TYPE_USER_DEFINED_SELECT:
        {
            item_type = INLINE_ITEM_TYPE_USER_DEFINED_SELECT;
            break;
        }
#if defined (__MMI_INLINE_ITEM_DOW__)        
        case CUI_INLINE_ITEM_TYPE_DOW:
        {
            item_type = INLINE_ITEM_TYPE_DOW_SELECT;
            break;
        }
#endif
#if defined (__MMI_INLINE_ITEM_PROGRESS_BAR__)
        case CUI_INLINE_ITEM_TYPE_PROGRESS_BAR:
        {
            item_type = INLINE_ITEM_TYPE_PROGRESS_BAR;
            break;
        }
#endif        
        default:
            item_type = 0;
    }

    return item_type;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_reset_softkey_value
 * DESCRIPTION
 *  
 * PARAMETERS
 *  p_instance      [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_reset_softkey_value(cui_inline_instance_struct *p_instance)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset(
        p_instance->cui_inline_items_softkey,
        0xff,
        sizeof(cui_inline_item_softkey_struct) * CUI_INLINE_MAX_ITEM_COUNT);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_proc_func
 * DESCRIPTION
 *  
 * PARAMETERS
 *  evt     [?]     
 * RETURNS
 *  
 *****************************************************************************/
mmi_ret cui_inline_proc_func(mmi_event_struct *evt)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance;

    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (evt->evt_id)
    {
        /*  draw_count flag assure redraw process is executed once, even though post redraw event
           many times. */
        /* is_drawing flag assure that redraw process will not be reentry. */
        case EVT_ID_CUI_INLINE_REDRAW:
        {
            inline_instance = (cui_inline_instance_struct*) (evt->user_data);
            if ((cui_inline_is_edit_main_screen(inline_instance->gid)) &&
                (inline_instance->is_drawing == 0) && (inline_instance->draw_count > 0))
            {
                mmi_frm_send_incomplete_key_event_to_new_screen(MMI_TRUE);
                inline_instance->is_drawing = (MMI_BOOL)1;
                mmi_frm_display_dummy_screen();
                mmi_frm_scrn_close_active_id();
               // EntryNewScreen(SCR_ID_DUMMY, NULL, NULL, NULL);
               // GoBackHistory();
                inline_instance->is_drawing = (MMI_BOOL)0;
                inline_instance->draw_count = 0;
            }
    	    else if(!(cui_inline_is_edit_main_screen(inline_instance->gid)))
    	    {
    		/* If receive draw event but inline screen is in history, it should clear draw_count to void redraw mechanism is invalid. */
                inline_instance->draw_count = 0;			
    	    }
            break;
        }
        case EVT_ID_CUI_INLINE_NOTIFY:
        {
            cui_event_inline_notify_struct *inline_evt = (cui_event_inline_notify_struct *)evt;
            inline_instance = (cui_inline_instance_struct*) (evt->user_data);
            
            if (inline_evt->event_type == CUI_INLINE_NOTIFY_ITEM_CHANGED)
            {
                MMI_ASSERT(inline_evt->item_id < CUI_INLINE_ITEM_ID_BASE);

                if(((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT) ||
                   ((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT))
                {
                    cui_inline_fullscreen_edit_struct *special_data = (cui_inline_fullscreen_edit_struct *)&(inline_instance->cui_inline_items[inline_evt->item_id].special_data);
                    special_data->is_changed = 1;
                }                    
                else
                {
                    MMI_ASSERT(0);
                }
            }
            if(inline_evt->event_type == CUI_INLINE_NOTIFY_SUB_GROUP_SUBMIT)
            {
                MMI_ASSERT(inline_evt->item_id < CUI_INLINE_ITEM_ID_BASE);

                /* Press LSK && Content has been revised. */
                if(((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT) ||
                   ((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT))
                {
                    cui_inline_fullscreen_edit_struct *special_data = (cui_inline_fullscreen_edit_struct *)&(inline_instance->cui_inline_items[inline_evt->item_id].special_data);
                    if(special_data->is_changed == 1)
                    {
                        cui_inline_set_screen_attributes(inline_instance->gid, CUI_INLINE_SET_ATTRIBUTE, CUI_INLINE_SCREEN_CHANGED);
                    }
                   /* whether add 
                        CUI_INLINE_NOTIFY_ITEM_CHANGED,
                        CUI_INLINE_NOTIFY_TEXT_NOT_EMPTY,
                        CUI_INLINE_NOTIFY_TEXT_EMPTY        ?
                    */  
                }                    
                else if(((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_SELECT) 
                        )
                {
                    /* Update highlight value only on submit action. */
                    cui_inline_select_struct *special_data = (cui_inline_select_struct *)&(inline_instance->cui_inline_items[inline_evt->item_id].special_data);
                    if(special_data->is_changed == 1)
                    {
                        cui_inline_set_screen_attributes(inline_instance->gid, CUI_INLINE_SET_ATTRIBUTE, CUI_INLINE_SCREEN_CHANGED);
						special_data->highlight_index_backup = special_data->highlight_index;
						cui_inline_evt_item_changed_int(inline_instance->gid, inline_evt->item_id);
                    }
                }
            }
            if(inline_evt->event_type == CUI_INLINE_NOTIFY_SUB_GROUP_DEINIT)
            {
                MMI_ASSERT(inline_evt->item_id < CUI_INLINE_ITEM_ID_BASE);

                /* If we don't reset is_changed flag, then may be error:
                    When do some change && cancel, and then enter secondly, press ok, it will change to "Done" status.
                */
                if(((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT) ||
                   ((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT))
                {
                    cui_inline_fullscreen_edit_struct *special_data = (cui_inline_fullscreen_edit_struct *)&(inline_instance->cui_inline_items[inline_evt->item_id].special_data);
                    special_data->is_changed = 0;              
                }                    
                else if(((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_SELECT) 
                       )
                {
                    cui_inline_select_struct *special_data = (cui_inline_select_struct *)&(inline_instance->cui_inline_items[inline_evt->item_id].special_data);
                    special_data->is_changed = 0;
					special_data->highlight_index = special_data->highlight_index_backup;
					cui_inline_evt_item_back_without_changed(inline_instance->gid, special_data->highlight_index); 
                }
            }
            if(inline_evt->event_type == CUI_INLINE_NOTIFY_SELECT_FOCUS_CHANGED)
            {
                cui_event_inline_notify_struct *inline_evt = (cui_event_inline_notify_struct *)evt;
                inline_instance = (cui_inline_instance_struct*) (evt->user_data);
                
                MMI_ASSERT(inline_evt->item_id < CUI_INLINE_ITEM_ID_BASE);

                /* Selector  */
                if(((inline_instance->cui_inline_items[inline_evt->item_id].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_SELECT)
                  )
                {
                    cui_inline_select_struct *special_data = (cui_inline_select_struct *)&(inline_instance->cui_inline_items[inline_evt->item_id].special_data);
                        
                    special_data->old_index = special_data->highlight_index;
                    
                    if((special_data->is_changed == 0) && (special_data->highlight_index != inline_evt->param))
                    {
                        special_data->is_changed = 1;
                    }

					special_data->highlight_index = inline_evt->param;

					cui_inline_evt_item_select_focus_changed(inline_instance->gid,  special_data->highlight_index);
                }
            }
            break;
        }
        
        case EVT_ID_GROUP_DEINIT:
        {
            int i = 0;

            inline_instance = (cui_inline_instance_struct*) (evt->user_data);
            {
                if (inline_instance != NULL)
                {
                    for (i = 0; i < inline_instance->item_count; i++)
                    {
                        cui_inline_delete_item_data(&(inline_instance->cui_inline_items[i]));
                    }
                    //cui_inline_instance_delete_instance(inline_instance);
                    inline_instance->inline_status = CUI_INLINE_STATUS_CLOSE;
                    MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_CUI_CLOSE_GROUP);
                    cui_inline_evt_deint_group(inline_instance->gid);
                    cui_inline_instance_delete_instance(inline_instance);
                }
            }
           
            break;
        }
        case EVT_ID_GROUP_INACTIVE:
        {
            inline_instance = (cui_inline_instance_struct*) (evt->user_data);
            inline_instance->inline_status = CUI_INLINE_STATUS_INACTIVE; 
            break;
        }
        case EVT_ID_GROUP_ACTIVE:
        {
            inline_instance = (cui_inline_instance_struct*) (evt->user_data);
            inline_instance->inline_status = CUI_INLINE_STATUS_ACTIVE;  
            break;
        }
        case EVT_ID_CUI_MENU_ITEM_SELECT:
        {
            cui_menu_event_struct *menu_evt = (cui_menu_event_struct*)evt;
            
            if (menu_evt->highlighted_menu_id == MENU_ID_INLINE_EDITOR_OPT_DONE)
            {
                wgui_inline_option_menu_done_lsk_handler(menu_evt->sender_id);              
            }
            break;
        }
        case EVT_ID_CUI_MENU_CLOSE_REQUEST:
        {
            cui_menu_event_struct *menu_evt = (cui_menu_event_struct*)evt;
            
            inline_instance = (cui_inline_instance_struct *)evt->user_data;
            inline_instance->current_screen_id = 0;
            
            cui_menu_close(menu_evt->sender_id);
            break;
        }
    }
    if(cui_menu_is_menu_event(evt->evt_id))
    {
        cui_menu_event_struct *menu_evt = (cui_menu_event_struct*)evt;
        inline_instance = (cui_inline_instance_struct*)(U32)menu_evt->app_data;
        wgui_inputs_options_menu_handler(evt, (mmi_id)inline_instance->gid); // app_id is menu cui¡¯s parent groupd ID
    }
    
    return MMI_RET_OK;
}

/*****************************************************************************  
*   Local Functions 
*****************************************************************************/


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_default_activation
 * DESCRIPTION
 *  
 * PARAMETERS
 *  id              [IN]        
 *  common_data     [?]         
 * RETURNS
 *  void
 *****************************************************************************/
static void cui_inline_set_item_default_activation(
                cui_inline_item_id id,
                cui_inline_item_common_data_struct *common_data)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    
    // for Inline slim, remove cui_inline_default_activate_table, set value directly.
    //CUI_INLINE_ITEM_TYPE_IMAGE_TEXT is phase out, do not care it
    if(id == CUI_INLINE_ITEM_TYPE_CAPTION)
    {
        common_data->key_code = 0;
    }
    else
    {
        common_data->key_code = INLINE_ITEM_ACTIVATE_WITHOUT_KEY_EVENT;
    }
    
    common_data->key_event = 0;
}

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_to_pluto_inline
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index               [IN]        
 *  common_data         [?]         
 *  special_data        [?]         
 * RETURNS
 *  void
 *****************************************************************************/
 static void cui_inline_reconfig_item_to_pluto_inline(               
                S32 index,
                cui_inline_item_common_data_struct *common_data,
                cui_inline_item_data_union *special_data)
{
        /*----------------------------------------------------------------*/
        /* Local Variables                                                */
        /*----------------------------------------------------------------*/
    
        /*----------------------------------------------------------------*/
        /* Code Body                                                      */
        /*----------------------------------------------------------------*/
        SetInlineItemActivation(&wgui_inline_items[index], common_data->key_code, common_data->key_event);
        switch (common_data->flag & 0xFF)
        {
            case INLINE_ITEM_TYPE_CAPTION:
            {
                cui_inline_caption_struct *p_caption_data = (cui_inline_caption_struct*) special_data;

                ReconfigureInlineItemCaption(&wgui_inline_items[index], p_caption_data->text_p);
                break;
            }
            case INLINE_ITEM_TYPE_DISPLAY_ONLY:
            {
                cui_inline_display_only_struct *p_display_only_data = (cui_inline_display_only_struct*) special_data;

                ReConfigureInlineItemDisplayOnly(&wgui_inline_items[index], p_display_only_data->text_p);
                break;
            }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)            
            case INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY:
            {
                cui_inline_multiline_read_only_struct *p_mulline_rdonly =
                    (cui_inline_multiline_read_only_struct*) special_data;
                SetInlineMultiLineRdOnly(
                    &wgui_inline_items[index],
                    p_mulline_rdonly->buffer,
                    0,
                    0,
                    p_mulline_rdonly->height_of_item);
                break;
            }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */             
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
            case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
            {
                cui_inline_multiline_edit_struct *p_data = (cui_inline_multiline_edit_struct*) special_data;

                SetInlineItemMultiLineEdit(
                    &wgui_inline_items[index],
                    p_data->buffer,
                    NULL,
                    p_data->buffer_size,
                    p_data->input_type);
                break;
            }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */             
            
            case INLINE_ITEM_TYPE_TEXT_EDIT:
            case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
            {
                cui_inline_fullscreen_edit_struct *p_data = (cui_inline_fullscreen_edit_struct*) special_data;

                if((common_data->flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT)
                { 
                    ReConfigureInlineItemFullScreenEdit_ext(
                        &wgui_inline_items[index],
                        p_data->title,
                        p_data->title_icon,
                        p_data->buffer,
                        p_data->buffer_size,
                        p_data->input_type,
                        p_data->input_ext_type,
                        p_data->required_input_mode_set);    
                    }
                else
                {
                    ReConfigureInlineItemTextEdit_ext(
                        &wgui_inline_items[index],
                        p_data->buffer,
                        p_data->buffer_size,
                        p_data->input_type,
                        p_data->input_ext_type,
                        p_data->required_input_mode_set);
                }
               
                if(p_data->default_text_ptr != NULL)
                {
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__                       
                    SetInlineItemTextEditDefaultItemNameIfEmpty_with_string(&wgui_inline_items[index], p_data->default_text_ptr);
#endif                    
                }
                else if (get_string(p_data->default_text_id) != NULL)
                {
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__                    
                    SetInlineItemTextEditDefaultItemNameIfEmpty_with_string(&wgui_inline_items[index], (U8 *)get_string(p_data->default_text_id));
#endif
                }         
				break;
            }
#if 0            
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)            
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
            #ifdef __MMI_TOUCH_SCREEN__
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
            #endif /* __MMI_TOUCH_SCREEN__ */ 
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */             
#endif
            case INLINE_ITEM_TYPE_DATE:
            {
#if defined(__MMI_INLINE_ITEM_DATE__)                 
                cui_inline_date_struct *p_data = (cui_inline_date_struct*) special_data;
#ifdef __INLINE_DATETIME_SLIM__
                ReConfigureInlineItemDatetime(
                    INLINE_ITEM_TYPE_DATE,
                    &wgui_inline_items[index],
                    (PU8) p_data->date_data->day_buffer,
                    (PU8) p_data->date_data->month_buffer,
                    (PU8) p_data->date_data->year_buffer,
                    (PU8) NULL,
                    cui_inline_format_date);
#else
                ReConfigureInlineItemDate(
                    &wgui_inline_items[index],
                    (PU8) p_data->date_data->day_buffer,
                    (PU8) p_data->date_data->month_buffer,
                    (PU8) p_data->date_data->year_buffer,
                    cui_inline_format_date);
#endif                
#endif           
                break;
            }
            case INLINE_ITEM_TYPE_TIME:
            {
#if defined(__MMI_INLINE_ITEM_TIME__)                 
                cui_inline_time_struct *p_data = (cui_inline_time_struct*) special_data;
#ifdef __INLINE_DATETIME_SLIM__
                ReConfigureInlineItemDatetime(
                    INLINE_ITEM_TYPE_TIME,
                    &wgui_inline_items[index],
                    (PU8) p_data->time_data->hour_buffer,
                    (PU8) p_data->time_data->minute_buffer,
                    (PU8) & (p_data->time_data->am_pm_flag),
                    (PU8) NULL,
                    cui_inline_format_time);
#else

                ReConfigureInlineItemTime(
                    &wgui_inline_items[index],
                    (PU8) p_data->time_data->hour_buffer,
                    (PU8) p_data->time_data->minute_buffer,
                    (PU8) & (p_data->time_data->am_pm_flag),
                    cui_inline_format_time);
#endif                
#endif                         
                break;
            }
#if 0            
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)            
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */  
#endif
#if defined(__MMI_INLINE_ITEM_IP4__)
            case INLINE_ITEM_TYPE_IP4_EDIT:
            {                
                cui_inline_ip4_struct *p_data = (cui_inline_ip4_struct*) special_data;
#ifdef __INLINE_DATETIME_SLIM__
                ReConfigureInlineItemDatetime(
                    INLINE_ITEM_TYPE_IP4_EDIT,
                    &wgui_inline_items[index],
                    (PU8) p_data->ip4_data->b1,
                    (PU8) p_data->ip4_data->b2,
                    (PU8) p_data->ip4_data->b3,
                    (PU8) p_data->ip4_data->b4,
                    cui_inline_format_ip4);    
#else
                ReConfigureInlineItemIP4(
                    &wgui_inline_items[index],
                    (PU8) p_data->ip4_data->b1,
                    (PU8) p_data->ip4_data->b2,
                    (PU8) p_data->ip4_data->b3,
                    (PU8) p_data->ip4_data->b4,
                    cui_inline_format_ip4);                
#endif            
                break;
            }
#endif            
            case INLINE_ITEM_TYPE_SELECT:
            {
                cui_inline_select_struct *p_data = (cui_inline_select_struct*) special_data;

                ReConfigureInlineItemSelect(
                    &wgui_inline_items[index],
                    p_data->n_items,
                    p_data->list_of_strings,
                    &(p_data->highlight_index));
               // RegisterInlineSelectHighlightHandler(&wgui_inline_items[index], cui_inline_evt_item_select_focus_changed);
                break;
            }
#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)            
            case INLINE_ITEM_TYPE_COLOR_SELECT:
            {
                cui_inline_color_select_struct *p_data = (cui_inline_color_select_struct*) special_data;

                SetInlineItemColorSelect(
                    &wgui_inline_items[index],
                    p_data->n_color,
                    p_data->highlight_index,
                    p_data->list_of_color,
                    cui_inline_evt_item_color_select_focus_changed);
                if ( p_data->start_index < 255 )
                {
                    wgui_inline_item_color_select *ii = (wgui_inline_item_color_select*) wgui_inline_items[index].item;

                    ii->start_index = p_data->start_index;
                }
            
                break;
            }
#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */             
            case INLINE_ITEM_TYPE_USER_DEFINED_SELECT:
            {
              //  ReConfigureInlineItemUserDefinedSelect_ext(&wgui_inline_items[index], (S16)index, NULL, NULL, NULL);
                break;
            }
#if defined(__MMI_INLINE_ITEM_DOW__)            
            case INLINE_ITEM_TYPE_DOW_SELECT:
            {                
                cui_inline_dow_struct *p_data = (cui_inline_dow_struct*) special_data;

                ReConfigureInlineItemDOWSelect(&wgui_inline_items[index], index, p_data->list_of_status);
                break;                
            }
#endif       
#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)
            case INLINE_ITEM_TYPE_PROGRESS_BAR:
            {                
                cui_inline_progress_bar_struct *p_data = (cui_inline_progress_bar_struct*)special_data;
                SetInlineItemProgressBar(&wgui_inline_items[index], cui_inline_progress_bar_change_callback,&(p_data->value), p_data->max_value, p_data->step_size);
                SetInlineItemProgressBarStyle(&wgui_inline_items[index], p_data->ext_flag);
                break; 
            }
#endif            
        }
       
}




/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_to_pluto_inline
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index               [IN]        
 *  common_data         [?]         
 *  special_data        [?]         
 * RETURNS
 *  void
 *****************************************************************************/
static void cui_inline_set_item_to_pluto_inline(
                S32 index,
                cui_inline_item_common_data_struct *common_data,
                cui_inline_item_data_union *special_data)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 cui_flag;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_CUI_TO_PLUTO,
        0,
        0,
        index,
        common_data->item_id,
        (common_data->flag & 0xFF));
    SetInlineItemActivation(&wgui_inline_items[index], common_data->key_code, common_data->key_event);
    switch (common_data->flag & 0xFF)
    {
        case INLINE_ITEM_TYPE_CAPTION:
        {
            cui_inline_caption_struct *p_caption_data = (cui_inline_caption_struct*) special_data;

            SetInlineItemCaption(&wgui_inline_items[index], p_caption_data->text_p);
            break;
        }
        case INLINE_ITEM_TYPE_DISPLAY_ONLY:
        {
            cui_inline_display_only_struct *p_display_only_data = (cui_inline_display_only_struct*) special_data;

            SetInlineItemDisplayOnly(&wgui_inline_items[index], p_display_only_data->text_p);
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY:
        {
            cui_inline_multiline_read_only_struct *p_mulline_rdonly =
                (cui_inline_multiline_read_only_struct*) special_data;
            SetInlineMultiLineRdOnly(
                &wgui_inline_items[index],
                p_mulline_rdonly->buffer,
                0,
                0,
                p_mulline_rdonly->height_of_item);
            if(p_mulline_rdonly->highlight_list_info.hilite_list != NULL)
            {
                 wgui_inline_ml_rdly_highlight_list_struct highlight_list ={0};
                 highlight_list.hilite_list = p_mulline_rdonly->highlight_list_info.hilite_list;
                 highlight_list.count = p_mulline_rdonly->highlight_list_info.count;
                 highlight_list.curr_hilite_idx = &(p_mulline_rdonly->highlight_list_info.curr_hilite_idx);
                 highlight_list.hilite_cb = cui_inline_multiline_rdly_highlight_list_change_index;
                 highlight_list.click_cb = cui_inline_multiline_rdly_highlight_list_click;
                 
                 wgui_inline_ml_rdly_set_hilite_list(&wgui_inline_items[index], &highlight_list);
            }
            
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */ 

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
        {
            cui_inline_multiline_edit_struct *p_data = (cui_inline_multiline_edit_struct*) special_data;

            SetInlineItemMultiLineEdit(
                &wgui_inline_items[index],
                p_data->buffer,
                NULL,
                p_data->buffer_size,
                p_data->input_type);
            if(p_data->height_of_item != 0)
            {
                SetInlineItemMultiLineHeight(&wgui_inline_items[index], p_data->height_of_item);  
            }
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */         
        case INLINE_ITEM_TYPE_TEXT_EDIT:        
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            cui_inline_fullscreen_edit_struct *p_data = (cui_inline_fullscreen_edit_struct*) special_data;

            if((common_data->flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT)
            {
                
                SetInlineItemFullScreenEdit_ext2(
                    &wgui_inline_items[index],
                    p_data->title,
                    p_data->title_icon,
                    p_data->buffer,
                    p_data->buffer_size,
                    p_data->input_type,
                    p_data->input_ext_type,
                    p_data->required_input_mode_set);
            }
            else
            {
                 SetInlineItemTextEdit_ext(
                    &wgui_inline_items[index],
                    p_data->buffer,
                    p_data->buffer_size,
                    p_data->input_type,
                    p_data->input_ext_type,
                    p_data->required_input_mode_set);
            }
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__             
            if (get_string(p_data->default_text_id) != NULL)
            {                
                SetInlineItemTextEditDefaultItemNameIfEmpty(&wgui_inline_items[index], p_data->default_text_id);

            }
            else if(p_data->default_text_ptr != NULL)
            {                      
                SetInlineItemTextEditDefaultItemNameIfEmpty_with_string(&wgui_inline_items[index], p_data->default_text_ptr);   
            }
#endif              
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
        #ifdef __MMI_TOUCH_SCREEN__
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
        #endif /* __MMI_TOUCH_SCREEN__ */ 
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */         
#endif
        case INLINE_ITEM_TYPE_DATE:
        {
#if defined(__MMI_INLINE_ITEM_DATE__)            
            cui_inline_date_struct *p_data = (cui_inline_date_struct*) special_data;
#ifdef __INLINE_DATETIME_SLIM__
            SetInlineItemDatetime(
                INLINE_ITEM_TYPE_DATE,
                &wgui_inline_items[index],
                (PU8) p_data->date_data->day_buffer,
                (PU8) p_data->date_data->month_buffer,
                (PU8) p_data->date_data->year_buffer,
                (PU8) NULL,
                cui_inline_format_date);
#else
            SetInlineItemDate(
                &wgui_inline_items[index],
                (PU8) p_data->date_data->day_buffer,
                (PU8) p_data->date_data->month_buffer,
                (PU8) p_data->date_data->year_buffer,
                cui_inline_format_date);
#endif
#endif            
            break;
        }
        case INLINE_ITEM_TYPE_TIME:
        {
#if defined(__MMI_INLINE_ITEM_TIME__)            
            cui_inline_time_struct *p_data = (cui_inline_time_struct*) special_data;
#ifdef __INLINE_DATETIME_SLIM__
            SetInlineItemDatetime(
                INLINE_ITEM_TYPE_TIME,
                &wgui_inline_items[index],
                (PU8) p_data->time_data->hour_buffer,
                (PU8) p_data->time_data->minute_buffer,
                (PU8) & (p_data->time_data->am_pm_flag),
                (PU8) NULL,
                cui_inline_format_time);
#else
            SetInlineItemTime(
                &wgui_inline_items[index],
                (PU8) p_data->time_data->hour_buffer,
                (PU8) p_data->time_data->minute_buffer,
                (PU8) & (p_data->time_data->am_pm_flag),
                cui_inline_format_time);

#endif 
            break;
        }
#endif
#if 0        
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */    
#endif
#if defined(__MMI_INLINE_ITEM_IP4__)
        case INLINE_ITEM_TYPE_IP4_EDIT:
        {         
            cui_inline_ip4_struct *p_data = (cui_inline_ip4_struct*) special_data;
#ifdef __INLINE_DATETIME_SLIM__
            SetInlineItemDatetime(
                INLINE_ITEM_TYPE_IP4_EDIT,
                &wgui_inline_items[index],
                (PU8) p_data->ip4_data->b1,
                (PU8) p_data->ip4_data->b2,
                (PU8) p_data->ip4_data->b3,
                (PU8) p_data->ip4_data->b4,
                cui_inline_format_ip4);  
#else
            SetInlineItemIP4(
                &wgui_inline_items[index],
                (PU8) p_data->ip4_data->b1,
                (PU8) p_data->ip4_data->b2,
                (PU8) p_data->ip4_data->b3,
                (PU8) p_data->ip4_data->b4,
                cui_inline_format_ip4);            
#endif          
            break;
        }
#endif        
        case INLINE_ITEM_TYPE_SELECT:
        {
            cui_inline_select_struct *p_data = (cui_inline_select_struct*) special_data;

            if(cui_inline_selector_is_set_by_string_id(p_data))
            {
                wgui_inline_set_item_selector_by_string_id(
                    &wgui_inline_items[index],
                    p_data->n_items,
                    p_data->string_id_list_ptr,
                    &(p_data->highlight_index)); 
            }
            else
            {
                if(p_data->string_flag == 1)    /* Means count is > 20. */
                {
            SetInlineItemSelect(
                &wgui_inline_items[index],
                p_data->n_items,
                    p_data->string_ptr,
                &(p_data->highlight_index));
            }
                else if(p_data->string_flag == 2)   /* Means count is <= 20. */
                {
                    SetInlineItemSelect(
                        &wgui_inline_items[index],
                        p_data->n_items,
                        p_data->list_of_strings,
                        &(p_data->highlight_index));    
                }
                

            }
            
            //RegisterInlineSelectHighlightHandler(&wgui_inline_items[index], cui_inline_evt_item_select_focus_changed);
            break;
        }
#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)        
        case INLINE_ITEM_TYPE_COLOR_SELECT:
        {
            cui_inline_color_select_struct *p_data = (cui_inline_color_select_struct*) special_data;

            SetInlineItemColorSelect(
                &wgui_inline_items[index],
                p_data->n_color,
                p_data->highlight_index,
                p_data->list_of_color,
                cui_inline_evt_item_color_select_focus_changed);
            if ( p_data->start_index < 255 )
            {
                wgui_inline_item_color_select *ii = (wgui_inline_item_color_select*) wgui_inline_items[index].item;

                ii->start_index = p_data->start_index;
            }
            break;
        }
#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */         
        case INLINE_ITEM_TYPE_USER_DEFINED_SELECT:
        {

           // SetInlineItemUserDefinedSelect_ext(&wgui_inline_items[index], (S16)index, NULL, NULL, NULL);
            break;
        }
#if defined(__MMI_INLINE_ITEM_DOW__)        
        case INLINE_ITEM_TYPE_DOW_SELECT:
        {
            cui_inline_dow_struct *p_data = (cui_inline_dow_struct*) special_data;

            SetInlineItemDOWSelect(&wgui_inline_items[index], index, p_data->list_of_status);            
            break;
        }
#endif   
#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)
        case INLINE_ITEM_TYPE_PROGRESS_BAR:
        {            
            cui_inline_progress_bar_struct *p_data = (cui_inline_progress_bar_struct*)special_data;
            SetInlineItemProgressBar(&wgui_inline_items[index], cui_inline_progress_bar_change_callback,&(p_data->value), p_data->max_value, p_data->step_size);
            SetInlineItemProgressBarStyle(&wgui_inline_items[index], p_data->ext_flag);
            break; 
        }
#endif        
    }
    cui_flag = cui_inline_convert_type_to_cui((common_data->flag) & 0xFF);
    cui_flag = cui_flag | (common_data->flag & 0xFFFFFF00);
    cui_inline_set_item_attributes(
        mmi_frm_group_get_active_id(),
        common_data->item_id,
        CUI_INLINE_SET_ATTRIBUTE,
        cui_flag);

}

#ifdef INLINE_CUI_MEMORY_FROM_ASM

/*****************************************************************************
 * FUNCTION
 *  cui_inline_create_instance
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  
 *****************************************************************************/
cui_inline_instance_struct *cui_inline_create_instance(mmi_id app_id,KAL_ADM_ID app_adm_id,U16* memory_p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;
    cui_inline_create_info is_create_bp = CUI_INLINE_NOT_CREATE; 
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
     //int j = sizeof(cui_inline_asm_instance_struct);
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)

    if(cui_inline_ml_adm_id == NULL)
    {
        cui_inline_ml_adm_id = kal_adm_create(
                        cui_inline_ml_hilist_buffer,
                        CUI_INLINE_ML_HILIST_COUNT * sizeof(HILITE_STR),
                        NULL,
                        KAL_FALSE);
    }
#endif

#ifdef INLINE_CUI_ASM_DEBUG_TRACE
    kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory start---------------------------------- \n");

    for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
    {
        kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory check INFO i: %d , address: %x ,APP ID: %d ,is_create: %d \n", 
                          i,g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id,g_cui_inline_asm_instance[i].is_create);
    }
#endif   
    
    for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
    {
        if (g_cui_inline_asm_instance[i].is_create == CUI_INLINE_NOT_CREATE)
        {   
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
            if(g_cui_inline_asm_instance[i].asm_instance)
            {
                kal_prompt_trace(MOD_MMI_FW, "InLine CUI NOT free memory from ASM i: %d ,address: %x ,APP ID: %d \n", 
                                  i,g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id);
            }    
#endif            
            if(app_id)
            {
                g_cui_inline_asm_instance[i].asm_instance = applib_asm_alloc_r(app_id,INLINE_CUI_INSTANCE_SIZE);
                g_cui_inline_asm_instance[i].app_id = (mmi_id)app_id;
                is_create_bp = CUI_INLINE_CREATE_WITH_ASM;
            }
            else
            {   if((!app_id)&&(!memory_p)&&(!app_adm_id))
                {
                    g_cui_inline_asm_instance[i].asm_instance = applib_asm_alloc_r(ASM_ANONYMOUS_ID,INLINE_CUI_INSTANCE_SIZE); 
                    g_cui_inline_asm_instance[i].app_id = (mmi_id)ASM_ANONYMOUS_ID;
                    is_create_bp = CUI_INLINE_CREATE_WITH_ASM;
                }
                else if(app_adm_id)
                {
                    g_cui_inline_asm_instance[i].asm_instance = kal_adm_alloc(app_adm_id,INLINE_CUI_INSTANCE_SIZE); 
                    g_cui_inline_asm_instance[i].app_adm_id = (KAL_ADM_ID)app_adm_id;
                    is_create_bp = CUI_INLINE_CREATE_WITH_ADM;
                }
                else if(memory_p)
                {
                    g_cui_inline_asm_instance[i].asm_instance = (cui_inline_instance_struct*)memory_p; 
                    is_create_bp = CUI_INLINE_CREATE_WITH_MEMORY_POINT;
                }
                    
            }
            
            if(g_cui_inline_asm_instance[i].asm_instance)
            {    
                memset(g_cui_inline_asm_instance[i].asm_instance, 0, INLINE_CUI_INSTANCE_SIZE);
                
                g_cui_inline_asm_instance[i].is_create= is_create_bp;
                cui_inline_reset_softkey_value(g_cui_inline_asm_instance[i].asm_instance);
                g_cui_inline_asm_instance[i].asm_instance->is_create = (MMI_BOOL)1;
                g_cui_inline_asm_instance[i].asm_instance->history_item_id = CUI_INLINE_INVALID_ID;
                g_cui_inline_asm_instance[i].inline_text_buff_used = (U8 *)g_cui_inline_asm_instance[i].asm_instance + INLINE_INSTANCE_SIZE;
                g_cui_inline_asm_instance[i].inline_text_buff = (U8 *)g_cui_inline_asm_instance[i].inline_text_buff_used + INLINE_TEXT_BUFFER_USED_INFO_SIZE;

#ifdef INLINE_CUI_ASM_DEBUG_TRACE
                kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory from ASM i: %d ,address: %x ,APP ID: %d ,Size:%d Success\n", 
                                 i,g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id,INLINE_CUI_INSTANCE_SIZE);
                kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory from ASM inline_text_buff_used: %x \n", 
                                                            g_cui_inline_asm_instance[i].inline_text_buff_used);
                kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory from ASM inline_text_buff: %x \n", 
                                                            g_cui_inline_asm_instance[i].inline_text_buff);

                kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory end---------------------------------- \n");
                
#endif


                return g_cui_inline_asm_instance[i].asm_instance;
            }
            g_cui_inline_asm_instance[i].app_id = 0;
            g_cui_inline_asm_instance[i].app_adm_id = 0;
            break;
        }
    }
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
    kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory from ASM address:   no get memory \n");
    kal_prompt_trace(MOD_MMI_FW, "InLine CUI get memory end-----------------00000----------------- \n");
#endif
    
    return NULL;
}
#else /*INLINE_CUI_MEMORY_FROM_ASM*/
cui_inline_instance_struct *cui_inline_create_instance()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)

    if(cui_inline_ml_adm_id == NULL)
    {
        cui_inline_ml_adm_id = kal_adm_create(
                        cui_inline_ml_hilist_buffer,
                        CUI_INLINE_ML_HILIST_COUNT * sizeof(HILITE_STR),
                        NULL,
                        KAL_FALSE);
    }
#endif
    
    for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
    {
        if (g_cui_inline_instance[i].is_create == 0)
        {
            memset(&g_cui_inline_instance[i], 0, sizeof(cui_inline_instance_struct));
            cui_inline_reset_softkey_value(&g_cui_inline_instance[i]);
            g_cui_inline_instance[i].is_create = (MMI_BOOL)1;
            g_cui_inline_instance[i].history_item_id = CUI_INLINE_INVALID_ID;
            return &g_cui_inline_instance[i];
        }
    }
    return NULL;
}

#endif

/*****************************************************************************
 * FUNCTION
 *  cui_inline_instance_delete_instance
 * DESCRIPTION
 *  
 * PARAMETERS
 *  p       [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_instance_delete_instance(cui_inline_instance_struct *p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
#ifdef INLINE_CUI_MEMORY_FROM_ASM    
    int i = 0;
#endif

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#ifdef INLINE_CUI_MEMORY_FROM_ASM
        
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
         kal_prompt_trace(MOD_MMI_FW, "InLine CUI free memory start--------------------input P:%x \n",p);

         for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
         {
             kal_prompt_trace(MOD_MMI_FW, "InLine CUI free memory check INFO i: %d , address: %x ,APP ID: %d ,is_create: %d \n", 
                               i,g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id,g_cui_inline_asm_instance[i].is_create);
         }
#endif

    for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
    {
        if (g_cui_inline_asm_instance[i].asm_instance == p)
        {   
            if((g_cui_inline_asm_instance[i].asm_instance)&&(g_cui_inline_asm_instance[i].is_create))
            {    
                
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
                kal_prompt_trace(MOD_MMI_FW, "InLine CUI free memory from ASM i: %d ,address: %x , APP ID: %d ,is_create: %d Success\n",
                                  i, g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id,g_cui_inline_asm_instance[i].is_create);
#endif
                if(g_cui_inline_asm_instance[i].is_create == CUI_INLINE_CREATE_WITH_ASM)
                {
                    applib_asm_free_r(g_cui_inline_asm_instance[i].app_id, g_cui_inline_asm_instance[i].asm_instance);
                }
                else if(g_cui_inline_asm_instance[i].is_create == CUI_INLINE_CREATE_WITH_ADM)
                {
                    kal_adm_free(g_cui_inline_asm_instance[i].app_adm_id, g_cui_inline_asm_instance[i].asm_instance);
                }
                g_cui_inline_asm_instance[i].is_create= 0;  
                g_cui_inline_asm_instance[i].app_id = 0;
                g_cui_inline_asm_instance[i].app_adm_id = 0;
                g_cui_inline_asm_instance[i].asm_instance = NULL;
                g_cui_inline_asm_instance[i].inline_text_buff_used = NULL;
                g_cui_inline_asm_instance[i].inline_text_buff = NULL;
                 
            }
        }
    }
    
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
        kal_prompt_trace(MOD_MMI_FW, "InLine CUI free memory end---------------------------------- \n");
#endif


#else /*INLINE_CUI_MEMORY_FROM_ASM*/

    p->is_create = (MMI_BOOL)0;

#endif
}


#if defined(__MMI_INLINE_ITEM_IP4__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_malloc_ip4_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void *cui_inline_malloc_ip4_buffer()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    for (i = 0; i < CUI_INLINE_IP4_INSTANCE_COUNT; i++)
    {
        if (cui_inline_ip4_buffer_is_malloc[i] == 0)
        {
            memset(&(cui_inline_ip4_buffer[i]), 0, sizeof(cui_inline_ip4_data_struct));
            cui_inline_ip4_buffer_is_malloc[i] = 1;
            MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_MALLOC_IP4_BUFFER, 0, i);
            return &(cui_inline_ip4_buffer[i]);
        }
    }
    return NULL;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_free_ip4_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  p       [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_free_ip4_buffer(void *p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;
    cui_inline_ip4_data_struct *p1 = (cui_inline_ip4_data_struct*) p;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (p != NULL)
    {
        i = ((U32) p1 - (U32) & (cui_inline_ip4_buffer[0])) / sizeof(cui_inline_ip4_data_struct);
        cui_inline_ip4_buffer_is_malloc[i] = 0;
        MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_FREE_IP4_BUFFER, 0, i);
    }
}

#endif

#if defined(__MMI_INLINE_ITEM_DATE__) || defined(__MMI_INLINE_ITEM_TIME__) // || defined(__MMI_INLINE_ITEM_TIME_PEROID__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_malloc_time_date_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void *cui_inline_malloc_time_date_buffer()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    for (i = 0; i < CUI_INLINE_DATE_TIME_INSTANCE_COUNT; i++)
    {
        if (cui_inline_date_time_buffer_is_malloc[i] == 0)
        {
            memset(&(cui_inline_date_time_buffer[i]), 0, sizeof(cui_inline_date_time_struct));
            cui_inline_date_time_buffer_is_malloc[i] = 1;
            MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_MALLOC_DATE_TIME_BUFFER, 0, i);
            return &(cui_inline_date_time_buffer[i]);
        }
    }
    return NULL;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_free_date_time_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  p       [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_free_date_time_buffer(void *p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;
    cui_inline_date_time_struct *p1 = (cui_inline_date_time_struct*) p;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (p != NULL)
    {
        i = ((U32) p1 - (U32) & (cui_inline_date_time_buffer[0])) / sizeof(cui_inline_date_time_struct);
        cui_inline_date_time_buffer_is_malloc[i] = 0;
        MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_FREE_DATE_TIME_BUFFER, 0, i);
    }
}

#endif

//#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) || defined(__MMI_INLINE_ITEM_TEXT_EDIT__) || defined(__MMI_INLINE_ITEM_IMAGETEXT__) || defined(__MMI_INLINE_ITEM_FULLSCREEN_EDIT__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_malloc_text_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
#ifdef INLINE_CUI_MEMORY_FROM_ASM
void *cui_inline_malloc_text_buffer(cui_inline_instance_struct *inline_instance)   /* U16 size */
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;
    int j = 0;
    U8 *text = NULL;
    U8 *text_buffer_is_malloc = NULL;
    U8 find_instance = 0;
    U8 *result = NULL;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
            kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer start--------------------------------------- \n");                    
#endif    
    for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
    {
        if((g_cui_inline_asm_instance[i].is_create)
            &&(g_cui_inline_asm_instance[i].asm_instance == inline_instance))
        {
           find_instance = 1;
           break;
        }
    
    }
    if(find_instance)
    {   text_buffer_is_malloc = g_cui_inline_asm_instance[i].inline_text_buff_used;
        text = g_cui_inline_asm_instance[i].inline_text_buff;
        for (j = 0; j < ONE_INLINE_TEXT_COUNT; j++)
        {
            if (text_buffer_is_malloc[j]== 0)
            {   
                result = ( U8 *)text+j*CUI_INLINE_TEXT_BUFFER_SIZE;
                memset(result, 0, CUI_INLINE_TEXT_BUFFER_SIZE);
                text_buffer_is_malloc[j] = 1;
                MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_MALLOC_TEXT_BUFFER, 0, i);

#ifdef INLINE_CUI_ASM_DEBUG_TRACE
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer from ASM i: %d ,address: %x ,APP ID: %d \n", 
                                 i,g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id);
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer from ASM inline_text_buff_used: %x \n", 
                                                            g_cui_inline_asm_instance[i].inline_text_buff_used);
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer from ASM inline_text_buff: %x \n", 
                                                            g_cui_inline_asm_instance[i].inline_text_buff);
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer from ASM result: %x ,j:%d\n", 
                                                            result,j);
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer end--------------------Success-------------- \n");
                
#endif                
                 return result;
            }    
        }

#ifdef INLINE_CUI_ASM_DEBUG_TRACE
        if(find_instance)
        {
            text_buffer_is_malloc = g_cui_inline_asm_instance[i].inline_text_buff_used;
            for (j = 0; j < ONE_INLINE_TEXT_COUNT; j++)
            {
                {
                    kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer from ASM text_buffer_is_malloc[%d]: %d \n", 
                                                                        j,text_buffer_is_malloc[j]);                
                }    
            }
        }
#endif        
                
    }
    
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
            kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer from ASM find_instance: %d \n",find_instance);
            kal_prompt_trace(MOD_MMI_FW, "cui_inline_malloc_text_buffer end--------------------Failure-------------- \n");                    
#endif

    return NULL;    
   
}

#else/*INLINE_CUI_MEMORY_FROM_ASM*/
void *cui_inline_malloc_text_buffer()   /* U16 size */
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    for (i = 0; i < CUI_INLINE_TEXT_INSTANCE_COUNT; i++)
    {
        if (cui_inline_text_buffer_is_malloc[i] == 0)
        {
            memset(cui_inline_text_buffer[i], 0, CUI_INLINE_TEXT_BUFFER_SIZE);
            cui_inline_text_buffer_is_malloc[i] = 1;
            MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_MALLOC_TEXT_BUFFER, 0, i);
            return &(cui_inline_text_buffer[i]);
        }
    }
    return NULL;
}
#endif /*INLINE_CUI_MEMORY_FROM_ASM*/ 


/*****************************************************************************
 * FUNCTION
 *  cui_inline_free_text_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  p       [?]     
 * RETURNS
 *  void
 *****************************************************************************/
#ifdef INLINE_CUI_MEMORY_FROM_ASM

void cui_inline_free_text_buffer(void *p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0,j = 0;
    U8 *p1 = (U8*) p;
    U8 *text = NULL;
    U8 *text_buffer_is_malloc = NULL;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
    kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer start -----------input address: %x----------------------- \n",p);                        
#endif    
    if (p != NULL)
    {    
        for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
        {        
            if(g_cui_inline_asm_instance[i].is_create)
            {
                text_buffer_is_malloc = g_cui_inline_asm_instance[i].inline_text_buff_used;
                text = g_cui_inline_asm_instance[i].inline_text_buff;            
                for (j = 0; j < ONE_INLINE_TEXT_COUNT; j++)
                {
                   if((text_buffer_is_malloc[j])&&(p1 == (text+j*CUI_INLINE_TEXT_BUFFER_SIZE)))
                   {
                        
                        text_buffer_is_malloc[j] = 0;
                        
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
                        kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM i: %d ,address: %x ,APP ID: %d \n", 
                                         i,g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id);
                        kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM inline_text_buff_used: %x \n", 
                                                                    g_cui_inline_asm_instance[i].inline_text_buff_used);
                        kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM inline_text_buff: %x \n", 
                                                                    g_cui_inline_asm_instance[i].inline_text_buff);
                        kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM p: %x ,j:%d\n", 
                                                                    p,j);
                        kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer end--------------------Success-------------- \n");                        
#endif                

                        return;
                   }
                   
                }
            }    
        }     
    }
#ifdef INLINE_CUI_ASM_DEBUG_TRACE
    if (p != NULL)
    {    
        for (i = 0; i < CUI_INLINE_INSTANCE_COUNT; i++)
        {        
            if(g_cui_inline_asm_instance[i].is_create)
            {
                text_buffer_is_malloc = g_cui_inline_asm_instance[i].inline_text_buff_used;
                text = g_cui_inline_asm_instance[i].inline_text_buff; 
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM i: %d ,address: %x ,APP ID: %d \n", 
                                 i,g_cui_inline_asm_instance[i].asm_instance,g_cui_inline_asm_instance[i].app_id);
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM inline_text_buff_used: %x \n", 
                                                            g_cui_inline_asm_instance[i].inline_text_buff_used);
                kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM inline_text_buff: %x \n", 
                                                            g_cui_inline_asm_instance[i].inline_text_buff);                
                for (j = 0; j < ONE_INLINE_TEXT_COUNT; j++)
                {                        

                        kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM text_buffer_is_malloc[%d]: %d \n", 
                                                                    j,text_buffer_is_malloc[j]);
                        
                        kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM text[%d]: %x \n", 
                                                                   j, (text+j*CUI_INLINE_TEXT_BUFFER_SIZE));                      
                } 
            }    
        }     
    }
    else
    {
      kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer from ASM p: 0000 \n");
    }

    kal_prompt_trace(MOD_MMI_FW, "cui_inline_free_text_buffer end---------------------------------- \n");                        
#endif      
}

#else /*INLINE_CUI_MEMORY_FROM_ASM*/ 
void cui_inline_free_text_buffer(void *p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    int i = 0;
    U8 *p1 = (U8*) p;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (p != NULL)
    {
        i = (p1 - cui_inline_text_buffer[0] + 1) / CUI_INLINE_TEXT_BUFFER_SIZE;
        cui_inline_text_buffer_is_malloc[i] = 0;
        MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_FREE_TEXT_BUFFER, 0, i);
    }
}

#endif /*INLINE_CUI_MEMORY_FROM_ASM*/

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_text_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  item_text_p     [?]         
 *  text_p          [IN]        
 *  memory_mode     [IN]        
 *  text_size       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
#ifdef INLINE_CUI_MEMORY_FROM_ASM

void cui_inline_set_text_buffer(PU8 *item_text_p, PU8 text_p, PU8 memory_mode, S32 text_size,cui_inline_instance_struct *inline_instance)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (((text_size + 1) * 2) > (CUI_INLINE_TEXT_BUFFER_SIZE))
    {

        /* MMI_ASSERT(text_p != NULL); */
        if (*memory_mode == CUI_INLINE_TEXT_MEMEORY_MALLOC)
        {
            cui_inline_free_text_buffer(*item_text_p);
        }
        *item_text_p = text_p;
        *memory_mode = CUI_INLINE_TEXT_MEMORY_POINTER;
    }
    else
    {
        if (*memory_mode != CUI_INLINE_TEXT_MEMEORY_MALLOC)
        {
            *item_text_p = cui_inline_malloc_text_buffer(inline_instance);
        }
        MMI_ASSERT(*item_text_p != NULL);
        memset(*item_text_p, 0, CUI_INLINE_TEXT_BUFFER_SIZE);
        if ((text_p != NULL) && (text_size > 0))
        {
            mmi_ucs2cpy((S8*)*item_text_p, (S8*)text_p);
        }
        *memory_mode = CUI_INLINE_TEXT_MEMEORY_MALLOC;
    }
}
#else /*INLINE_CUI_MEMORY_FROM_ASM*/
void cui_inline_set_text_buffer(PU8 *item_text_p, PU8 text_p, PU8 memory_mode, S32 text_size)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (((text_size + 1) * 2) > (CUI_INLINE_TEXT_BUFFER_SIZE))
    {

        /* MMI_ASSERT(text_p != NULL); */
        if (*memory_mode == CUI_INLINE_TEXT_MEMEORY_MALLOC)
        {
            cui_inline_free_text_buffer(*item_text_p);
        }
        *item_text_p = text_p;
        *memory_mode = CUI_INLINE_TEXT_MEMORY_POINTER;
    }
    else
    {
        if (*memory_mode != CUI_INLINE_TEXT_MEMEORY_MALLOC)
        {
            *item_text_p = cui_inline_malloc_text_buffer();
        }
        MMI_ASSERT(*item_text_p != NULL);
        memset(*item_text_p, 0, CUI_INLINE_TEXT_BUFFER_SIZE);
        if ((text_p != NULL) && (text_size > 0))
        {
            mmi_ucs2cpy((S8*)*item_text_p, (S8*)text_p);
        }
        *memory_mode = CUI_INLINE_TEXT_MEMEORY_MALLOC;
    }
}
#endif

//#endif


/*****************************************************************************
 * FUNCTION
 *  cui_inline_exit_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_exit_screen()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    g_cui_inline_current_instance->current_screen_id = 0;
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_EXIT_MAIN_SCREEN,
        g_cui_inline_current_instance->gid,
        g_cui_inline_current_instance->current_screen_id);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_draw_softkey
 * DESCRIPTION
 *  
 * PARAMETERS
 *  key     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_draw_softkey(WGUI_SOFTKEY_ENUM key)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    redraw_softkey(key);
}

#if defined(__MMI_INLINE_ITEM_DATE__)
#ifdef __INLINE_DATETIME_SLIM__
/*****************************************************************************
 * FUNCTION
 *  cui_inline_format_date
 * DESCRIPTION
 *  
 * PARAMETERS
 *  datestr     [?]     
 *  day         [?]     
 *  month       [?]     
 *  year        [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_format_date(U8 *datestr, U8 *day, U8 *month, U8 *year, U8 *dummy)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
      U8 temp_day, temp_month;
      U16 temp_year;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
      temp_day = (U8)gui_atoi((UI_string_type)day);
      temp_month = (U8)gui_atoi((UI_string_type)month);
      
      temp_year = (U16)gui_atoi((UI_string_type)year);
      memset(datestr, 0, 40);
       
      kal_wsprintf(
              (kal_wchar*)datestr, 
              "%04d/%02d/%02d ", //
              temp_year,
              temp_month,
              temp_day);
   /* 
      mmi_ucs2ncat(
              (S8*)date_string, 
              (S8*)GetString(dow_string_id), 
              MMI_TDL_MAX_DOW_SIZE);
*/
}
#else
void cui_inline_format_date(U8 *datestr, U8 *day, U8 *month, U8 *year)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
      U8 temp_day, temp_month;
      U16 temp_year;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
      temp_day = (U8)gui_atoi((UI_string_type)day);
      temp_month = (U8)gui_atoi((UI_string_type)month);
      
      temp_year = (U16)gui_atoi((UI_string_type)year);
      memset(datestr, 0, 40);
       
      kal_wsprintf(
              (kal_wchar*)datestr, 
              "%04d/%02d/%02d ", 
              temp_year,
              temp_month,
              temp_day);
   /* 
      mmi_ucs2ncat(
              (S8*)date_string, 
              (S8*)GetString(dow_string_id), 
              MMI_TDL_MAX_DOW_SIZE);
*/
}
#endif
#endif


#if defined(__MMI_INLINE_ITEM_TIME__)
#ifdef __INLINE_DATETIME_SLIM__
/*****************************************************************************
 * FUNCTION
 *  cui_inline_format_time
 * DESCRIPTION
 *  
 * PARAMETERS
 *  string_buffer       [?]     
 *  hours_buffer        [?]     
 *  min_buffer          [?]     
 *  am_pm_flag          [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_format_time(U8 *string_buffer, U8 *hours_buffer, U8 *min_buffer, U8 *am_pm_flag, U8 *dummy)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_ucs2cpy((S8*) string_buffer, (S8*) hours_buffer);
    mmi_ucs2cat((S8*) string_buffer, (S8*) L":");
    mmi_ucs2cat((S8*) string_buffer, (S8*) min_buffer);
}
#else
void cui_inline_format_time(U8 *string_buffer, U8 *hours_buffer, U8 *min_buffer, U8 *am_pm_flag)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_ucs2cpy((S8*) string_buffer, (S8*) hours_buffer);
    mmi_ucs2cat((S8*) string_buffer, (S8*) L":");
    mmi_ucs2cat((S8*) string_buffer, (S8*) min_buffer);
}
#endif
#endif


/*****************************************************************************
 * FUNCTION
 *  cui_inline_lock_main_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  string_buffer       [?]     
 *  hours_buffer        [?]     
 *  min_buffer          [?]     
 *  am_pm_flag          [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_lock_main_screen(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/ 
    if(inline_instance != NULL)
    {
       inline_instance->draw_locked ++;
    }  
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_lock_main_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  string_buffer       [?]     
 *  hours_buffer        [?]     
 *  min_buffer          [?]     
 *  am_pm_flag          [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_unlock_main_screen(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/ 
    if((inline_instance != NULL) && (inline_instance->draw_locked > 0))
    {
       inline_instance->draw_locked --;
    }  
}



/*****************************************************************************
 * FUNCTION
 *  cui_inline_unlock_main_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  string_buffer       [?]     
 *  hours_buffer        [?]     
 *  min_buffer          [?]     
 *  am_pm_flag          [?]     
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL cui_inline_main_screen_is_locked(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/ 
    if(inline_instance != NULL)
    {
        if(inline_instance->draw_locked > 0)
        {
            return MMI_TRUE;     
        }
    }  
    return MMI_FALSE;
}


#if 0
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */ 
#endif

#if defined(__MMI_INLINE_ITEM_IP4__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_ip4_print_3digit
 * DESCRIPTION
 *  
 * PARAMETERS
 *  output      [IN]        
 *  num         [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
static void cui_inline_ip4_print_3digit(PU8 StringVal, U8 DigitVal)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S8 LocalBuffer[8];
    S8 StrVal[8];

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (DigitVal == 0)
    {
        mmi_asc_to_ucs2((PS8) StrVal, (PS8) "000");
    }
    else if (DigitVal < 10)
    {
        sprintf(LocalBuffer, "00%d", DigitVal);
        mmi_asc_to_ucs2((PS8) StrVal, (PS8) LocalBuffer);
    }
    else if (DigitVal < 100)
    {
        sprintf(LocalBuffer, "0%d", DigitVal);
        mmi_asc_to_ucs2((PS8) StrVal, (PS8) LocalBuffer);
    }
    else
    {
        sprintf(LocalBuffer, "%d", DigitVal);
        mmi_asc_to_ucs2((PS8) StrVal, (PS8) LocalBuffer);
    }
    mmi_ucs2cpy((PS8) StringVal, (PS8) StrVal);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_format_ip4
 * DESCRIPTION
 *  
 * PARAMETERS
 *  string_buffer       [?]     
 *  ip1                 [?]     
 *  ip2                 [?]     
 *  ip3                 [?]     
 *  ip4                 [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_format_ip4(U8 *string_buffer, U8 *ip1, U8 *ip2, U8 *ip3, U8 *ip4)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 Point[4];
    S32 IPAddress[4];
    U8 LocalBuffer[8];

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_asc_to_ucs2((S8*) Point, (S8*) ".");

    IPAddress[0] = (S32) gui_atoi((UI_string_type) ip1);
    IPAddress[1] = (S32) gui_atoi((UI_string_type) ip2);
    IPAddress[2] = (S32) gui_atoi((UI_string_type) ip3);
    IPAddress[3] = (S32) gui_atoi((UI_string_type) ip4);

    cui_inline_ip4_print_3digit(LocalBuffer, (U8) IPAddress[0]);
    mmi_ucs2cpy((PS8) string_buffer, (PS8) LocalBuffer);
    mmi_ucs2cat((PS8) string_buffer, (PS8) Point);

    cui_inline_ip4_print_3digit(LocalBuffer, (U8) IPAddress[1]);
    mmi_ucs2cat((PS8) string_buffer, (PS8) LocalBuffer);
    mmi_ucs2cat((PS8) string_buffer, (PS8) Point);

    cui_inline_ip4_print_3digit(LocalBuffer, (U8) IPAddress[2]);
    mmi_ucs2cat((PS8) string_buffer, (PS8) LocalBuffer);
    mmi_ucs2cat((PS8) string_buffer, (PS8) Point);

    cui_inline_ip4_print_3digit(LocalBuffer, (U8) IPAddress[3]);
    mmi_ucs2cat((PS8) string_buffer, (PS8) LocalBuffer);
}

#endif


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_type
 * DESCRIPTION
 *  
 * PARAMETERS
 *  common_data     [?]         
 *  flag_type       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_type(cui_inline_item_common_data_struct *common_data, U32 flag_type)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    if ((flag_type & 0xFF) != 0)
    {
        common_data->flag = common_data->flag & 0xFFFFFF00;
        common_data->flag = common_data->flag | (flag_type & 0x000000FF);
    }

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_convert_id_to_index
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid     [IN]        
 *  id      [IN]        
 * RETURNS
 *  
 *****************************************************************************/
U16 cui_inline_convert_id_to_index(mmi_id gid, S32 id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 i = 0;

    MMI_ASSERT(inline_instance != NULL);
    MMI_ASSERT(id >= CUI_INLINE_ITEM_ID_BASE);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    for (i = 0; i < inline_instance->item_count; i++)
    {
        if ((inline_instance->cui_inline_items[i].common_data.item_id) == id)
        {
            return i;
        }
    }
    return CUI_INLINE_INVALID_ID;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_convert_app_to_cui
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  app_item        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_convert_app_to_cui(mmi_id gid, U16 item_id, const cui_inline_set_item_struct *app_item)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    /* void *item_data = app_item->item_data; */

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_CUI_SET_ITEM_APP_TO_CUI, gid, item_id, (app_item->item_flag & 0xff));
    switch (app_item->item_flag & 0xff)
    {
        case CUI_INLINE_ITEM_TYPE_CAPTION:
        {
            cui_inline_item_caption_struct *item_data;
            PU8 text_p = NULL;

            item_data = (cui_inline_item_caption_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                text_p = (PU8) get_string(item_data->string_id);
            }
            cui_inline_set_item_caption(gid, item_id, text_p);
            break;
        }
        case CUI_INLINE_ITEM_TYPE_DISPLAY_ONLY:
        {
            cui_inline_item_display_only_struct *item_data;
            PU8 text_p = NULL;

            item_data = (cui_inline_item_display_only_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                text_p = (PU8) get_string(item_data->string_id);
                cui_inline_set_item_displayonly(gid, item_id, text_p, item_data->default_text_id);
            }
           	else
          	{
          	    cui_inline_set_item_displayonly(gid, item_id, text_p, 0);    
            }
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case CUI_INLINE_ITEM_TYPE_MULTILINE_RD_ONLY:
        {
            cui_inline_item_multiline_rdonly_struct *item_data;
            PU8 text_p = NULL;

            item_data = (cui_inline_item_multiline_rdonly_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                text_p = (PU8) get_string(item_data->string_id);
            }
            cui_inline_set_item_multiline_read_only(gid, item_id, text_p, item_data->height_of_item);
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */ 

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case CUI_INLINE_ITEM_TYPE_MULTILINE_EDIT:
        {
            cui_inline_item_multiline_edit_struct *item_data = NULL;
            PU8 text_p = NULL;

            item_data = (cui_inline_item_multiline_edit_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                text_p = (PU8) get_string(item_data->string_id);
            }
            cui_inline_set_item_multiline_edit(gid, item_id, text_p, item_data->buffer_size, item_data->input_type, item_data->height_of_item);
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */         
        case CUI_INLINE_ITEM_TYPE_TEXT_EDIT:
        {
            cui_inline_item_text_edit_struct *item_data;
            PU8 text_p = NULL;

            item_data = (cui_inline_item_text_edit_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                text_p = (PU8) get_string(item_data->string_id);
            }
            cui_inline_set_item_text_edit(
                gid,
                item_id,
                text_p,
                item_data->buffer_size,
                item_data->input_type,
                item_data->input_extended_type,
                item_data->required_input_mode_set,
                item_data->default_text_id);
            break;
        }
        case CUI_INLINE_ITEM_TYPE_FULLSCREEN_EDIT:
        {
            cui_inline_item_fullscreen_edit_struct *item_data;
            cui_inline_set_item_fullscreen_edit_struct temp_cui_data;

            item_data = (cui_inline_item_fullscreen_edit_struct*) (app_item->item_data);

            if((app_item->item_flag & 0xff) == CUI_INLINE_ITEM_TYPE_TEXT_EDIT)
            {
                temp_cui_data.title = 0;
                temp_cui_data.title_icon = 0;
            }
            else
            {
                temp_cui_data.title = item_data->title;
                temp_cui_data.title_icon = item_data->title_icon;
            }

            temp_cui_data.default_text_id = item_data->default_text_id;
            temp_cui_data.buffer = (PU8) get_string(item_data->string_id);
            temp_cui_data.buffer_size = item_data->buffer_size;
            temp_cui_data.input_extended_type = item_data->input_extended_type;
            temp_cui_data.input_type = item_data->input_type;
            temp_cui_data.required_input_mode_set = item_data->required_input_mode_set;
            
            cui_inline_set_item_fullscreen_edit(gid, item_id, &temp_cui_data);
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */   
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */         
        case CUI_INLINE_ITEM_TYPE_DATE:
        {
#if defined(__MMI_INLINE_ITEM_DATE__)            
            cui_inline_item_date_time_struct *item_data;
            cui_inline_set_item_date_time_struct temp_cui_data = {0};
            item_data = (cui_inline_item_date_time_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                temp_cui_data.day = item_data->day;
                temp_cui_data.month = item_data->month;
                temp_cui_data.year = item_data->year;
            }
            cui_inline_set_item_date(gid, item_id, &temp_cui_data);
#endif            
            break;
        }
        case CUI_INLINE_ITEM_TYPE_TIME:
        {
#if defined(__MMI_INLINE_ITEM_TIME__)            
            cui_inline_item_time_struct *item_data;
            cui_inline_set_item_time_struct temp_cui_data = {0};
            item_data = (cui_inline_item_time_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                temp_cui_data.date_time.hour = item_data->date_time.hour;
                temp_cui_data.date_time.minute = item_data->date_time.hour;
                temp_cui_data.date_format = item_data->date_format;
            }
            cui_inline_set_item_time(gid, item_id, &temp_cui_data);
#endif            
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */ 
#endif
#if defined(__MMI_INLINE_ITEM_IP4__) 
        case CUI_INLINE_ITEM_TYPE_IP4:
        {           
            cui_inline_item_ip4_struct *item_data;
            cui_inline_set_item_ip4_struct temp_cui_data = {0};
            item_data = (cui_inline_item_ip4_struct*) (app_item->item_data);
            if (item_data != NULL)
            {
                temp_cui_data.b1 = item_data->b1;
                temp_cui_data.b2 = item_data->b2;
                temp_cui_data.b3 = item_data->b3;
                temp_cui_data.b4 = item_data->b4;
            }
            cui_inline_set_item_ip4(gid, item_id, &temp_cui_data);            
            break;
        }
#endif        
        case CUI_INLINE_ITEM_TYPE_SELECT:
        {
            //U8 *temp_select_string[CUI_INLINE_SELECT_CONTENT_COUNT] = {0};
            //U8 i = 0;
            cui_inline_item_select_struct *item_data;

            item_data = (cui_inline_item_select_struct*) (app_item->item_data);
            if(item_data != NULL)
            {
                cui_inline_set_item_select_with_string_id(
                    gid,
                    item_id,
                    item_data->n_items,
                    (U16 *)item_data->list_of_item_id,
                    (U8) (item_data->highlighted_item));
            }
            else
            {
                cui_inline_set_item_select_with_string_id(
                    gid,
                    item_id,
                    0,
                    NULL,
                    (U8)0
                    );    
            }
            break;
        }
#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)        
        case CUI_INLINE_ITEM_TYPE_COLOR_SELECT:
        {
            cui_inline_item_color_select_struct *item_data;

            item_data = (cui_inline_item_color_select_struct*) (app_item->item_data);
            cui_inline_set_item_color_select(
                gid,
                item_id,
                item_data->n_color,
                item_data->highlight_index,
                item_data->list_of_color);
            break;
        }
#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */ 

        case CUI_INLINE_ITEM_TYPE_USER_DEFINED_SELECT:
        {
           // cui_inline_set_item_user_defined_select(gid, item_id);
            break;
        }
#if defined(__MMI_INLINE_ITEM_DOW__)        
        case CUI_INLINE_ITEM_TYPE_DOW:
        {             
            cui_inline_item_dow_select_struct *item_data;

            item_data = (cui_inline_item_dow_select_struct*) (app_item->item_data);
            cui_inline_set_item_dow_select(gid, item_id, item_data->list_of_states);            
            break;
        }
#endif

#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)
        case CUI_INLINE_ITEM_TYPE_PROGRESS_BAR:
        {            
            cui_inline_item_progress_bar_struct *item_data = (cui_inline_item_progress_bar_struct*) (app_item->item_data);
            cui_inline_set_item_progress_bar_struct temp_data = {0};
            if(item_data != NULL)
            {
                temp_data.max_value = item_data->max_value;
                temp_data.value = item_data->value;
                temp_data.step_size = item_data->step_size;
            }
            cui_inline_set_item_progress_bar(gid, item_id, &temp_data);            
            break;
        }
#endif        
        default:
        {
            MMI_ASSERT(0);
            break;
        }
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_initialize_items
 * DESCRIPTION
 *  
 * PARAMETERS
 *  inline_id           [IN]        
 *  inline_struct       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_initialize_items(mmi_id inline_id, const cui_inline_struct *inline_struct)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 i = 0;
    cui_inline_item_struct *item = NULL;
    cui_inline_item_softkey_struct *p_softkey = NULL;

    /* cui_inline_item_softkey_struct *softkey = NULL; */
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(inline_id);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    p_instance->item_count = inline_struct->items_count;
    p_instance->title = inline_struct->title;
    p_instance->title_icon = inline_struct->title_icon;

    cui_inline_set_screen_attributes(inline_id, CUI_INLINE_SET_ATTRIBUTE, inline_struct->screen_flag);
    for (i = 0; i < p_instance->item_count; i++)
    {
        U32 item_flag = (inline_struct->items[i].item_flag) & 0xFF;
        U32 pluto_flag = cui_inline_convert_type_to_inline(item_flag);

        item = &((p_instance->cui_inline_items)[i]);
        item->common_data.item_id = (inline_struct->items[i]).item_id;

        item->common_data.flag = (inline_struct->items[i]).item_flag;
        cui_inline_set_item_type(&(item->common_data), pluto_flag);

        p_instance->list_of_icons[i] = inline_struct->items[i].image_id;

        cui_inline_set_item_convert_app_to_cui(inline_id, (item->common_data).item_id, &(inline_struct->items[i]));
        cui_inline_set_item_attributes(
            inline_id,
            (item->common_data).item_id,
            CUI_INLINE_SET_ATTRIBUTE,
            (inline_struct->items[i]).item_flag);
    }
    if (inline_struct->softkey != NULL)
    {
        for (i = 0; i < p_instance->item_count; i++)
        {
            p_softkey = &(p_instance->cui_inline_items_softkey[i]);
            p_softkey->softkey[MMI_LEFT_SOFTKEY].string_id =
                inline_struct->softkey->softkey[MMI_LEFT_SOFTKEY].string_id;
            p_softkey->softkey[MMI_LEFT_SOFTKEY].image_id = inline_struct->softkey->softkey[MMI_LEFT_SOFTKEY].image_id;
            p_softkey->softkey[MMI_RIGHT_SOFTKEY].string_id =
                inline_struct->softkey->softkey[MMI_RIGHT_SOFTKEY].string_id;
            p_softkey->softkey[MMI_RIGHT_SOFTKEY].image_id =
                inline_struct->softkey->softkey[MMI_RIGHT_SOFTKEY].image_id;

            
            /* In Slim Project, these items use CSK to execute themselves command. */
            if(((p_instance->cui_inline_items[i].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT)||
               ((p_instance->cui_inline_items[i].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT) ||
               ((p_instance->cui_inline_items[i].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_SELECT)
              )
            {
                /* Not register App's icon for CSK. */
            }
            else
            {
            p_softkey->softkey[MMI_CENTER_SOFTKEY].string_id =
                inline_struct->softkey->softkey[MMI_CENTER_SOFTKEY].string_id;
            p_softkey->softkey[MMI_CENTER_SOFTKEY].image_id =
                inline_struct->softkey->softkey[MMI_CENTER_SOFTKEY].image_id;
        }
                        
        }
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_delete_item_data
 * DESCRIPTION
 *  
 * PARAMETERS
 *  item_data       [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_delete_item_data(cui_inline_item_struct *item_data)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_item_common_data_struct *common_data = &(item_data->common_data);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (common_data->flag & 0xff)
    {
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)    
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
        {
            cui_inline_multiline_edit_struct *special_data =
                (cui_inline_multiline_edit_struct*) & (item_data->special_data);
            if ((special_data->buffer != NULL) && (special_data->memory_mode == CUI_INLINE_TEXT_MEMEORY_MALLOC))
            {
                cui_inline_free_text_buffer(special_data->buffer);
            }
            special_data->buffer = NULL;
            special_data->memory_mode = CUI_INLINE_TEXT_MEMORY_NONE;
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */         
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            cui_inline_fullscreen_edit_struct *special_data =
                (cui_inline_fullscreen_edit_struct*) & (item_data->special_data);
            if ((special_data->buffer != NULL) && (special_data->memory_mode == CUI_INLINE_TEXT_MEMEORY_MALLOC))
            {
                cui_inline_free_text_buffer(special_data->buffer);
            }
            special_data->buffer = NULL;
            special_data->memory_mode = CUI_INLINE_TEXT_MEMORY_NONE;
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */ 
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */ 

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY:
        {
            cui_inline_multiline_read_only_struct *special_data =
                (cui_inline_multiline_read_only_struct*) & (item_data->special_data);
            if ((special_data->buffer != NULL) && (special_data->memory_mode == CUI_INLINE_TEXT_MEMEORY_MALLOC))
            {
                cui_inline_free_text_buffer(special_data->buffer);
            }
            special_data->buffer = NULL;
            special_data->memory_mode = CUI_INLINE_TEXT_MEMORY_NONE;

            if(special_data->highlight_list_info.hilite_list != NULL)
            {
                kal_adm_free(cui_inline_ml_adm_id, (void *)special_data->highlight_list_info.hilite_list); 
                special_data->highlight_list_info.hilite_list = NULL;
                cui_inline_ml_alloc_count--;
            }
               
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */         
        case INLINE_ITEM_TYPE_DATE:
        {
#if defined(__MMI_INLINE_ITEM_DATE__)            
            cui_inline_date_struct *special_data = (cui_inline_date_struct*) & (item_data->special_data);

            cui_inline_free_date_time_buffer(special_data->date_data);
            special_data->date_data = NULL;
#endif            
            break;
        }
        case INLINE_ITEM_TYPE_TIME:
        {
#if defined(__MMI_INLINE_ITEM_TIME__)            
            cui_inline_time_struct *special_data = (cui_inline_time_struct*) & (item_data->special_data);

            cui_inline_free_date_time_buffer(special_data->time_data);
            special_data->time_data = NULL;
#endif            
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */ 
#endif
#if defined(__MMI_INLINE_ITEM_IP4__)
        case INLINE_ITEM_TYPE_IP4_EDIT:
        {            
            cui_inline_ip4_struct *special_data = (cui_inline_ip4_struct*) & (item_data->special_data);

            cui_inline_free_ip4_buffer(special_data->ip4_data);
            special_data->ip4_data = NULL;            
            break;
        }
#endif        
        default:
        {
            return;
        }
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_move_instance_data_list
 * DESCRIPTION
 *  
 * PARAMETERS
 *  instance            [?]         
 *  start_index         [IN]        
 *  operator_flag       [IN]        
 * RETURNS
 *  
 *****************************************************************************/
MMI_BOOL cui_inline_move_instance_data_list(
            cui_inline_instance_struct *instance,
            U16 start_index,
            MMI_BOOL operator_flag)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 i;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (operator_flag == 0)
    {
        for (i = start_index; i < (instance->item_count); i++)
        {
            memcpy(
                (U8*) & (instance->cui_inline_items[i]),
                (U8*) & (instance->cui_inline_items[i + 1]),
                sizeof(cui_inline_item_struct));
            memcpy((U8*) & (instance->list_of_icons[i]), (U8*) & (instance->list_of_icons[i + 1]), sizeof(U16));
            memcpy(
                (U8*) & (instance->cui_inline_items_softkey[i]),
                (U8*) & (instance->cui_inline_items_softkey[i + 1]),
                sizeof(cui_inline_item_softkey_struct));
        }
        memset((U8*) & (instance->cui_inline_items[instance->item_count - 1]), 0, sizeof(cui_inline_item_struct));
        memset((U8*) & (instance->list_of_icons[instance->item_count - 1]), 0, sizeof(U16));
        memset(
            (U8*) & (instance->cui_inline_items_softkey[instance->item_count - 1]),
            0xff,
            sizeof(cui_inline_item_softkey_struct));
        return MMI_TRUE;
    }
    else if (operator_flag == 1)
    {
        if (instance->item_count == CUI_INLINE_MAX_ITEM_COUNT)
        {
            return MMI_FALSE;
        }
        for (i = (instance->item_count); i > start_index; i--)
        {
            memcpy(
                (U8*) & (instance->cui_inline_items[i]),
                (U8*) & (instance->cui_inline_items[i - 1]),
                sizeof(cui_inline_item_struct));
            memcpy((U8*) & (instance->list_of_icons[i]), (U8*) & (instance->list_of_icons[i - 1]), sizeof(U16));
            memcpy(
                (U8*) & (instance->cui_inline_items_softkey[i]),
                (U8*) & (instance->cui_inline_items_softkey[i - 1]),
                sizeof(cui_inline_item_softkey_struct));
        }
        memset((U8*) & (instance->cui_inline_items[start_index]), 0, sizeof(cui_inline_item_struct));
        memset((U8*) & (instance->list_of_icons[start_index]), 0, sizeof(U16));
        memset(
            (U8*) & (instance->cui_inline_items_softkey[start_index]),
            0xff,
            sizeof(cui_inline_item_softkey_struct));
        return MMI_TRUE;
    }
    return MMI_FALSE;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_deint_group
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_deint_group(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_event_inline_common_struct evt;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_GROUP_DEINIT, gid);  
    mmi_frm_group_send_to_parent(gid, (mmi_group_event_struct*) & evt);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_is_edit_main_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL cui_inline_is_edit_main_screen(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(inline_instance == NULL)
    {
        return MMI_FALSE;
    }
    if(inline_instance->app_screen_id != 0)
    {
        if(inline_instance->current_screen_id == inline_instance->app_screen_id)
        {
            return MMI_TRUE;
        }
    }
    else
    {
        if(inline_instance->current_screen_id == CUI_INLINE_MAIN_SCREEN_SCRN_ID)
        {
            return MMI_TRUE;
        }
    }
    return MMI_FALSE;
    
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_is_edit_main_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_multiline_rdly_highlight_list_change_index(S32 idx)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_multiline_read_only_struct *p_mulline_rdonly = NULL;
    cui_event_inline_notify_struct evt;
    cui_inline_instance_struct *inline_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(inline_instance != NULL)
    {
        p_mulline_rdonly =
        (cui_inline_multiline_read_only_struct*) & (inline_instance->cui_inline_items[inline_instance->highlight_item].special_data);
        p_mulline_rdonly->highlight_list_info.curr_hilite_idx = idx;

        MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, inline_instance->gid);
        evt.event_type = CUI_INLINE_NOTIFY_ML_RDLY_HIGHLIGHT_LIST_CHANGE_INDEX;
        evt.item_id = inline_instance->cui_inline_items[inline_instance->highlight_item].common_data.item_id;
        evt.param = idx;
        mmi_frm_group_send_to_parent(inline_instance->gid, (mmi_group_event_struct*) & evt);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_is_edit_main_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_multiline_rdly_highlight_list_click(S32 idx)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_multiline_read_only_struct *p_mulline_rdonly = NULL;
    cui_event_inline_notify_struct evt;
    cui_inline_instance_struct *inline_instance =  
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(inline_instance != NULL)
    {
        p_mulline_rdonly =
        (cui_inline_multiline_read_only_struct*) & (inline_instance->cui_inline_items[inline_instance->highlight_item].special_data);
        p_mulline_rdonly->highlight_list_info.curr_hilite_idx = idx;

        MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, inline_instance->gid);
        evt.event_type = CUI_INLINE_NOTIFY_ML_RDLY_HIGHLIGHT_LIST_CLICK;
        evt.item_id = inline_instance->cui_inline_items[inline_instance->highlight_item].common_data.item_id;
        evt.param = idx;
        mmi_frm_group_send_to_parent(inline_instance->gid, (mmi_group_event_struct*) & evt);
    }
}



/*****************************************************************************  
*   Extern Functions 
*****************************************************************************/
#define CUI_INLINE_API


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_screen_attributes
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  operation       [IN]        
 *  flag            [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_screen_attributes(mmi_id gid, U8 operation, U32 flag)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (operation == CUI_INLINE_SET_ATTRIBUTE)
    {
        p_instance->screen_flag |= flag;
        if(flag & CUI_INLINE_SCREEN_LOOP)
        {
		         //p_instance->screen_flag & ~CUI_INLINE_SCREEN_DISABLE_LOOP;   	
        }
        if (cui_inline_is_edit_main_screen(p_instance->gid))
        {
            if (flag & CUI_INLINE_SCREEN_DISABLE_LOOP)
            {
                wgui_inline_menu_disable_looping();
            }
            if (flag & CUI_INLINE_SCREEN_LOOP)
            {
                wgui_inline_menu_enable_looping();
            }
            if (flag & CUI_INLINE_SCREEN_DEFAULT_TEXT)
            {
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__                 
                EnableInlineItemDefaultText();
#endif
            }
            
            if (flag & CUI_INLINE_SCREEN_DISABLE_DONE)
            {
                DisableCategory57ScreenDone();
				DisableCategory57ScreenRskBack();
            }
			else
			{
			    DisableCategory57ScreenDone();
			    EnableCategory57ScreenRskBack();
			}
            
            if (flag & CUI_INLINE_SCREEN_CHANGED)
            {
                /* SetInlineListMenuChanged(); */
                wgui_inline_list_menu_changed = 1;
            }
        }
    }
    if (operation == CUI_INLINE_RESET_ATTRIBUTE)
    {
        p_instance->screen_flag &= ~flag;
        if(flag & CUI_INLINE_SCREEN_LOOP)
        {
		         p_instance->screen_flag |= CUI_INLINE_SCREEN_DISABLE_LOOP;   	
        }
        if (cui_inline_is_edit_main_screen(p_instance->gid))
        {
            if (flag & CUI_INLINE_SCREEN_LOOP)
            {
                wgui_inline_menu_disable_looping();
            }
            if (flag & CUI_INLINE_SCREEN_DEFAULT_TEXT)
            {
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__                 
                DisableInlineItemDefaultText();
#endif
            }
            
            if (flag & CUI_INLINE_SCREEN_DISABLE_DONE)
            {
                EnableCategory57ScreenDone();
				EnableCategory57ScreenRskBack();
            }
			else
			{
			    DisableCategory57ScreenRskBack();
			}
			DisableCategory57ScreenDone();
            
            if (flag & CUI_INLINE_SCREEN_CHANGED)
            {
                wgui_inline_list_menu_changed = 0;
                /* MMI_ASSERT(0); */
            }
        }
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_screen_attributes
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid     [IN]        
 * RETURNS
 *  
 *****************************************************************************/
U32 cui_inline_get_screen_attributes(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return p_instance->screen_flag;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_attributes
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  operation       [IN]        
 *  flag            [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_item_attributes(mmi_id gid, U16 item_id, U8 operation, U32 flag)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    cui_inline_item_struct *item = NULL;
    U32 index = 0;
    U32 pluto_type;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);

    if((index == CUI_INLINE_INVALID_ID) || (p_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }
    
    item = &(p_instance->cui_inline_items[index]);
    pluto_type = cui_inline_convert_type_to_inline(flag & 0xFF);
    cui_inline_set_item_type(&(item->common_data), (U8) pluto_type);
    flag &= 0xFFFFFF00;

    if ((operation == CUI_INLINE_SET_ATTRIBUTE))
    {
        item->common_data.flag |= flag;
        if (cui_inline_is_edit_main_screen(p_instance->gid))
        {
            if (flag & CUI_INLINE_ITEM_LEFT_JUSTIFY)
            {
                LeftJustifyInlineItem(&(wgui_inline_items[index]));
            }
            if (flag & CUI_INLINE_ITEM_RIGHT_JUSTIFY)
            {
                item->common_data.flag &= ~CUI_INLINE_ITEM_CENTER_JUSTIFY;
                item->common_data.flag &= ~CUI_INLINE_ITEM_LEFT_JUSTIFY;
                RightJustifyInlineItem(&(wgui_inline_items[index]));
            }
            if (flag & CUI_INLINE_ITEM_CENTER_JUSTIFY)
            {
                item->common_data.flag &= ~CUI_INLINE_ITEM_LEFT_JUSTIFY;
                item->common_data.flag &= ~CUI_INLINE_ITEM_RIGHT_JUSTIFY;
                CenterJustifyInlineItem(&(wgui_inline_items[index]));
            }
            /*
            if (flag & CUI_INLINE_ITEM_DISABLE_LIST_HIGHLIGHT)
            {
                DisableInlineItemHighlight(&(wgui_inline_items[index]));
            }
            */
            if (flag & CUI_INLINE_ITEM_BOUNDARY)
            {
                EnableInlineItemBoundary(&(wgui_inline_items[index]));
            }
            if (flag & CUI_INLINE_ITEM_DISABLE)
            {
                DisableInlineItem(&(wgui_inline_items[index]), index);
            }
            if (flag & CUI_INLINE_ITEM_DRAW_AS_CONTROL)
            {
                ShowAsControl(&(wgui_inline_items[index]));
            }
            if (flag & CUI_INLINE_ITEM_FULL_WIDTH)
            {
                SetInlineItemFullWidth(&(wgui_inline_items[index]));
            }
            if(flag & CUI_INLINE_ITEM_NO_LEADING_ZERO)
            {
                wgui_inline_set_leading_zero_style(&(wgui_inline_items[index]), (MMI_BOOL)0);
            }
            if(flag & CUI_INLINE_ITEM_DEFAULT_ICON)
            {
                SetInlineIconStyle(&(wgui_inline_items[index]), p_instance->picon, 1);
            }
            if(flag & CUI_INLINE_ITEM_DISPLAY_NO_RESPONSE_NUMKEY)
            {
                if((item->common_data.flag & 0xFF) == INLINE_ITEM_TYPE_DISPLAY_ONLY)
                {
                    wgui_inline_set_displayonly_no_num_key(&(wgui_inline_items[index]), (MMI_BOOL)1);
                }
            }
            if(flag & CUI_INLINE_ITEM_TEXTEDIT_FIRST_CURSOR)
            {
                if((item->common_data.flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT)
                {
                    wgui_inline_set_text_edit_first_cursor(&(wgui_inline_items[index]), MMI_TRUE);
                }
            }
#ifdef __MMI_FTE_SUPPORT__            
            if(flag & CUI_INLINE_ITEM_DISPLAY_ONLY_SHOW)
            {                
                wgui_inline_fte_set_item_show_as_display_only(&(wgui_inline_items[index]));                
            }
#endif            
            if (flag & CUI_INLINE_ITEM_DEFAULT_TEXT)
            {
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__            
                U16 default_text_id = 0;
#endif

                switch ((item->common_data.flag) & 0xFF)
                {
                    case INLINE_ITEM_TYPE_TEXT_EDIT:
                    case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
                    {
                        cui_inline_fullscreen_edit_struct *item_data =
                            (cui_inline_fullscreen_edit_struct
*) (&((p_instance->cui_inline_items[index]).special_data));
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__  
                        default_text_id = item_data->default_text_id;
                        if(item_data->default_text_ptr != NULL)
                        {                     
                            SetInlineItemTextEditDefaultItemNameIfEmpty_with_string(&wgui_inline_items[index], item_data->default_text_ptr);    
                        }
                        else if(get_string(item_data->default_text_id) != NULL)
                        {                  
                            SetInlineItemTextEditDefaultItemNameIfEmpty_with_string(&wgui_inline_items[index], (U8 *)get_string(item_data->default_text_id));
                        }
#endif    
                        break;
                    }
                    case INLINE_ITEM_TYPE_DISPLAY_ONLY:
                    {
                        cui_inline_display_only_struct * item_data = 
                            (cui_inline_display_only_struct *)
                            (&((p_instance->cui_inline_items[index]).special_data));
#ifdef __MMI_UI_INLINE_EDIT_DEFAULT_TEXT_EFFECT__                         
                        default_text_id = item_data->default_text_id;
                        SetInlineItemTextEditDefaultItemNameIfEmpty(&(wgui_inline_items[index]), default_text_id);
#endif
                        break;
                    }
                    default:
                        MMI_ASSERT(0);
                }

            }
            cui_inline_redraw_screen(gid);
        }
        
    }
    if (operation == CUI_INLINE_RESET_ATTRIBUTE)
    {
        item->common_data.flag &= ~flag;
        if (cui_inline_is_edit_main_screen(p_instance->gid))
        {
            if (flag & CUI_INLINE_ITEM_RIGHT_JUSTIFY)
            {
                item->common_data.flag |= CUI_INLINE_ITEM_LEFT_JUSTIFY;
                LeftJustifyInlineItem(&(wgui_inline_items[index]));
            }
            if (flag & CUI_INLINE_ITEM_CENTER_JUSTIFY)
            {
                item->common_data.flag |= CUI_INLINE_ITEM_LEFT_JUSTIFY;
                LeftJustifyInlineItem(&(wgui_inline_items[index]));
            }
            /*
            if (flag & CUI_INLINE_ITEM_DISABLE_LIST_HIGHLIGHT)
            {
                EnableInlineItemHighlight(&(wgui_inline_items[index]));
            }
            */
            if (flag & CUI_INLINE_ITEM_BOUNDARY)
            {
                DisableInlineItemBoundary(&(wgui_inline_items[index]));
            }
            if (flag & CUI_INLINE_ITEM_DISABLE)
            {
                EnableInlineItem(&(wgui_inline_items[index]), index);
            }
            if(flag & CUI_INLINE_ITEM_NO_LEADING_ZERO)
            {
                wgui_inline_set_leading_zero_style(&(wgui_inline_items[index]), (MMI_BOOL)1);
            }
            if(flag & CUI_INLINE_ITEM_DEFAULT_ICON)
            {
                SetInlineIconStyle(&(wgui_inline_items[index]), p_instance->picon, 0);
            }
            if(flag & CUI_INLINE_ITEM_DISPLAY_NO_RESPONSE_NUMKEY)
            {
                if((item->common_data.flag & 0xFF) == INLINE_ITEM_TYPE_DISPLAY_ONLY)
                {
                    wgui_inline_set_displayonly_no_num_key(&(wgui_inline_items[index]), (MMI_BOOL)0); 
                }
            }
            if(flag & CUI_INLINE_ITEM_TEXTEDIT_FIRST_CURSOR)
            {
                if((item->common_data.flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT)
                {
                    wgui_inline_set_text_edit_first_cursor(&(wgui_inline_items[index]), (MMI_BOOL)0);
                }
            }
#ifdef __MMI_FTE_SUPPORT__             
            if(flag & CUI_INLINE_ITEM_DISPLAY_ONLY_SHOW)
            {
                wgui_inline_fte_reset_item_show_as_display_only(&(wgui_inline_items[index]));                
            }
#endif            
            MMI_ASSERT((flag & CUI_INLINE_ITEM_DRAW_AS_CONTROL) == 0);
            MMI_ASSERT((flag & CUI_INLINE_ITEM_FULL_WIDTH) == 0);          
            cui_inline_redraw_screen(gid);
        }
       
    }
#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)    
    if(operation == CUI_INLINE_SET_EXT_ATTRIBUTE)
    {
        switch ((item->common_data.flag) & 0xFF)
        {
            case INLINE_ITEM_TYPE_PROGRESS_BAR:
            {
                
                cui_inline_progress_bar_struct *item_data =
                            (cui_inline_progress_bar_struct*) (&((p_instance->cui_inline_items[index]).special_data));
                item_data->ext_flag |= flag;
                if (cui_inline_is_edit_main_screen(p_instance->gid))
                {
                    SetInlineItemProgressBarStyle(&(wgui_inline_items[index]), flag);
                    cui_inline_redraw_screen(gid); 
                }                
                break;
            }
            default:
                MMI_ASSERT(0);
        }
    }
#endif

    return 1;

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_item_attributes
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 * RETURNS
 *  
 *****************************************************************************/
U32 cui_inline_get_item_attributes(mmi_id gid, U16 item_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_item_struct *item = NULL;
    U32 index = 0;
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    item = &(p_instance->cui_inline_items[index]);

    return item->common_data.flag;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_create
 * DESCRIPTION
 *  
 * PARAMETERS
 *  parent_gid          [IN]        
 *  inline_struct       [IN]        
 * RETURNS
 *  
 *****************************************************************************/
mmi_id cui_inline_create(mmi_id parent_gid, const cui_inline_struct *inline_struct)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
#ifdef INLINE_CUI_MEMORY_FROM_ASM
    return cui_inline_asm_create(parent_gid,inline_struct,NULL);
#else /*INLINE_CUI_MEMORY_FROM_ASM*/
    mmi_id inline_gid = 0;
    cui_inline_instance_struct *p_instance = NULL;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    p_instance = cui_inline_create_instance();
    MMI_ASSERT(p_instance != NULL);
    inline_gid = mmi_frm_group_create(parent_gid, GRP_ID_AUTO_GEN, cui_inline_proc_func, p_instance);
    MMI_ASSERT(inline_gid > 0);
    p_instance->parent_id = parent_gid;
    p_instance->gid = inline_gid;
    p_instance->inline_status = CUI_INLINE_STATUS_CREATE;
    MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_CUI_CREATE_GROUP, inline_gid, parent_gid);
    cui_inline_initialize_items(inline_gid, inline_struct);
    return inline_gid;
#endif    
}
#ifdef INLINE_CUI_MEMORY_FROM_ASM
mmi_id cui_inline_create_base(mmi_id parent_gid, const cui_inline_struct* inline_struct,mmi_id app_id,KAL_ADM_ID app_adm_id,U16* memory_p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    mmi_id inline_gid = 0;
    cui_inline_instance_struct *p_instance = NULL;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    p_instance = cui_inline_create_instance(app_id,app_adm_id,memory_p);
    MMI_ASSERT(p_instance != NULL);
    inline_gid = mmi_frm_group_create(parent_gid, GRP_ID_AUTO_GEN, cui_inline_proc_func, p_instance);
    MMI_ASSERT(inline_gid > 0);
    p_instance->parent_id = parent_gid;
    p_instance->gid = inline_gid;
    p_instance->inline_status = CUI_INLINE_STATUS_CREATE;
    MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_CUI_CREATE_GROUP, inline_gid, parent_gid);
    cui_inline_initialize_items(inline_gid, inline_struct);
    return inline_gid;
} 

mmi_id cui_inline_asm_create(mmi_id parent_gid, const cui_inline_struct* inline_struct,mmi_id app_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return cui_inline_create_base(parent_gid,inline_struct,app_id,NULL,NULL);
}


mmi_id cui_inline_adm_create(mmi_id parent_gid, const cui_inline_struct* inline_struct,KAL_ADM_ID app_adm_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return cui_inline_create_base(parent_gid,inline_struct,NULL,app_adm_id,NULL);
}

mmi_id cui_inline_mem_create(mmi_id parent_gid, const cui_inline_struct* inline_struct,U16* memory_point)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return cui_inline_create_base(parent_gid,inline_struct,NULL,NULL,memory_point);
}


#endif


/*****************************************************************************
 * FUNCTION
 *  cui_inline_entry_screen_ext
 * DESCRIPTION
 *  
 * PARAMETERS
 *  scrn_data       [?]     
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_entry_screen_ext(mmi_scrn_essential_struct *scrn_data)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U8 *guiBuffer;
    mmi_id inline_gid = 0;
    U16 *input_buffer = 0;
    S32 item_index = 0;
    cui_inline_instance_struct *p_instance = NULL;
    U16* list_of_icons = NULL;
    U16 i = 0;
    U16 screen_id = 0;
#ifdef __MMI_TOUCH_SCREEN__    
    void (*tap_callback_funtion)(mmi_tap_type_enum tap_type, S32 index) = NULL;
#endif /* __MMI_TOUCH_SCREEN__ */

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(scrn_data->group_id);
    MMI_ASSERT(p_instance != NULL);
    g_cui_inline_current_instance = p_instance;
    g_cui_inline_gid = inline_gid = scrn_data->group_id;

    if(p_instance->app_screen_id == 0)
    {
       screen_id = CUI_INLINE_MAIN_SCREEN_SCRN_ID;
    }
    else
    {
       screen_id= p_instance->app_screen_id; 
    }

    if (mmi_frm_scrn_enter
        (inline_gid, screen_id, cui_inline_exit_screen, (FuncPtr) cui_inline_entry_screen_ext,
         MMI_FRM_FULL_SCRN))
    {
        {
            cui_event_inline_common_struct evt;
            MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_MAIN_SCREEN_ACTIVE, p_instance->gid);
            mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
        }
    
#ifdef __MMI_TOUCH_SCREEN__ 
        tap_callback_funtion = MMI_fixed_list_menu.tap_callback_funtion;
#endif /* __MMI_TOUCH_SCREEN__ */
        if(p_instance->inline_status == CUI_INLINE_STATUS_CLOSE)
        {
            return ;
        }
        p_instance->current_screen_id = screen_id;
        
        MMI_TRACE(
            MMI_FW_TRC_G4_EDITOR,
            MMI_GUI_INLINE_CUI_ENTER_MAIN_SCREEN,
            inline_gid,
            p_instance->current_screen_id);
        
        guiBuffer = (PU8) mmi_frm_scrn_get_gui_buf(inline_gid, screen_id);

        InitializeCategory57Screen();
       
        RegisterHighlightHandler(cui_inline_highlight_handler);
        /* initialize data */
         
        cui_inline_lock_main_screen(inline_gid);

        cui_inline_set_screen_attributes(inline_gid, CUI_INLINE_SET_ATTRIBUTE, p_instance->screen_flag);
        for (item_index = 0; item_index < p_instance->item_count; item_index++)
        {
            cui_inline_set_item_to_pluto_inline(
                item_index,
                &(p_instance->cui_inline_items[item_index].common_data),
                &(p_instance->cui_inline_items[item_index].special_data));
        }

        input_buffer = mmi_frm_scrn_get_input_buf(inline_gid, screen_id);

        for(i = 0; i < p_instance->item_count; i++)
        {
            if(p_instance->list_of_icons[i] != 0)
            {
                list_of_icons = p_instance->list_of_icons;
                break;
            }
        }
#if 0        
#ifdef __MMI_INLINE_TOP_INFO_BOX__           
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif
#endif
        wgui_inline_set_parent_group(p_instance->gid);

        /* We Support char filter feature for Inline Slim now. */
        
        wgui_inline_set_char_filter(p_instance->highlight_item, p_instance->characters_list_is_allowed, p_instance->characters_list);
        
        RegisterInlineItemChangedNotification(cui_inline_evt_item_changed);
        
        if (p_instance->title_string)
        {
            ShowCategory57Screen_for_title(
                p_instance->title_string,
                p_instance->title_icon,
                0,
                0,
                0,
                0,
                p_instance->item_count,
                (U16*) list_of_icons,
                wgui_inline_items,
                p_instance->highlight_item,
                guiBuffer);
        }
        else
        {
            ShowCategory57Screen(
                p_instance->title,
                p_instance->title_icon,
                0,
                0,
                0,
                0,
                p_instance->item_count,
                (U16*) list_of_icons,
                wgui_inline_items,
                p_instance->highlight_item,
                guiBuffer);
        }
    }
    UI_UNUSED_PARAMETER(input_buffer);
#ifdef __MMI_TOUCH_SCREEN__ 
    wgui_inline_register_list_tap_callback(tap_callback_funtion);
#endif /* __MMI_TOUCH_SCREEN__ */
    p_instance->invalid_input_buffer = (MMI_BOOL)0;

    cui_inline_unlock_main_screen(inline_gid);
    {
	cui_event_inline_common_struct evt;
     	MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_MAIN_SCREEN_SHOWN, p_instance->gid);
        mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_run
 * DESCRIPTION
 *  
 * PARAMETERS
 *  inline_id       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_run(mmi_id inline_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_run_with_screen_id(inline_id, 0);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_run
 * DESCRIPTION
 *  
 * PARAMETERS
 *  inline_id       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_run_with_screen_id(mmi_id inline_id, U16 screen_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(inline_id);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    p_instance->app_screen_id = screen_id;  
    if(screen_id == 0)
    {
        screen_id = CUI_INLINE_MAIN_SCREEN_SCRN_ID;
    }
    mmi_frm_group_enter(inline_id, MMI_FRM_NODE_NONE_FLAG);
    mmi_frm_scrn_first_enter(
        inline_id,
        screen_id,
        (FuncPtr) cui_inline_entry_screen_ext,
        (void*)p_instance);
}



/*****************************************************************************
 * FUNCTION
 *  cui_inline_close
 * DESCRIPTION
 *  
 * PARAMETERS
 *  inline_gid      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_close(mmi_id inline_gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(inline_gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (p_instance != NULL)
    {
        /* Firstly, close group. This will call cui_inline_exit_screen() */
        mmi_frm_group_close(inline_gid);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_redraw_item
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_redraw_item(mmi_id gid, S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/

    if(cui_inline_main_screen_is_locked(gid))
    {
        return;
    }

    if(((wgui_inline_items[index].flags & 0xff) == INLINE_ITEM_TYPE_DISPLAY_ONLY) ||
       ((wgui_inline_items[index].flags & 0xff) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT) ||
	   ((wgui_inline_items[index].flags & 0xff) == INLINE_ITEM_TYPE_TEXT_EDIT) ||
	   ((wgui_inline_items[index].flags & 0xff) == INLINE_ITEM_TYPE_CAPTION))
    {
        MMI_fixed_icontext_menuitems[index].item_text = (UI_string_type)wgui_inline_items[index].text_p;    
	    MMI_fixed_icontext_menuitems[index].text_width = 0;
    }
    if(index != p_instance->highlight_item)
    {
        show_fixed_list_specified_item(index);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_redraw_screen
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_redraw_screen(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_event_inline_common_struct evt;
    cui_inline_instance_struct *p_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /*
     * if(cui_inline_is_edit_main_screen(p_instance->gid))
     * {
     * EntryNewScreen(SCR_ID_DUMMY, NULL, NULL, NULL);
     * GoBackHistory();
     * //  mmi_frm_display_dummy_screen();
     * // mmi_frm_scrn_close_active_id();
     * }
     */
    if(cui_inline_main_screen_is_locked(gid))
    {
        return;
    }
    if ((p_instance != NULL) && (cui_inline_is_edit_main_screen(p_instance->gid)) && (p_instance->is_drawing == 0) && (p_instance->draw_count == 0) )
    {
        MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_REDRAW, gid);
        mmi_frm_post_event((mmi_event_struct*) & evt, cui_inline_proc_func, p_instance);
        p_instance->draw_count++;
        MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_CUI_POST_REDRAW_SCREEN_EVT, gid, p_instance->draw_count++);
    }
    /* mmi_frm_group_post_to_parent(p_instance->gid, (mmi_group_event_struct*) &evt); */

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_caption
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 *  text_p      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_caption(mmi_id gid, U16 item_id, PU8 text_p)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_caption_struct *caption_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_CAPTION);
    caption_data = (cui_inline_caption_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_CAPTION);

    caption_data->text_p = text_p;

    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_CAPTION, common_data);

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        //cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) caption_data);
        cui_inline_reconfig_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) caption_data);
        cui_inline_redraw_item(gid, index);
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_displayonly
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 *  text_p      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_displayonly(mmi_id gid, U16 item_id, PU8 text_p, U16 default_text_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_display_only_struct *displayonly_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_DISPLAY_ONLY);

    displayonly_data = (cui_inline_display_only_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_DISPLAY_ONLY);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_DISPLAY_ONLY, common_data);

    displayonly_data->text_p = text_p;
    displayonly_data->default_text_id = default_text_id;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        //cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) displayonly_data);
        cui_inline_reconfig_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) displayonly_data);
        cui_inline_redraw_item(gid, index);
    }

}

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_multiline_read_only
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  item_id             [IN]        
 *  buffer              [IN]        
 *  height_of_item      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_multiline_read_only(mmi_id gid, U16 item_id, PU8 buffer, U8 height_of_item)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_multiline_read_only_struct *multiline_rdonly_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);

    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_MULTILINE_RD_ONLY);
    /* get instance pointer; */
    multiline_rdonly_data =
        (cui_inline_multiline_read_only_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    /* set instance value; */
    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_MULTILINE_RD_ONLY, common_data);
    /* It might request App to estimate buffer size, if buffer size is larger than max, App should pass global buffer. */
    #ifdef INLINE_CUI_MEMORY_FROM_ASM

    cui_inline_set_text_buffer(
            &(multiline_rdonly_data->buffer),
            buffer,
            &(multiline_rdonly_data->memory_mode),
            gui_strlen((UI_string_type) buffer) + 1,
            inline_instance);
    
    #else /*INLINE_CUI_MEMORY_FROM_ASM*/
    
    cui_inline_set_text_buffer(
        &(multiline_rdonly_data->buffer),
        buffer,
        &(multiline_rdonly_data->memory_mode),
        gui_strlen((UI_string_type) buffer) + 1);
    
    #endif /*INLINE_CUI_MEMORY_FROM_ASM*/
    multiline_rdonly_data->height_of_item = height_of_item;

    /* set inline value; */
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) multiline_rdonly_data);
        cui_inline_redraw_item(gid, index);
    }

}

#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */ 


#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_multiline_edit
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  buffer          [IN]        
 *  buffer_size     [IN]        
 *  input_type      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_multiline_edit(mmi_id gid, U16 item_id, PU8 buffer, S32 buffer_size, U32 input_type, U8 height_of_item)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_multiline_edit_struct *multiline_edit_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);

    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_MULTILINE_EDIT);

    /* get instance pointer; */
    multiline_edit_data =
        (cui_inline_multiline_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    /* set instance value; */
    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_MULTI_LINE_EDIT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_MULTILINE_EDIT, common_data);

    multiline_edit_data->buffer_size = buffer_size;
    multiline_edit_data->input_type = input_type;
    multiline_edit_data->ucs2_count = -1;
    multiline_edit_data->height_of_item = height_of_item;
    /* multiline_edit_data->default_text_id = default_text_id; */

#ifdef INLINE_CUI_MEMORY_FROM_ASM

    cui_inline_set_text_buffer(
        &(multiline_edit_data->buffer),
        buffer,
        &(multiline_edit_data->memory_mode),
        buffer_size,
        inline_instance);
    
#else /*INLINE_CUI_MEMORY_FROM_ASM*/

    cui_inline_set_text_buffer(
        &(multiline_edit_data->buffer),
        buffer,
        &(multiline_edit_data->memory_mode),
        buffer_size);
#endif
    /* set inline value; */
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) multiline_edit_data);
        cui_inline_redraw_item(gid, index);
    }

}

#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */ 


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_text_edit
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                         [IN]        
 *  item_id                     [IN]        
 *  buffer                      [IN]        
 *  buffer_size                 [IN]        
 *  input_type                  [IN]        
 *  input_extended_type         [IN]        
 *  required_input_mode_set     [?]         
 *  default_text_id             [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_text_edit(
        mmi_id gid,
        U16 item_id,
        PU8 buffer,
        S32 buffer_size,
        U32 input_type,
        S16 input_extended_type,
        mmi_imm_input_mode_enum *required_input_mode_set,
        U16 default_text_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_fullscreen_edit_struct *text_edit_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_TEXT_EDIT);

    /* get instance pointer; */
    text_edit_data = (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    /* set instance value; */
    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_TEXT_EDIT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_TEXT_EDIT, common_data);

    text_edit_data->buffer_size = buffer_size;
    text_edit_data->input_type = input_type;
	text_edit_data->input_ext_type = input_extended_type;
	text_edit_data->required_input_mode_set = required_input_mode_set;
    text_edit_data->ucs2_count = -1;
    text_edit_data->default_text_id = default_text_id;
#ifdef INLINE_CUI_MEMORY_FROM_ASM
    
        cui_inline_set_text_buffer(&(text_edit_data->buffer), buffer,
                    &(text_edit_data->memory_mode), buffer_size,inline_instance);
        
#else /*INLINE_CUI_MEMORY_FROM_ASM*/
    
    cui_inline_set_text_buffer(&(text_edit_data->buffer), buffer, &(text_edit_data->memory_mode), buffer_size);

#endif
    /* set inline value; */
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
       // cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) text_edit_data);
       cui_inline_reconfig_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) text_edit_data);
        cui_inline_redraw_item(gid, index);
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_fullscreen_edit
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  item_id             [IN]        
 *  fullscreen_attr     [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_fullscreen_edit(
        mmi_id gid,
        U16 item_id,
        cui_inline_set_item_fullscreen_edit_struct *fullscreen_attr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_fullscreen_edit_struct *fullscreen_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_FULLSCREEN_EDIT);
    /* get instance pointer; */
    fullscreen_data = (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    /* set instance value; */
    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_FULL_SCREEN_EDIT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_FULLSCREEN_EDIT, common_data);

    fullscreen_data->buffer_size = fullscreen_attr->buffer_size;
    fullscreen_data->input_type = fullscreen_attr->input_type;
    fullscreen_data->input_ext_type = fullscreen_attr->input_extended_type;
    fullscreen_data->title = fullscreen_attr->title;
    fullscreen_data->title_icon = fullscreen_attr->title_icon;
    fullscreen_attr->required_input_mode_set = fullscreen_attr->required_input_mode_set;
    fullscreen_data->ucs2_count = -1;
    fullscreen_data->default_text_id = fullscreen_attr->default_text_id;

#ifdef INLINE_CUI_MEMORY_FROM_ASM
        
            cui_inline_set_text_buffer(
                &(fullscreen_data->buffer),
                fullscreen_attr->buffer,
                &(fullscreen_data->memory_mode),
                fullscreen_attr->buffer_size,
                inline_instance);
            
#else /*INLINE_CUI_MEMORY_FROM_ASM*/

    cui_inline_set_text_buffer(
        &(fullscreen_data->buffer),
        fullscreen_attr->buffer,
        &(fullscreen_data->memory_mode),
        fullscreen_attr->buffer_size);
#endif

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        //cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) fullscreen_data);
        cui_inline_reconfig_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) fullscreen_data);
        cui_inline_redraw_item(gid, index);
    }
}
#if 0
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#ifdef INLINE_CUI_MEMORY_FROM_ASM
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#else /*INLINE_CUI_MEMORY_FROM_ASM*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */ 
#endif

#if defined(__MMI_INLINE_ITEM_DATE__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_date
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  date_attr       [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_date(mmi_id gid, U16 item_id, cui_inline_set_item_date_time_struct *date_attr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_date_struct *date_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);

    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_DATE);

    /* get instance pointer; */
    date_data = (cui_inline_date_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_DATE);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_DATE, common_data);

    if (date_data->date_data != NULL)
    {
        cui_inline_free_date_time_buffer((void*)date_data->date_data);
    }
    date_data->date_data = cui_inline_malloc_time_date_buffer();
    MMI_ASSERT(date_data->date_data != NULL);
    {
        kal_wsprintf((kal_wchar*)date_data->date_data->day_buffer, "%02d", date_attr->day);
        kal_wsprintf((kal_wchar*)date_data->date_data->month_buffer, "%02d", date_attr->month);
        kal_wsprintf((kal_wchar*)date_data->date_data->year_buffer, "%02d", date_attr->year);
    }
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
       // cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) date_data);
        cui_inline_reconfig_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) date_data);
        cui_inline_redraw_item(gid, index);
    }

}

#endif


#if defined(__MMI_INLINE_ITEM_TIME__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_time
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  time_attr       [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_time(mmi_id gid, U16 item_id, cui_inline_set_item_time_struct *time_attr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_time_struct *time_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_TIME);

    /* get instance pointer; */
    time_data = (cui_inline_time_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_TIME);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_TIME, common_data);

    if (time_data->time_data != NULL)
    {
        cui_inline_free_date_time_buffer((void*)time_data->time_data);
    }
    time_data->time_data = cui_inline_malloc_time_date_buffer();
    MMI_ASSERT(time_data->time_data != NULL);
    {
        kal_wsprintf((kal_wchar*)time_data->time_data->hour_buffer, "%02d", time_attr->date_time.hour);
        kal_wsprintf((kal_wchar*)time_data->time_data->minute_buffer, "%02d", time_attr->date_time.minute);
        kal_wsprintf((kal_wchar*)time_data->time_data->second_buffer, "%02d", time_attr->date_time.second);
        time_data->time_data->am_pm_flag = time_attr->date_format;
    }
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        //cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) time_data);
        cui_inline_reconfig_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) time_data);
        cui_inline_redraw_item(gid, index);
    }

}

#endif

#if 0
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */ 
#endif

#if defined(__MMI_INLINE_ITEM_IP4__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_ip4
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  ip4_attr        [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_ip4(mmi_id gid, U16 item_id, cui_inline_set_item_ip4_struct *ip4_attr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_ip4_struct *ip4_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_IP4);

    /* get instance pointer; */
    ip4_data = (cui_inline_ip4_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    if (ip4_data->ip4_data != NULL)
    {
        cui_inline_free_ip4_buffer((void*)ip4_data->ip4_data);
    }
    ip4_data->ip4_data = (cui_inline_ip4_data_struct*) cui_inline_malloc_ip4_buffer();
    MMI_ASSERT(ip4_data->ip4_data != NULL);
    {
        cui_inline_ip4_print_3digit((PU8)ip4_data->ip4_data->b1, ip4_attr->b1);
        cui_inline_ip4_print_3digit((PU8)ip4_data->ip4_data->b2, ip4_attr->b2);
        cui_inline_ip4_print_3digit((PU8)ip4_data->ip4_data->b3, ip4_attr->b3);
        cui_inline_ip4_print_3digit((PU8)ip4_data->ip4_data->b4, ip4_attr->b4);
    }
    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_IP4_EDIT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_IP4, common_data);

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
       // cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) ip4_data);
        cui_inline_reconfig_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) ip4_data);
        cui_inline_redraw_item(gid, index);
    }

}

#endif

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_select
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                     [IN]        
 *  item_id                 [IN]        
 *  n_items                 [IN]        
 *  list_of_items           [?]         
 *  highlighted_item        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_item_select(mmi_id gid, U16 item_id, S32 n_items, PU8 *list_of_items, U8 highlighted_item)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_select_struct *select_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;
    int i = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_SELECT);

    if((index == CUI_INLINE_INVALID_ID) || (inline_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }

    /* get instance pointer; */
    select_data = (cui_inline_select_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_SELECT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_SELECT, common_data);
    select_data->n_items = n_items;
    
    if(select_data->n_items > CUI_INLINE_SELECT_CONTENT_COUNT)
    {
        /* If n_items > 20,  list_of_items priority is large than string_id_list_ptr */
        if(list_of_items != NULL) 
        {
            /* If n_items > 20, we assume  list_of_items is global list. */
            select_data->string_ptr = list_of_items;
            select_data->string_id_list_ptr = NULL;
            select_data->string_flag = 1;
        }
        else if(select_data->string_id_list_ptr != NULL)
        {
            select_data->string_ptr = NULL;
            select_data->string_flag = 0;
        }
    }
    else
    {
        if(list_of_items != NULL)
        {
    for (i = 0; i < n_items; i++)
    {
        select_data->list_of_strings[i] = list_of_items[i];
    }
        }
        select_data->string_ptr = NULL;
        select_data->string_flag = 2;
    }

    select_data->highlight_index = highlighted_item;
	select_data->highlight_index_backup = highlighted_item;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) select_data);
        /* Because this function is extern to App, so we remove redraw item to avoid App call this
        function for highlight item, because it will redraw nothing for highlight item.
        */
        cui_inline_redraw_item(gid, index);
    }

    return 1;

}



/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_select_with_string_id
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                     [IN]        
 *  item_id                 [IN]        
 *  n_items                 [IN]        
 *  list_of_items           [?]         
 *  highlighted_item        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_item_select_with_string_id(mmi_id gid, U16 item_id, S32 n_items, U16 *list_of_string_id, U8 highlighted_item)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_select_struct *select_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;
    int i = 0;
    U8 *temp_select_string[CUI_INLINE_SELECT_CONTENT_COUNT] = {0};

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    if((index == CUI_INLINE_INVALID_ID) || (inline_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }

    /* get instance pointer; */
    select_data = (cui_inline_select_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    if(n_items > CUI_INLINE_SELECT_CONTENT_COUNT)
    {
        /* If n_items > 20, we assume that list_of_string_id is not NULL. */
        select_data->string_id_list_ptr = list_of_string_id;
        cui_inline_set_item_select(gid, item_id, n_items, NULL, highlighted_item);
    }
    else 
    {
        if(list_of_string_id != NULL)
        {
            for (i = 0; i < n_items; i++)
            {
                temp_select_string[i] = (PU8) GetString(list_of_string_id[i]);
            }
        }
        cui_inline_set_item_select(gid, item_id, n_items, temp_select_string, highlighted_item);
    }
    UI_UNUSED_PARAMETER(common_data);
    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_select
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                     [IN]        
 *  item_id                 [IN]        
 *  n_items                 [IN]        
 *  list_of_items           [?]         
 *  highlighted_item        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL cui_inline_selector_is_set_by_string_id(cui_inline_select_struct *select_data)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(select_data->n_items > CUI_INLINE_SELECT_CONTENT_COUNT)
    {
        if(select_data->string_ptr != NULL)
        {
            return MMI_FALSE;
        }
        else if(select_data->string_id_list_ptr != NULL)
        {
            return MMI_TRUE;
        }
        return MMI_FALSE;  /* If both of them is NULL, We will use string pointer function */
    }
    else
    {
        return MMI_FALSE;
    }
}



#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_color_select
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                     [IN]        
 *  item_id                 [IN]        
 *  n_color                 [IN]        
 *  highlighted_index       [IN]        
 *  list_of_color           [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_color_select(mmi_id gid, U16 item_id, S32 n_color, U8 highlighted_index, const color *list_of_color)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_color_select_struct *select_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_COLOR_SELECT);

    /* get instance pointer; */
    select_data = (cui_inline_color_select_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_COLOR_SELECT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_COLOR_SELECT, common_data);
    select_data->n_color = n_color;
    select_data->highlight_index = highlighted_index;
    select_data->list_of_color = (color *)list_of_color;
    select_data->start_index = 255;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) select_data);
        cui_inline_redraw_item(gid, index);
    }
    else
    {
        inline_instance->invalid_input_buffer = (MMI_BOOL)1;
    }

}

#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */ 


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_user_defined_select
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_user_defined_select(mmi_id gid, U16 item_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_user_defined_select_struct *select_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_USER_DEFINED_SELECT);

    /* get instance pointer; */
    select_data = (cui_inline_user_defined_select_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_USER_DEFINED_SELECT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_USER_DEFINED_SELECT, common_data);

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) select_data);
        cui_inline_redraw_item(gid, index);
    }

}

#if defined(__MMI_INLINE_ITEM_DOW__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_dow_select
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  item_id             [IN]        
 *  list_of_states      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_dow_select(mmi_id gid, U16 item_id, PU8 list_of_states)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_dow_struct *select_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_DOW);

    /* get instance pointer; */
    select_data = (cui_inline_dow_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_DOW_SELECT);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_DOW, common_data);
    select_data->list_of_status = list_of_states;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) select_data);
        cui_inline_redraw_item(gid, index);
    }

}

#endif


#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_progress_bar_value
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  item_id             [IN]        
 *  list_of_states      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_progress_bar_value(mmi_id gid, U16 item_id, U16 value)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_progress_bar_struct *progress_bar_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/ 
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    if(inline_instance != NULL)
    {
        index = cui_inline_convert_id_to_index(gid, item_id);
        if(index != CUI_INLINE_INVALID_ID)
        {
            common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);
            progress_bar_data = (cui_inline_progress_bar_struct*) & (inline_instance->cui_inline_items[index].special_data);
            if((common_data->flag & 0xff) == INLINE_ITEM_TYPE_PROGRESS_BAR)
            {
                progress_bar_data->value = value;
            }
            if (cui_inline_is_edit_main_screen(inline_instance->gid))
            {
                wgui_inline_item_progress_bar* i = (wgui_inline_item_progress_bar*)(wgui_inline_items[index].item);
                wgui_progress_bar_set_value(&(i->pbar), value);

                if(index != inline_instance->highlight_item)
                {
                    cui_inline_redraw_item(gid, index);
                }
                else
                {
                    redraw_current_inline_item();
                }
            } 
        }

    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_progress_bar
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  item_id             [IN]        
 *  list_of_states      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_progress_bar(mmi_id gid, U16 item_id, cui_inline_set_item_progress_bar_struct *cui_data)
{
   /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_progress_bar_struct *progress_bar_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/ 
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_CUI_SET_ITEM_FUNCTION,
        gid,
        inline_instance->current_screen_id,
        index,
        item_id,
        CUI_INLINE_ITEM_TYPE_DOW);
    
    progress_bar_data = (cui_inline_progress_bar_struct*) & (inline_instance->cui_inline_items[index].special_data);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    cui_inline_set_item_type(common_data, INLINE_ITEM_TYPE_PROGRESS_BAR);
    cui_inline_set_item_default_activation(CUI_INLINE_ITEM_TYPE_PROGRESS_BAR, common_data);
    progress_bar_data->max_value = cui_data->max_value;
    progress_bar_data->step_size = cui_data->step_size;
    progress_bar_data->value = cui_data->value;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_set_item_to_pluto_inline(index, common_data, (cui_inline_item_data_union*) progress_bar_data);
        cui_inline_redraw_item(gid, index);
    }
}

#endif


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_softkey_text
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  key             [IN]        
 *  string_id       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_softkey_text(mmi_id gid, U16 item_id, WGUI_SOFTKEY_ENUM key, U16 string_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 index;
    cui_inline_item_softkey_struct *p_softkey = NULL;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);
    
    if((index == CUI_INLINE_INVALID_ID) || (inline_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }
    
    p_softkey = &(inline_instance->cui_inline_items_softkey[index]);
    p_softkey->softkey[key].string_id = string_id;

    if ((cui_inline_is_edit_main_screen(inline_instance->gid)) &&
        (item_id == inline_instance->highlight_item_id))
    {
        set_softkey_label((UI_string_type) get_string(p_softkey->softkey[key].string_id), key);
        cui_inline_draw_softkey(key);
    }

    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_softkey_icon
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  item_id         [IN]        
 *  key             [IN]        
 *  image_id        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_softkey_icon(mmi_id gid, U16 item_id, WGUI_SOFTKEY_ENUM key, U16 image_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_item_softkey_struct *p_softkey = NULL;
    S32 index;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    index = cui_inline_convert_id_to_index(gid, item_id);

    if((index == CUI_INLINE_INVALID_ID) || (inline_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }

    /* In Slim Project, these items use CSK to execute themselves command. */
    if(((inline_instance->cui_inline_items[index].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT)||
       ((inline_instance->cui_inline_items[index].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT) ||
       ((inline_instance->cui_inline_items[index].common_data.flag & 0xFF) == INLINE_ITEM_TYPE_SELECT)
      )
    {
        return 1;
    }
    
    p_softkey = &(inline_instance->cui_inline_items_softkey[index]);
    p_softkey->softkey[key].image_id = image_id;

    if ((cui_inline_is_edit_main_screen(inline_instance->gid)) &&
        (item_id == inline_instance->highlight_item_id))
    {
        set_softkey_icon((PU8) GetImage(p_softkey->softkey[key].image_id), key);
        cui_inline_draw_softkey(key);
    }

    return 1;

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_all_items_softkey_text
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  key             [IN]        
 *  string_id       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_all_items_softkey_text(mmi_id gid, WGUI_SOFTKEY_ENUM key, U16 string_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_item_softkey_struct *p_softkey = NULL;
    U8 index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    for (index = 0; index < inline_instance->item_count; index++)
    {
        p_softkey = &(inline_instance->cui_inline_items_softkey[index]);
        p_softkey->softkey[key].string_id = string_id;
    }

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        set_softkey_label((UI_string_type) get_string(string_id), key);
        cui_inline_draw_softkey(key);
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_all_items_softkey_icon
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  key             [IN]        
 *  image_id        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_all_items_softkey_icon(mmi_id gid, WGUI_SOFTKEY_ENUM key, U16 image_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_item_softkey_struct *p_softkey = NULL;
    int index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    for (index = 0; index < CUI_INLINE_MAX_ITEM_COUNT; index++)
    {
        p_softkey = &(inline_instance->cui_inline_items_softkey[index]);
        p_softkey->softkey[key].image_id = image_id;
    }

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        set_softkey_icon((PU8) GetImage(image_id), key);
        cui_inline_draw_softkey(key);
    }

}

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_fullscreen_edit_title_icon
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  string_id       [IN]        
 *  image_id        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
 void cui_inline_set_fullscreen_edit_title_icon(mmi_id gid, U16 item_id, U16 icon)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 index = 0;
    cui_inline_fullscreen_edit_struct *fullscreen_data = NULL;
    cui_inline_item_common_data_struct *common_data = NULL;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(inline_instance != NULL)  
    {
        index = cui_inline_convert_id_to_index(gid, item_id);
        common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);
        if((common_data->flag & 0xFF) == INLINE_ITEM_TYPE_FULL_SCREEN_EDIT)
        {
            fullscreen_data = (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            fullscreen_data->title_icon = icon;
        }     
    }
}



/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_title
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  string_id       [IN]        
 *  image_id        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_title(mmi_id gid, U16 string_id, U16 image_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_ASSERT(inline_instance != NULL);
    inline_instance->title = string_id;
    inline_instance->title_icon = image_id;

    /* Change title only when Inline CUI screen is valid */
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        wgui_title_change(
            inline_instance->title_icon,
            0,
            (PU8) get_string(inline_instance->title),
            WGUI_TITLE_CHANGE_ICON | WGUI_TITLE_CHANGE_TEXT);
        wgui_title_show(GUI_TITLE_PART_ALL);
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_title_string
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid     [IN]        
 *  s       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_title_string(mmi_id gid, UI_string_type s)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_ASSERT(inline_instance != NULL);
    inline_instance->title_string = (PU8) s;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        wgui_title_change(
            inline_instance->title_icon,
            0,
            (PU8) inline_instance->title_string,
            WGUI_TITLE_CHANGE_ICON | WGUI_TITLE_CHANGE_TEXT);
        wgui_title_show(GUI_TITLE_PART_ALL);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_title_string_with_string_id
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid     [IN]        
 *  s       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_title_string_with_string_id(mmi_id gid, U16 string_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_set_title_string(gid, (UI_string_type)GetString(string_id));
}




/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_title_icon
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  icon        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_title_icon(mmi_id gid, U16 icon)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_ASSERT(inline_instance != NULL);
    inline_instance->title_icon = icon;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        wgui_title_change(
            inline_instance->title_icon,
            0,
            (PU8) inline_instance->title_string,
            WGUI_TITLE_CHANGE_ICON | WGUI_TITLE_CHANGE_TEXT);
        wgui_title_show(GUI_TITLE_PART_ALL);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_characters_filter
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  is_allowed          [IN]        
 *  characters_list     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_characters_filter(mmi_id gid, MMI_BOOL is_allowed, const UI_character_type *characters_list)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid); 
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    inline_instance->characters_list_is_allowed = is_allowed;
    inline_instance->characters_list = characters_list;

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        wgui_inline_set_char_filter(inline_instance->highlight_item, is_allowed, characters_list);
    }
}

#ifdef __MMI_TOUCH_SCREEN__


/*****************************************************************************
 * FUNCTION
 *  cui_inline_disable_handwriting
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_disable_handwriting(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    /* cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid); */

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    mmi_imc_disable_handwriting();
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_imm_events
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                         [IN]        
 *  is_allowed                  [IN]        
 *  disable_event_keys_list     [IN]        
 * RETURNS
 *  
 *****************************************************************************/
mmi_imm_message_id_enum cui_inline_set_imm_events(
                            mmi_id gid,
                            MMI_BOOL is_allowed,
                            const gui_virtual_keyboard_pen_enum *disable_event_keys_list)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    /* cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid); */
    mmi_imm_message_id_enum result;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    result = mmi_imm_set_events(is_allowed, disable_event_keys_list);
    return result;
}

#endif /* __MMI_TOUCH_SCREEN__ */ 


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_value
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 *  value       [?]         
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_value(mmi_id gid, U16 item_id, void *value)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);

    if((index == CUI_INLINE_INVALID_ID) || (inline_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }
    
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        if ((index == inline_instance->highlight_item) &&
            ((common_data->flag & 0xff) != INLINE_ITEM_TYPE_PROGRESS_BAR)
           )
        {
            return CUI_INLINE_RETURN_ERROR;
        }
    }
    /* Can set value in status: Active(but not equal to highlight item), Inactive, Create. */
    switch (common_data->flag & 0xff)
    {
        case INLINE_ITEM_TYPE_CAPTION:
        {
            cui_inline_set_item_caption(gid, item_id, (U8*) value);
            break;
        }
        case INLINE_ITEM_TYPE_DISPLAY_ONLY:
        {
            cui_inline_display_only_struct *displayonly_data =
                (cui_inline_display_only_struct*) & (inline_instance->cui_inline_items[index].special_data);
            cui_inline_set_item_displayonly(gid, item_id, (U8*) value, displayonly_data->default_text_id);
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY:
        {
            cui_inline_multiline_read_only_struct *multiline_rdonly_data =
                (cui_inline_multiline_read_only_struct*) & (inline_instance->cui_inline_items[index].special_data);
            cui_inline_set_item_multiline_read_only(gid, item_id, (U8*) value, multiline_rdonly_data->height_of_item);
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */ 

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
        {
            cui_inline_multiline_edit_struct *item_data =
                (cui_inline_multiline_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            cui_inline_set_item_multiline_edit(
                gid,
                item_id,
                (U8*) value,
                item_data->buffer_size,
                item_data->input_type,
                item_data->height_of_item);
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */         
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            cui_inline_fullscreen_edit_struct *fullscreen_data =
                (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            cui_inline_set_item_fullscreen_edit_struct item_data;

            item_data.buffer_size = fullscreen_data->buffer_size;
            item_data.input_extended_type = fullscreen_data->input_ext_type;
            item_data.input_type = fullscreen_data->input_type;
            item_data.title = fullscreen_data->title;
            item_data.title_icon = fullscreen_data->title_icon;
            item_data.required_input_mode_set = fullscreen_data->required_input_mode_set;
            item_data.buffer = (U8*) value;
            item_data.default_text_id = fullscreen_data->default_text_id;
            cui_inline_set_item_fullscreen_edit(gid, item_id, &item_data);
            break;
        }
#if 0
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */ 
#endif
        case INLINE_ITEM_TYPE_DATE:
        {
#if defined(__MMI_INLINE_ITEM_DATE__)            
            cui_inline_set_item_date(gid, item_id, (cui_inline_set_item_date_time_struct*) value);
#endif
            break;
        }
        case INLINE_ITEM_TYPE_TIME:
        {
#if defined(__MMI_INLINE_ITEM_TIME__)             
            cui_inline_set_item_time(gid, item_id, (cui_inline_set_item_time_struct*) value);
#endif
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif     
#endif     

#if defined(__MMI_INLINE_ITEM_IP4__)
        case INLINE_ITEM_TYPE_IP4_EDIT:
        {
            
            cui_inline_set_item_ip4(gid, item_id, (cui_inline_set_item_ip4_struct*) value);
            break;
        }
#endif        
        case INLINE_ITEM_TYPE_SELECT:
        {
            cui_inline_select_struct *select_data =
                (cui_inline_select_struct*) & (inline_instance->cui_inline_items[index].special_data);

            if(cui_inline_selector_is_set_by_string_id(select_data))
            {
                cui_inline_set_item_select_with_string_id(
                    gid,
                    item_id,
                    select_data->n_items,
                    (U16 *) select_data->string_id_list_ptr,
                    (U8) ((U32) value));
            }
            else
            {
            cui_inline_set_item_select(
                gid,
                item_id,
                select_data->n_items,
                (PU8*) select_data->list_of_strings,
                (U8) ((U32) value));
            }

            break;
        }

#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)        
        case INLINE_ITEM_TYPE_COLOR_SELECT:
        {
            cui_inline_color_select_struct *select_data =
                (cui_inline_color_select_struct*) & (inline_instance->cui_inline_items[index].special_data);;
            cui_inline_set_item_color_select(
                gid,
                item_id,
                select_data->n_color,
                (U8) ((U32) value),
                select_data->list_of_color);
        }
#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */         
        case INLINE_ITEM_TYPE_USER_DEFINED_SELECT:
        {
            break;
        }
        
#if defined(__MMI_INLINE_ITEM_DOW__)        
        case INLINE_ITEM_TYPE_DOW_SELECT:
        {            
            cui_inline_set_item_dow_select(gid, item_id, (PU8) value);
            break;
        }
#endif   

#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)
        case INLINE_ITEM_TYPE_PROGRESS_BAR:
        {            
            cui_inline_set_item_progress_bar_value(gid, item_id, (U16) ((U32)value));
            break;
        }
#endif        
    }
    /* Abandon setting item's history buffer. */
    if (inline_instance->current_screen_id != CUI_INLINE_MAIN_SCREEN_SCRN_ID)
    {
        if (inline_instance->history_item_id == item_id)
        {
            inline_instance->history_item_id = CUI_INLINE_INVALID_ID;
        }
    }
    else
    {
       // cui_inline_redraw_screen(gid);
    }

    return 1;

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_value
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 *  value       [?]         
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_get_value(mmi_id gid, U16 item_id, void *value)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 index = 0;
    cui_inline_item_common_data_struct *common_data = NULL;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);

    if((index == CUI_INLINE_INVALID_ID) || (inline_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }
    
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    switch (common_data->flag & 0xff)
    {
        case INLINE_ITEM_TYPE_CAPTION:
        {
            U16 *return_buf = (U16*) value;
            cui_inline_caption_struct *item_data =
                (cui_inline_caption_struct*) & (inline_instance->cui_inline_items[index].special_data);
            mmi_ucs2cpy((S8*) return_buf, (S8*) item_data->text_p);
            break;
        }
        case INLINE_ITEM_TYPE_DISPLAY_ONLY:
        {
            U16 *return_buf = (U16*) value;
            cui_inline_display_only_struct *item_data =
                (cui_inline_display_only_struct*) & (inline_instance->cui_inline_items[index].special_data);
            mmi_ucs2cpy((S8*) return_buf, (S8*) item_data->text_p);
            break;
        }
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
        case INLINE_ITEM_TYPE_MULTI_LINE_RD_ONLY:
        {
            U16 *return_buf = (U16*) value;
            cui_inline_multiline_read_only_struct *multiline_rdonly_data =
                (cui_inline_multiline_read_only_struct*) & (inline_instance->cui_inline_items[index].special_data);
            mmi_ucs2cpy((S8*) return_buf, (S8*) (multiline_rdonly_data->buffer));
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */ 

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
        {
            U16 *return_buf = (U16*) value;
            cui_inline_multiline_edit_struct *item_data =
                (cui_inline_multiline_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            mmi_ucs2cpy((S8*) return_buf, (S8*) (item_data->buffer));
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */

        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            U16 *return_buf = (U16*) value;
            cui_inline_fullscreen_edit_struct *fullscreen_data =
                (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            mmi_ucs2cpy((S8*) return_buf, (S8*) (fullscreen_data->buffer));
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */   
#endif
        case INLINE_ITEM_TYPE_DATE:
        {
#if defined(__MMI_INLINE_ITEM_DATE__)             
            cui_inline_item_date_time_struct *return_buf = (cui_inline_item_date_time_struct*) value;
            cui_inline_date_struct *item_data =
                (cui_inline_date_struct*) & (inline_instance->cui_inline_items[index].special_data);
            return_buf->day = app_ucs2_wtoi(item_data->date_data->day_buffer);
            return_buf->year = app_ucs2_wtoi(item_data->date_data->year_buffer);
            return_buf->month = app_ucs2_wtoi(item_data->date_data->month_buffer);
#endif            
            break;
        }
        case INLINE_ITEM_TYPE_TIME:
        {
#if defined(__MMI_INLINE_ITEM_TIME__)             
            cui_inline_item_time_struct *return_buf = (cui_inline_item_time_struct*) value;
            cui_inline_time_struct *item_data =
                (cui_inline_time_struct*) & (inline_instance->cui_inline_items[index].special_data);
            return_buf->date_time.hour = app_ucs2_wtoi(item_data->time_data->hour_buffer);
            return_buf->date_time.minute = app_ucs2_wtoi(item_data->time_data->minute_buffer);
            return_buf->date_format = item_data->time_data->am_pm_flag;
#endif            
            break;
        }
#if 0        
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */  
#endif

#if defined(__MMI_INLINE_ITEM_IP4__)
        case INLINE_ITEM_TYPE_IP4_EDIT:
        {            
            cui_inline_item_ip4_struct *return_buf = (cui_inline_item_ip4_struct*) value;
            cui_inline_ip4_struct *item_data =
                (cui_inline_ip4_struct*) & (inline_instance->cui_inline_items[index].special_data);
            return_buf->b1 = app_ucs2_wtoi(item_data->ip4_data->b1);
            return_buf->b2 = app_ucs2_wtoi(item_data->ip4_data->b2);
            return_buf->b3 = app_ucs2_wtoi(item_data->ip4_data->b3);
            return_buf->b4 = app_ucs2_wtoi(item_data->ip4_data->b4);
            
            break;
        }
#endif        
        case INLINE_ITEM_TYPE_SELECT:
        {
            U8 *return_buf = (U8*) value;
            cui_inline_select_struct *select_data =
                (cui_inline_select_struct*) & (inline_instance->cui_inline_items[index].special_data);
            *return_buf = (select_data->highlight_index);
            break;
        }

#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)        
        case INLINE_ITEM_TYPE_COLOR_SELECT:
        {
            U8 *return_buf = (U8*) value;
            cui_inline_color_select_struct *select_data =
                (cui_inline_color_select_struct*) & (inline_instance->cui_inline_items[index].special_data);
            *return_buf = (select_data->highlight_index);
            break;
        }
#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */         
        case INLINE_ITEM_TYPE_USER_DEFINED_SELECT:
        {
            return CUI_INLINE_RETURN_ERROR;
            
        }

#if defined(__MMI_INLINE_ITEM_DOW__)        
        case INLINE_ITEM_TYPE_DOW_SELECT:
        {            
            U8 *return_buf = (U8*) value;
            cui_inline_dow_struct *select_data =
                (cui_inline_dow_struct*) & (inline_instance->cui_inline_items[index].special_data);
            if(inline_instance->highlight_item_id == item_id)
            {
                U8 i = 0;
                for (i = 0; i < 7; i++)
                {
                    select_data->list_of_status[i] = MMI_inline_DOW_select.states[i];
                }
            }
            memcpy(return_buf, select_data->list_of_status, sizeof(U8) * 7);            
            break;
        }
#endif   

#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)
        case INLINE_ITEM_TYPE_PROGRESS_BAR:
        {            
            U16 *return_buf = (U16*) value;
            cui_inline_progress_bar_struct *progress_bar = 
                (cui_inline_progress_bar_struct*) & (inline_instance->cui_inline_items[index].special_data);
            memcpy((U8 *)return_buf, (U8 *)&(progress_bar->value), sizeof(progress_bar->value)); 

            break;
        }
#endif        
    }

    return 1;

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_text_len
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 *  len         [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_text_len(mmi_id gid, U16 item_id, U32 len)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 index = 0;
    cui_inline_item_common_data_struct *common_data =
        (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);


    if((index == CUI_INLINE_INVALID_ID) || (inline_instance == NULL))
    {
        return CUI_INLINE_RETURN_ERROR;
    }
    
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        if (index == inline_instance->highlight_item)
        {
            return CUI_INLINE_RETURN_ERROR;
        }
    }
    switch (common_data->flag & 0xff)
    {
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
        {
            cui_inline_multiline_edit_struct *item_data =
                (cui_inline_multiline_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            if ((len * 2) > (CUI_INLINE_TEXT_BUFFER_SIZE))
            {
                cui_inline_set_item_multiline_edit(gid, item_id, NULL, len, item_data->input_type, item_data->height_of_item);
            }
            else
            {
                cui_inline_set_item_multiline_edit(gid, item_id, item_data->buffer, len, item_data->input_type, item_data->height_of_item);
            }
            break;
        }
#endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */         
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            cui_inline_fullscreen_edit_struct *fullscreen_data =
                (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            cui_inline_set_item_fullscreen_edit_struct item_data;

            item_data.buffer_size = len;
            item_data.input_extended_type = fullscreen_data->input_ext_type;
            item_data.input_type = fullscreen_data->input_type;
            item_data.title = fullscreen_data->title;
            item_data.title_icon = fullscreen_data->title_icon;
            item_data.required_input_mode_set = fullscreen_data->required_input_mode_set;
            item_data.default_text_id = fullscreen_data->default_text_id;
             /* if old len < 256 && new len > 256, we must request App to pass buffer,
               or pass NULL will lead to Fatal error. */
            if ((len * 2) > (CUI_INLINE_TEXT_BUFFER_SIZE))
            {
                item_data.buffer = fullscreen_data->buffer;
            }
            else
            {
                item_data.buffer = NULL;
            }
            cui_inline_set_item_fullscreen_edit(gid, item_id, &item_data);
            break;
        }
#if 0
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)        
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */        
#endif
        default:
        {
            MMI_ASSERT(0);
        }
    }
    if (inline_instance->current_screen_id != CUI_INLINE_MAIN_SCREEN_SCRN_ID)
    {
        if (inline_instance->history_item_id == item_id)
        {
            inline_instance->history_item_id = CUI_INLINE_INVALID_ID;
        }
    }
    else
    {
        cui_inline_redraw_screen(gid);
    }

    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_text_len
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 * RETURNS
 *  
 *****************************************************************************/
U32 cui_inline_get_text_len(mmi_id gid, U16 item_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 index = 0;
    cui_inline_item_common_data_struct *common_data =
        (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);

    switch (common_data->flag & 0xff)
    {
    #if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
        {
            cui_inline_multiline_edit_struct *item_data =
                (cui_inline_multiline_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            return item_data->buffer_size;
            
        }
    #endif /* defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__) */ 
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            cui_inline_fullscreen_edit_struct *fullscreen_data =
                (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            return fullscreen_data->buffer_size;
            
        }
#if 0        
    #if defined (__MMI_INLINE_ITEM_IMAGETEXT__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
    #endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */ 
#endif    
        default:
        {
            MMI_ASSERT(0);
            return 0;
        }
    }
    
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_icon_list
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  icon_list       [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_icon_list(mmi_id gid, U16 *icon_list)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    memset(inline_instance->list_of_icons, 0, sizeof(inline_instance->list_of_icons));
    memcpy(inline_instance->list_of_icons, icon_list, (inline_instance->item_count) * (sizeof(inline_instance->list_of_icons) / CUI_INLINE_MAX_ITEM_COUNT));
    /* do not update screen. */
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_input_buffer_allocator
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  mallocFuncPtr       [IN]        
 *  mfreeFuncPtr        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_input_buffer_allocator(
        mmi_id gid,
        mmi_malloc_func_ptr mallocFuncPtr,
        mmi_mfree_func_ptr mfreeFuncPtr)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    inline_instance->input_buffer_malloc_func = mallocFuncPtr;
    inline_instance->input_buffer_free_func = mfreeFuncPtr;
}

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_default_icon_style
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  picon               [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
 void cui_inline_set_default_icon_style(mmi_id gid, PU8 picon)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    
/*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    inline_instance->picon = picon;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_text_edit_default_text
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  item_id             [IN]        
 *  default_text_id     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_text_edit_default_text(mmi_id gid, U16 item_id, U16 default_text_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 index;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    common_data = &((inline_instance->cui_inline_items[index]).common_data);
    common_data->flag |= CUI_INLINE_ITEM_DEFAULT_TEXT;
    switch (common_data->flag & 0xFF)
    {
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            cui_inline_fullscreen_edit_struct *item_data =
                (cui_inline_fullscreen_edit_struct*) (&((inline_instance->cui_inline_items[index]).special_data));
            item_data->default_text_id = default_text_id;
            break;
        }
        default:
            MMI_ASSERT(0);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_text_edit_default_text
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid                 [IN]        
 *  item_id             [IN]        
 *  default_text_id     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_text_edit_default_text_with_string(mmi_id gid, U16 item_id, U8 *default_text)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 index;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    common_data = &((inline_instance->cui_inline_items[index]).common_data);
    common_data->flag |= CUI_INLINE_ITEM_DEFAULT_TEXT;
    switch (common_data->flag & 0xFF)
    {
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            cui_inline_fullscreen_edit_struct *item_data =
                (cui_inline_fullscreen_edit_struct*) (&((inline_instance->cui_inline_items[index]).special_data));
            item_data->default_text_ptr = default_text;
            break;
        }
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_insert_item
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid             [IN]        
 *  pre_id          [IN]        
 *  new_item        [?]         
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_insert_item(mmi_id gid, U16 pre_id, cui_inline_set_item_struct *new_item)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 insert_index = 0;
    cui_inline_item_struct *insert_item;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(inline_instance->item_count == CUI_INLINE_MAX_ITEM_COUNT)
    {
        return CUI_INLINE_RETURN_ERROR;
    }
   
    if(pre_id != (U16)CUI_INLINE_INSERT_TAIL)
    {
    insert_index = cui_inline_convert_id_to_index(gid, pre_id);
    if (insert_index == CUI_INLINE_INVALID_ID)
    {
            return CUI_INLINE_RETURN_ERROR;
    }
        if (cui_inline_move_instance_data_list(inline_instance, insert_index, (MMI_BOOL)1) == MMI_FALSE)
        {
            return CUI_INLINE_RETURN_ERROR;
        }
    }
    else
    {
        insert_index = inline_instance->item_count;
    }
    (inline_instance->item_count)++;
    if(inline_instance->highlight_item >= insert_index)
    {
        inline_instance->highlight_item ++;
        inline_instance->highlight_item_id = inline_instance->cui_inline_items[inline_instance->highlight_item].common_data.item_id;
    }
    {
        U32 item_flag = (new_item->item_flag) & 0xFF;

        MMI_TRACE(MMI_FW_TRC_G4_EDITOR, MMI_GUI_INLINE_INSERT_ITEM, gid, insert_index, (new_item->item_flag & 0xff));
        item_flag = cui_inline_convert_type_to_inline(item_flag);

        insert_item = &((inline_instance->cui_inline_items)[insert_index]);
        insert_item->common_data.item_id = new_item->item_id;

        insert_item->common_data.flag = new_item->item_flag;
        cui_inline_set_item_type(&(insert_item->common_data), item_flag);

        inline_instance->list_of_icons[insert_index] = new_item->image_id;

        cui_inline_lock_main_screen(gid);
        
        cui_inline_set_item_convert_app_to_cui(gid, insert_item->common_data.item_id, new_item);

        cui_inline_unlock_main_screen(gid);
        
        cui_inline_set_item_attributes(
            gid,
            insert_item->common_data.item_id,
            CUI_INLINE_SET_ATTRIBUTE,
            new_item->item_flag);
    }
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_redraw_screen(gid);
    }
    return 1;

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_delete_item
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid         [IN]        
 *  item_id     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_delete_item(mmi_id gid, U16 item_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 del_index = 0;
    U16 old_highlight_index = 0;
    U16 new_highlight_index = 0;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    del_index = cui_inline_convert_id_to_index(gid, item_id);

    if (del_index == CUI_INLINE_INVALID_ID)
    {
        return CUI_INLINE_RETURN_ERROR;
    }
    if (inline_instance->history_item_id == item_id)
    {
        /* delete highlight item and screen is in history. */
        inline_instance->history_item_id = CUI_INLINE_INVALID_ID;
    }
    if (item_id == inline_instance->highlight_item_id)
    {
        old_highlight_index = cui_inline_convert_id_to_index(gid, inline_instance->highlight_item_id);
        if(old_highlight_index == inline_instance->item_count - 1)
        {
            new_highlight_index = wgui_inline_edit_get_next_highlight_index(0);       
        }
        else
        {
            new_highlight_index = wgui_inline_edit_get_next_highlight_index(old_highlight_index + 1); 
        }
        if (new_highlight_index == old_highlight_index)
        {
            return CUI_INLINE_RETURN_ERROR;
        }
        inline_instance->highlight_item = new_highlight_index;
        inline_instance->highlight_item_id = inline_instance->cui_inline_items[new_highlight_index].common_data.item_id;
        if (cui_inline_is_edit_main_screen(inline_instance->gid))
        {
            complete_inline_item_edit();
        }
    }
    MMI_TRACE(
        MMI_FW_TRC_G4_EDITOR,
        MMI_GUI_INLINE_DELETE_ITEM,
        gid,
        del_index,
        ((inline_instance->cui_inline_items[del_index].common_data.flag) & 0xff));

    cui_inline_delete_item_data(&(inline_instance->cui_inline_items[del_index]));
    cui_inline_move_instance_data_list(inline_instance, del_index, (MMI_BOOL)0);
    (inline_instance->item_count)--;
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_redraw_screen(gid);
    }
    return 1;
}


/*****************************************************************************
 * FUNCTION
 *  cui_fseditor_set_parent_data
 * DESCRIPTION
 *  Set parent data. App can set parent data and retrieve it by cui_fseditor_get_parent_data
 * PARAMETERS
 *  fseditor_gid        [IN]        FSEditor CUI Group ID
 *  parent_data         [IN]        Parent data
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_parent_data(mmi_id gid, U32 parent_data)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_ASSERT(inline_instance != NULL);
    inline_instance->parent_data = parent_data;
}


/*****************************************************************************
 * FUNCTION
 *  cui_fseditor_get_parent_data
 * DESCRIPTION
 *  Get parent data. App can set parent data by cui_fseditor_set_parent_data
 * PARAMETERS
 *  gid        [IN]        Inline CUI Group ID
 * RETURNS
 *  U32
 *****************************************************************************/
U32 cui_inline_get_parent_data(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_ASSERT(inline_instance != NULL);
    return inline_instance->parent_data;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_default_text_id
 * DESCRIPTION
 *  Get item default text id.
 * PARAMETERS
 *  gid        [IN]        Inline CUI Group ID
 *  item_id    [IN]        Inline CUI item id
 * RETURNS
 *  U16
 *****************************************************************************/
U16 cui_inline_get_default_text_id(mmi_id gid, U16 item_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 index = 0;
    cui_inline_item_common_data_struct *common_data = NULL;
        
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);
    if(CUI_INLINE_INVALID_ID != index)
    {    
        common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);
        switch (common_data->flag & 0xff)
        {
            case INLINE_ITEM_TYPE_TEXT_EDIT:
            case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
            {
                cui_inline_fullscreen_edit_struct *text_edit_data =
                    (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
                return text_edit_data->default_text_id;
            }
            case INLINE_ITEM_TYPE_DISPLAY_ONLY:
            {
                cui_inline_display_only_struct *text_edit_data =
                    (cui_inline_display_only_struct*) & (inline_instance->cui_inline_items[index].special_data);
                return text_edit_data->default_text_id;
            }
            default:
            {
                return 0;
            }
        }
    }
    return 0;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_item_id_by_index
 * DESCRIPTION
 *  Get item id by item index.
 * PARAMETERS
 *  gid             [IN]        Inline CUI Group ID
 *  item_index      [IN]        Inline CUI item id
 * RETURNS
 *  U16
 *****************************************************************************/
U16 cui_inline_get_item_id_by_index(mmi_id gid, U16 item_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if((inline_instance != NULL) && (item_index < inline_instance->item_count))
    {
        return  inline_instance->cui_inline_items[item_index].common_data.item_id;
    }
    
    return CUI_INLINE_INVALID_ID;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_instance_item_count
 * DESCRIPTION
 *  Get item count of instance.
 * PARAMETERS
 *  gid        [IN]        Inline CUI Group ID
 * RETURNS
 *  U8
 *****************************************************************************/
U8 cui_inline_get_instance_item_count(mmi_id gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if((inline_instance != NULL))
    {
        return  inline_instance->item_count;
    }
    
    return 0;
}

#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_ml_rdly_set_hilite_list
 * DESCRIPTION
 *  Set multiline readonly item highight list.
 * PARAMETERS
 *  gid        [IN]        Inline CUI Group ID
 * RETURNS
 *  U8
 *****************************************************************************/
void cui_inline_set_ml_rdly_set_hilite_list(mmi_id gid, U16 item_id, cui_inline_set_multiline_rd_highlight_list_struct *highlight_list)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S16 i = 0;
    cui_inline_multiline_read_only_struct *multiline_rdonly_data = NULL;
    //cui_inline_item_common_data_struct *common_data = NULL;
    U16 index = cui_inline_convert_id_to_index(gid, item_id);
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if((inline_instance != NULL) && (index != CUI_INLINE_INVALID_ID))
    {
        /* get instance pointer; */
        multiline_rdonly_data =
            (cui_inline_multiline_read_only_struct*) & (inline_instance->cui_inline_items[index].special_data);

        if(highlight_list->hilite_list != NULL)
        {
            if(multiline_rdonly_data->highlight_list_info.hilite_list != NULL)
            {
                kal_adm_free(cui_inline_ml_adm_id, (void *)multiline_rdonly_data->highlight_list_info.hilite_list); 
                cui_inline_ml_alloc_count--;
            }
            multiline_rdonly_data->highlight_list_info.hilite_list =
                    kal_adm_alloc(cui_inline_ml_adm_id, highlight_list->count * sizeof(HILITE_STR));
            cui_inline_ml_alloc_count++;

            if(multiline_rdonly_data->highlight_list_info.hilite_list != NULL)
            {
                for(i = 0; i < highlight_list->count; i++)
                {   
                    multiline_rdonly_data->highlight_list_info.hilite_list[i].hilite_type = highlight_list->hilite_list[i].hilite_type;
                    multiline_rdonly_data->highlight_list_info.hilite_list[i].length = highlight_list->hilite_list[i].length;           
                    multiline_rdonly_data->highlight_list_info.hilite_list[i].str_addr = (U8 *)multiline_rdonly_data->buffer + highlight_list->hilite_list[i].str_offset;
                } 
            }
            else
            {
                MMI_ASSERT(0);
            }
        }
        
        multiline_rdonly_data->highlight_list_info.count = highlight_list->count;
        multiline_rdonly_data->highlight_list_info.curr_hilite_idx = highlight_list->curr_hilite_idx;
         
    }
}

#endif

#if defined(__MMI_INLINE_ITEM_DATE__) 

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_date_boundary
 * DESCRIPTION
 *  Set date boundary.
 * PARAMETERS
 *  gid        [IN]        Inline CUI Group ID
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_date_boundary(mmi_id gid, U16 item_id, S32 date_year_max, S32 date_year_min, S32 date_month_max, S32 date_month_min)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(inline_instance != NULL)
    {
        set_inline_date_boundary(date_year_max, date_year_min, date_month_max, date_month_min);        
    }   
}

#endif

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_input_method
 * DESCRIPTION
 *  Set date boundary.
 * PARAMETERS
 *  gid        [IN]        Inline CUI Group ID
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_input_method(
        mmi_id gid,
        U16 item_id,
        U32 input_type,
        mmi_imm_input_mode_enum *required_input_mode_set,
        S16 input_ext_type)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    U16 index = 0;
    cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
   
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(inline_instance != NULL)
    {
        index = cui_inline_convert_id_to_index(gid, item_id);
        common_data = (cui_inline_item_common_data_struct*) & (inline_instance->cui_inline_items[index].common_data);
        if((common_data->flag & 0xFF) == INLINE_ITEM_TYPE_TEXT_EDIT)
        {
            cui_inline_fullscreen_edit_struct * item_data = (cui_inline_fullscreen_edit_struct*) & (inline_instance->cui_inline_items[index].special_data);
            item_data->input_type = input_type;
            item_data->input_ext_type = input_ext_type;
            item_data->required_input_mode_set = required_input_mode_set;
        }           
    }
}


#define CUI_INLINE_API_FOR_PLUTO_INLINE

/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_highlight_item
 * DESCRIPTION
 *  change highlight item dynamically. 
 * PARAMETERS
 *  gid                 : [IN]   inline gid           
 *  item_id             : [IN]   highlight inline item id 
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_highlight_item(mmi_id gid, U16 item_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *inline_instance = (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 highlight_index = 0;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    highlight_index = cui_inline_convert_id_to_index(gid, item_id);
    
    if (highlight_index == CUI_INLINE_INVALID_ID)
    {
        return;
    }
    if(highlight_index == inline_instance->highlight_item )
    {
        return;
    }
    inline_instance->highlight_item = (S32) highlight_index;
    inline_instance->highlight_item_id = item_id;
    
    inline_instance->history_item_id = CUI_INLINE_INVALID_ID;
    
    if (cui_inline_is_edit_main_screen(inline_instance->gid))
    {
        cui_inline_redraw_screen(gid);
    } 

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_is_current_cui
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  
 *****************************************************************************/
MMI_BOOL cui_inline_is_current_cui()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if ((mmi_frm_group_get_active_id() != GRP_ID_INVALID) &&
        (g_cui_inline_current_instance != NULL) &&
        (g_cui_inline_current_instance->gid == mmi_frm_group_get_active_id()))
    {
        return MMI_TRUE;
    }
    else
    {
        return MMI_FALSE;
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_reset_instance_point
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_reset_instance_point()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    g_cui_inline_current_instance = NULL;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_item_save_gui_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index               [IN]        
 *  inline_item         [?]         
 *  history_buffer      [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_item_save_gui_buffer(S32 index, wgui_inline_item *inline_item, PU8 history_buffer)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_item_common_data_struct *common_data;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    common_data = &((g_cui_inline_current_instance->cui_inline_items[index]).common_data);
    g_cui_inline_current_instance->history_item_id = common_data->item_id;
    if (wgui_inline_list_menu_changed)
    {
        cui_inline_set_screen_attributes(
            g_cui_inline_current_instance->gid,
            CUI_INLINE_SET_ATTRIBUTE,
            CUI_INLINE_SCREEN_CHANGED);
    }
    else
    {
        cui_inline_set_screen_attributes(
            g_cui_inline_current_instance->gid,
            CUI_INLINE_RESET_ATTRIBUTE,
            CUI_INLINE_SCREEN_CHANGED);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_item_replace_gui_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index               [IN]        
 *  inline_item         [?]         
 *  history_buffer      [?]         
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_item_replace_gui_buffer(S32 index, wgui_inline_item *inline_item, PU8 *history_buffer)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (g_cui_inline_current_instance->history_item_id ==
        g_cui_inline_current_instance->cui_inline_items[index].common_data.item_id)
    {
        switch ((inline_item->flags) & 0xff)
        {
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)        
            case INLINE_ITEM_TYPE_MULTI_LINE_EDIT:
            {
                break;
            }
#endif             
            case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
            {
                cui_inline_fullscreen_edit_struct *p_data;

                p_data =
                    (cui_inline_fullscreen_edit_struct*) & (g_cui_inline_current_instance->cui_inline_items[index].
                                                             special_data);
                if (p_data->invalid_gui_buffer == 1)
                {
                    *history_buffer = NULL;
                }
                break;
            }
            case INLINE_ITEM_TYPE_DATE:
            {
#if defined(__MMI_INLINE_ITEM_DATE__)                 
                cui_inline_date_struct *p_data;

                p_data =
                    (cui_inline_date_struct*) & (g_cui_inline_current_instance->cui_inline_items[index].special_data);
                if (p_data->invalid_gui_buffer == 0)
                {
#ifdef __INLINE_DATETIME_SLIM__
                    inline_datetime_edit_set_history(INLINE_DATETIME_HISTORY_ID, *history_buffer);
#else
                    inline_date_edit_set_history(INLINE_DATE_HISTORY_ID, *history_buffer);
#endif
                }
                /* wgui_inline_date_input.flags = p_data->wgui_flag_attr; */
#endif                
                break;
            }
            case INLINE_ITEM_TYPE_TIME:
            {
#if defined(__MMI_INLINE_ITEM_TIME__)                 
                cui_inline_time_struct *p_data;

                p_data =
                    (cui_inline_time_struct*) & (g_cui_inline_current_instance->cui_inline_items[index].special_data);
                if (p_data->invalid_gui_buffer == 0)
                {
#ifdef __INLINE_DATETIME_SLIM__
                    inline_datetime_edit_set_history(INLINE_DATETIME_HISTORY_ID, *history_buffer);
#else
                    inline_time_edit_set_history(INLINE_TIME_HISTORY_ID, *history_buffer);
#endif
                }
                /* wgui_inline_time_input.flags = p_data->wgui_flag_attr; */
#endif                
                break;
            }
#if 0            
#if defined (__MMI_INLINE_ITEM_TIME_PEROID__)            
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_TIME_PEROID__) */   
#endif
#if defined(__MMI_INLINE_ITEM_IP4__)
            case INLINE_ITEM_TYPE_IP4_EDIT:
            {                
                cui_inline_ip4_struct *p_data;

                p_data =
                    (cui_inline_ip4_struct*) & (g_cui_inline_current_instance->cui_inline_items[index].special_data);
                if (p_data->invalid_gui_buffer == 0)
                {
#ifdef __INLINE_DATETIME_SLIM__
                    inline_datetime_edit_set_history(INLINE_DATETIME_HISTORY_ID, *history_buffer);
#else
                    inline_IP4_edit_set_history(INLINE_IP4_HISTORY_ID, *history_buffer);
#endif
                }
                /* wgui_inline_IP4_input.flags = p_data->wgui_flag_attr; */
                
                break;
            }
#endif       

#if defined(__MMI_INLINE_ITEM_DOW__)
            case INLINE_ITEM_TYPE_DOW_SELECT:
            {                 
                cui_inline_dow_struct *p_data;

                p_data =
                    (cui_inline_dow_struct*) & (g_cui_inline_current_instance->cui_inline_items[index].special_data);
                if (p_data->invalid_gui_buffer == 0)
                {
                    inline_DOW_select_set_history(INLINE_DOW_SELECT_HISTORY_ID, *history_buffer);
                }
                /* MMI_inline_DOW_select.flags = p_data->wgui_flag_attr; */
                
                break;
            }
#endif       

#if 0
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */  
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */             
        }

        g_cui_inline_current_instance->history_item_id = CUI_INLINE_INVALID_ID;
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_item_save_input_buffer
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_item_save_input_buffer()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    S32 i;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    for (i = 0; i < g_cui_inline_current_instance->item_count; i++)
    {
        cui_inline_item_common_data_struct *p_common_data =
            &(g_cui_inline_current_instance->cui_inline_items[i].common_data);
        switch (p_common_data->flag & 0xff)
        {
            case INLINE_ITEM_TYPE_TEXT_EDIT:
            {
                wgui_inline_item_text_edit *ii = (wgui_inline_item_text_edit*) wgui_inline_items[i].item;
                cui_inline_fullscreen_edit_struct *special_data =
                    (cui_inline_fullscreen_edit_struct*) & (g_cui_inline_current_instance->cui_inline_items[i].special_data);
                special_data->ucs2_count = ii->UCS2_count;
                break;
            }
#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)            
            case INLINE_ITEM_TYPE_COLOR_SELECT:
            {
                wgui_inline_item_color_select *ii = (wgui_inline_item_color_select*) wgui_inline_items[i].item;
                cui_inline_color_select_struct *special_data =
                    (cui_inline_color_select_struct*) & (g_cui_inline_current_instance->cui_inline_items[i].
                                                          special_data);
                special_data->start_index = (U8) ii->start_index;
            
                break;
            }
#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */             
        }
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_register_lsk_handler
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_register_lsk_handler(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    register_left_softkey_handler();
    set_left_softkey_function(cui_inline_lsk_function, KEY_EVENT_UP);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_register_rsk_handler
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_register_rsk_handler(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    register_right_softkey_handler();
    set_right_softkey_function(cui_inline_rsk_function, KEY_EVENT_UP);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_register_csk_handler
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_register_csk_handler(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
    cui_inline_item_common_data_struct *p_common_data =
        &(p_instance->cui_inline_items[p_instance->highlight_item].common_data);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    switch (p_common_data->flag & 0xFF)
    {
        
#if defined(__MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined(__MMI_INLINE_ITEM_MULTILINE_EDIT__)
        case INLINE_ITEM_TYPE_MULTI_LINE_EDIT: 
        {
            register_softkey_handler(MMI_CENTER_SOFTKEY);
            set_softkey_function(cui_inline_csk_function, KEY_EVENT_UP, MMI_CENTER_SOFTKEY);
            mmi_imc_key_setup_csk_function(cui_inline_csk_function);
            break;
        }
#endif    
        case INLINE_ITEM_TYPE_TEXT_EDIT:
        case INLINE_ITEM_TYPE_FULL_SCREEN_EDIT:
        {
            register_softkey_handler(MMI_CENTER_SOFTKEY);
            set_softkey_function(wgui_inline_lsk_fs_cui_editor, KEY_EVENT_UP, MMI_CENTER_SOFTKEY);
            mmi_imc_key_setup_csk_function(wgui_inline_lsk_fs_cui_editor);
            break;
        }
        case INLINE_ITEM_TYPE_SELECT:
        {
            break;
        }

#if defined(__MMI_INLINE_ITEM_DOW__)        
        case INLINE_ITEM_TYPE_DOW_SELECT:
        {             
            register_softkey_handler(MMI_CENTER_SOFTKEY);
            set_softkey_function(handle_inline_DOW_select_LSK_up, KEY_EVENT_UP, MMI_CENTER_SOFTKEY);            
            break;
        }
#endif        
        default:
        {
            if (!wgui_inline_list_menu_rsk_back)
            {
                register_softkey_handler(MMI_CENTER_SOFTKEY);
                set_softkey_function(cui_inline_csk_function, KEY_EVENT_UP, MMI_CENTER_SOFTKEY);
                mmi_imc_key_setup_csk_function(cui_inline_csk_function);
            }
        }
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_lsk_function
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_lsk_function()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
#if defined (__MMI_INLINE_ITEM_DOW__) // || defined(__MMI_INLINE_ITEM_IMAGETEXT__)    
    cui_inline_item_common_data_struct *p_common_data =
        &(g_cui_inline_current_instance->cui_inline_items[g_cui_inline_current_instance->highlight_item].common_data);
#endif
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#if defined (__MMI_INLINE_ITEM_DOW__) // || defined (__MMI_INLINE_ITEM_IMAGETEXT__)    
    if (((p_common_data->flag & 0xFF) == INLINE_ITEM_TYPE_DOW_SELECT) ||
        ((p_common_data->flag & 0xFF) == INLINE_ITEM_IMAGE_TEXT_TYPE)
       )
    {
        MMI_ASSERT(0);  /* never enter  this. */
    }
#endif    

    cui_inline_evt_submit(MMI_LEFT_SOFTKEY);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_rsk_function
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_rsk_function()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_evt_abort();
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_csk_function
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_csk_function()
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
#if defined (__MMI_INLINE_ITEM_MULTILINE_EDIT__)
    cui_inline_item_common_data_struct *p_common_data =
        &(p_instance->cui_inline_items[p_instance->highlight_item].common_data);
#endif
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
#if 0    
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif

#if defined (__MMI_INLINE_ITEM_MULTILINE_EDIT__)
     if((p_common_data->flag & 0xFF) == INLINE_ITEM_TYPE_MULTI_LINE_EDIT)
    {
        cui_inline_evt_submit(MMI_CENTER_SOFTKEY);
        return;
    }
#endif     
     
    /* We prohibit App to set lsk attribute now. */
    MMI_ASSERT(wgui_inline_list_menu_disable_done);
    {
        cui_inline_evt_csk_press();
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_default_softkey_attribute
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_set_item_default_softkey_attribute(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
    cui_inline_item_common_data_struct *p_common_data =
        &(p_instance->cui_inline_items[p_instance->highlight_item].common_data);
    S32 item_type = -1;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    item_type = cui_inline_convert_type_to_cui(p_common_data->flag & 0xff);

    // DOW/IMAGE_TEXT are phase out, do not care
    if (item_type == CUI_INLINE_ITEM_TYPE_CAPTION)
    {
        set_left_softkey_label(get_string(0));
        set_softkey_icon(get_image(0), MMI_CENTER_SOFTKEY);
        set_right_softkey_label(get_string(0));
    }
    else
    {
        set_left_softkey_label(get_string(STR_GLOBAL_SAVE));
        set_softkey_icon(get_image(IMG_GLOBAL_COMMON_CSK), MMI_CENTER_SOFTKEY);
        set_right_softkey_label(get_string(STR_GLOBAL_BACK));
    }
    
    if (cui_inline_is_edit_main_screen(p_instance->gid))
    {
        cui_inline_draw_softkey(MMI_LEFT_SOFTKEY);
        cui_inline_draw_softkey(MMI_RIGHT_SOFTKEY);
        cui_inline_draw_softkey(MMI_CENTER_SOFTKEY);
    }

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_replace_item_softkey_by_app
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
MMI_BOOL cui_inline_is_item_lsk_by_app(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
    cui_inline_item_softkey_struct *p_softkey = &(p_instance->cui_inline_items_softkey[index]);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (p_softkey->softkey[MMI_LEFT_SOFTKEY].string_id != CUI_INLINE_SOFTKEY_DEFAULT_VALUE)
    {
        return MMI_TRUE;
    }
	return MMI_FALSE;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_get_item_lsk_string_id
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  current left softkey string id
 *****************************************************************************/
U16 cui_inline_get_item_lsk_string_id(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
    cui_inline_item_softkey_struct *p_softkey = &(p_instance->cui_inline_items_softkey[index]);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
	return p_softkey->softkey[MMI_LEFT_SOFTKEY].string_id;
}

/*****************************************************************************
 * FUNCTION
 *  cui_inline_replace_item_softkey_by_app
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_replace_item_softkey_by_app(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
    cui_inline_item_softkey_struct *p_softkey = &(p_instance->cui_inline_items_softkey[index]);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if (p_softkey->softkey[MMI_LEFT_SOFTKEY].string_id != CUI_INLINE_SOFTKEY_DEFAULT_VALUE)
    {
        set_left_softkey_label(get_string(p_softkey->softkey[MMI_LEFT_SOFTKEY].string_id));
    }
    if (p_softkey->softkey[MMI_RIGHT_SOFTKEY].string_id != CUI_INLINE_SOFTKEY_DEFAULT_VALUE)
    {
        set_right_softkey_label(get_string(p_softkey->softkey[MMI_RIGHT_SOFTKEY].string_id));
    }
    if (p_softkey->softkey[MMI_CENTER_SOFTKEY].image_id != CUI_INLINE_SOFTKEY_DEFAULT_VALUE)
    {
        /* In Slim Project, these items use CSK to execute themselves command. */
        #if 0
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
        #endif    
        {
            set_softkey_icon(get_image(p_softkey->softkey[MMI_CENTER_SOFTKEY].image_id), MMI_CENTER_SOFTKEY);
        }
    }
    if (cui_inline_is_edit_main_screen(p_instance->gid))
    {
        cui_inline_draw_softkey(MMI_LEFT_SOFTKEY);
        cui_inline_draw_softkey(MMI_RIGHT_SOFTKEY);
        cui_inline_draw_softkey(MMI_CENTER_SOFTKEY);
    }
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_highlight_handler
 * DESCRIPTION
 *  
 * PARAMETERS
 *  index       [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_highlight_handler(S32 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_event_inline_notify_struct evt;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    g_cui_inline_current_instance->highlight_item = index;
    g_cui_inline_current_instance->highlight_item_id =
        g_cui_inline_current_instance->cui_inline_items[index].common_data.item_id;
    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, g_cui_inline_current_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_HIGHLIGHT_ITEM;
    evt.item_id =
        g_cui_inline_current_instance->cui_inline_items[g_cui_inline_current_instance->highlight_item].common_data.
        item_id;
    mmi_frm_group_send_to_parent(g_cui_inline_current_instance->gid, (mmi_group_event_struct*) & evt);

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_submit
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_submit(WGUI_SOFTKEY_ENUM key)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_submit_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_SUBMIT, p_instance->gid);
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    evt.sofktey_type = key;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_submit_int
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_submit_int(MMI_ID gid, WGUI_SOFTKEY_ENUM key)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_submit_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_SUBMIT, p_instance->gid);
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    evt.sofktey_type = key;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_abort_int
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_abort_int(MMI_ID gid)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_abort_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_ABORT, p_instance->gid);
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_abort
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_abort(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_abort_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_ABORT, p_instance->gid);
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_csk_press
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_csk_press(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_csk_press_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_CSK_PRESS, g_cui_inline_current_instance->gid);
    evt.item_id =
        g_cui_inline_current_instance->cui_inline_items[g_cui_inline_current_instance->highlight_item].common_data.
        item_id;
    mmi_frm_group_send_to_parent(g_cui_inline_current_instance->gid, (mmi_group_event_struct*) & evt);

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_set_key
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_set_key(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_set_key_struct evt;
    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_SET_KEY, p_instance->gid);
    evt.item_id =
        g_cui_inline_current_instance->cui_inline_items[g_cui_inline_current_instance->highlight_item].common_data.
        item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_activate
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_item_activate(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_notify_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_ITEM_ACTIVATED;
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);

}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_back_without_changed
 * DESCRIPTION
 *  This event is just for select and editor
 * PARAMETERS
 *  gid		[IN]		current inline cui group ID
 *  index		[IN]		the org menuitem index
 * RETURNS
 *  void
 *****************************************************************************/
static void cui_inline_evt_item_back_without_changed(MMI_ID gid, U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_event_inline_notify_struct evt;
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_BACK_WITHOUT_CHANGE;
    evt.item_id = p_instance->cui_inline_items[index].common_data.item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_changed_int
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
static void cui_inline_evt_item_changed_int(MMI_ID gid, U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_event_inline_notify_struct evt;
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_ITEM_CHANGED;
    evt.item_id = p_instance->cui_inline_items[index].common_data.item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_changed
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_item_changed(U16 index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_inline_evt_item_changed_int(g_cui_inline_current_instance->gid, index);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_text_not_empty
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_item_text_not_empty(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_notify_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_TEXT_NOT_EMPTY;
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_text_empty
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_item_text_empty(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_notify_struct evt;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_TEXT_EMPTY;
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
}

void cui_inline_set_char_filter_to_inline(MMI_BOOL *is_allowed, const UI_character_type * * characters_list)
{
     /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    *is_allowed = p_instance->characters_list_is_allowed;
    *characters_list = p_instance->characters_list;

}

#if 0
/* under construction !*/
#if defined (__MMI_INLINE_ITEM_IMAGETEXT__)
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif /* defined (__MMI_INLINE_ITEM_IMAGETEXT__) */ 
#endif

/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_select_focus_changed
 * DESCRIPTION
 *  
 * PARAMETERS
 *  select_index        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_item_select_focus_changed(MMI_ID gid, S32 select_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_select_struct *select_data = NULL;  
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* pluto inline will update highlight index automally, so we no need set it. */

    cui_event_inline_notify_struct evt;
    select_data = (cui_inline_select_struct *)&(p_instance->cui_inline_items[p_instance->highlight_item].special_data);
    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_SELECT_FOCUS_CHANGED;
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    /* Is already set by pluto inline. */
    evt.param = select_index;
    evt.param_ext = select_data->old_index;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
}


#if defined (__MMI_INLINE_ITEM_COLOR_SELECT__)


/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_item_color_select_focus_changed
 * DESCRIPTION
 *  
 * PARAMETERS
 *  select_index        [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_item_color_select_focus_changed(U16 select_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_event_inline_notify_struct evt;
    cui_inline_color_select_struct *color_select_data;
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* Update instance item data */
    color_select_data =
        (cui_inline_color_select_struct*) & (p_instance->cui_inline_items[p_instance->highlight_item].special_data);
    color_select_data->highlight_index = (U8) select_index;

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_COLOR_SELECT_FOCUS_CHANGED;
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    evt.param = select_index;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) & evt);
}

#endif /* defined (__MMI_INLINE_ITEM_COLOR_SELECT__) */ 



/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_mainscreen_exit
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_evt_mainscreen_exit(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    cui_event_inline_common_struct evt; 
    
    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_MAIN_SCREEN_INACTIVE, g_cui_inline_current_instance->gid);

    mmi_frm_group_send_to_parent(g_cui_inline_current_instance->gid, (mmi_group_event_struct*) & evt);
}

/*****************************************************************************
 * FUNCTION
 *  cui_inline_evt_mainscreen_exit
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  void
 *****************************************************************************/
 void cui_inline_selector_update_old_index(S32 old_index)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
        (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
    cui_inline_select_struct *select_data = NULL;
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    if(p_instance != NULL)
    {
       select_data = (cui_inline_select_struct *)&(p_instance->cui_inline_items[p_instance->highlight_item].special_data); 
       select_data->old_index = old_index;
    }
}



/*****************************************************************************
 * FUNCTION
 *  cui_inline_draw_top_info_box
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid            :     [IN]        
 *  draw_struct    :     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_draw_top_info_box(mmi_id gid, cui_inline_draw_top_info_struct *draw_struct)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    cui_inline_instance_struct *p_instance =
    (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    p_instance->info_box_draw.is_draw_once = draw_struct->is_draw_once;
    p_instance->info_box_draw.num_of_info_box_rows = draw_struct->num_of_info_box_rows;
    p_instance->info_box_draw.draw_info_callback = draw_struct->draw_info_callback;
    p_instance->info_box_draw.hide_info_callback = draw_struct->hide_info_callback;
}


#if  defined(__MMI_INLINE_ITEM_PROGRESS_BAR__)

/*****************************************************************************
 * FUNCTION
 *  cui_inline_register_progress_bar_change_callback
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid            :     [IN]        
 *  draw_struct    :     [IN]        
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_progress_bar_change_callback()
{
   /*----------------------------------------------------------------*/
   /* Local Variables                                                */
   /*----------------------------------------------------------------*/ 
   cui_inline_instance_struct *p_instance =
          (cui_inline_instance_struct*) mmi_frm_group_get_user_data(g_cui_inline_current_instance->gid);
   cui_inline_progress_bar_struct *item_data = 
          (cui_inline_progress_bar_struct *)&(p_instance->cui_inline_items[p_instance->highlight_item].special_data);
   cui_event_inline_notify_struct evt; 
   
   /*----------------------------------------------------------------*/
   /* Code Body                                                      */
   /*----------------------------------------------------------------*/

    MMI_FRM_INIT_GROUP_EVENT(&evt, EVT_ID_CUI_INLINE_NOTIFY, p_instance->gid);
    evt.event_type = CUI_INLINE_NOTIFY_PROGRESS_BAR_VALUE_CHANGED;
    evt.item_id = p_instance->cui_inline_items[p_instance->highlight_item].common_data.item_id;
    evt.param = (S32)item_data->value;
    mmi_frm_group_send_to_parent(p_instance->gid, (mmi_group_event_struct*) &evt);
}

#endif


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_icon
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid            :     [IN]        
 *  item_id        :     [IN] 
 *  icon_id        :     [IN]
 * RETURNS
 *  void
 *****************************************************************************/
S32 cui_inline_set_item_icon(mmi_id gid, U16 item_id, U16 icon_id)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
   // cui_inline_item_common_data_struct *common_data = NULL;
    cui_inline_instance_struct *p_instance =
    (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    U16 index = 0; 
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    index = cui_inline_convert_id_to_index(gid, item_id);

    
    if((index != CUI_INLINE_INVALID_ID) && (icon_id > 0)&& (p_instance != NULL))
    {
        p_instance->list_of_icons[index] = icon_id;
        return 1;
    } 
    return CUI_INLINE_RETURN_ERROR;
}


/*****************************************************************************
 * FUNCTION
 *  cui_inline_set_item_icon
 * DESCRIPTION
 *  
 * PARAMETERS
 *  gid            :     [IN]        
 *  item_id        :     [IN] 
 *  icon_id        :     [IN]
 * RETURNS
 *  void
 *****************************************************************************/
void cui_inline_multiline_append_string(
                    mmi_id gid,
                    U16 item_id,                    
                    U8 *string)

{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
   // cui_inline_item_common_data_struct *common_data = NULL;
#if defined( __MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined( __MMI_INLINE_ITEM_MULTILINE_EDIT__)   
    cui_inline_multiline_edit_struct *item_data = NULL;
#endif
    U8 *guiBuffer = NULL;
    U16 screen_id = 0;
    U16 item_index = 0;
    cui_inline_instance_struct *inline_instance =
    (cui_inline_instance_struct*) mmi_frm_group_get_user_data(gid);
    
    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/ 
    if((inline_instance != NULL) &&
       (item_id == inline_instance->history_item_id) &&
       (!cui_inline_is_edit_main_screen(inline_instance->gid))  
      )
    {

        if(inline_instance->app_screen_id == 0)
        {
            screen_id = CUI_INLINE_MAIN_SCREEN_SCRN_ID;
        }
        else
        {
            screen_id = inline_instance->app_screen_id;
        }
        guiBuffer = (PU8) mmi_frm_scrn_get_gui_buf(gid, screen_id);

        item_index = cui_inline_convert_id_to_index(gid, item_id);
        if(item_index == CUI_INLINE_INVALID_ID)
        {
            return;
        }
#if defined( __MMI_INLINE_ITEM_MULTILINE_READ_ONLY__) || defined( __MMI_INLINE_ITEM_MULTILINE_EDIT__)               
        item_data =
                (cui_inline_multiline_edit_struct*) & (inline_instance->cui_inline_items[item_index].special_data);
       wgui_inline_multiline_append_string(item_data->input_type, item_data->buffer, item_data->buffer_size, string, guiBuffer);     
#endif
    } 
}

