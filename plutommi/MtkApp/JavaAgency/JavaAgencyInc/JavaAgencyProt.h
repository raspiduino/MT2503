/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*             
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*******************************************************************************
 * Filename:
 * ---------
 * JavaProt.h
 *
 * Project:
 * --------
 *   MAUI
 *
 * Description:
 * ------------
 *   This file is intends for define prototypes of Java related routines.
 *
 * Author:
 * -------
 * -------
 * -------
 * 
 *==============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *==============================================================================
 *******************************************************************************/

#ifndef JAVA_AGENCY_PROT_H
#define JAVA_AGENCY_PROT_H

#ifdef __J2ME__

#include "JavaAgencyDef.h"
#include "JavaAgencyGprot.h"
#include "jam_interface.h"
#include "jam_msg_handler.h"
#include "j2me_custom_option.h"
#include "Wapadp.h"
#include "wap_ps_struct.h"

#include "Custom_events_notify.h"
#include "historyGprot_int.h"
#ifdef __PLUTO_MMI_PACKAGE__
#include "DataaccountGprot.h"
#elif defined __COSMOS_MMI_PACKAGE__
#include "vapp_dtcnt_gprot.h"
#endif
#include "Inlinecuigprot.h"
#include "Browsersrvgprot.h"
#include "Wgui_categories_util.h"
#include "ModeSwitchSrvGprot.h"
#include "NwUsabSrvGprot.h"
#include "IdleGprot.h"
#include "mmi_frm_utility_gprot.h"
/*****************************************************************************
** 0. JAVA_BASIC feature:
** 1.JAVA_CONTENT_MANAGER feature:
** 1.1   JAVA_CM_BROWSER
** 1.2   JAVA_CM_LAUNCH
** 1.3   JAVA_CM_UPDATE
** 1.4   JAVA_CM_SETTING
** 1.5   JAVA_CM_INFORMATION
** 1.6   JAVA_CM_DELETE
** 3. JAVA_TCK
** 4. JAVA_INSTALL_UPDATE
** 5. JAVA_TIMEALARM_PUSH
** 6. JAVA_ABORT
**  7. Java Resume / Java Terminate
*****************************************************************************/

/*****************************************************************************
** 0. JAVA_BASIC feature: (5)
**    InitJAVA
**    Highlight_JAVA_MENU
**    EntryScrJavaMenu
**    ExitScrJavaMenu
**    HighlightJavaEM
*****************************************************************************/
extern MMI_BOOL mmi_java_is_busy(void);
extern void Highlight_JAVA_MENU(void);
extern void EntryScrJavaMenu(void);
extern void HighlightJavaEM(void);

/*****************************************************************************
** 1.JAVA_CONTENT_MANAGER feature: (22)
** 1.1   JAVA_CM_BROWSER
*****************************************************************************/

extern void mmi_java_highlight_get_mids_index(S32 nIndex);
extern void mmi_java_entry_opt(void);

extern void mmi_java_highlight_opt_select(void);
extern void mmi_java_highlight_opt_launch(void);
extern void mmi_java_highlight_opt_update(void);
extern void mmi_java_highlight_opt_setting(void);
extern void mmi_java_highlight_opt_info(void);
extern void mmi_java_highlight_opt_delete(void);
extern void mmi_java_highlight_opt_package(void);
extern void mmi_java_highlight_opt_network_profile(void);
extern void mmi_java_highlight_opt_restore();

extern void mmi_java_send_mid_getlist_req(void);
extern void mmi_java_recv_mid_getlist_cnf(void *MsgStruct);
extern void mmi_java_mids_getlist_detect_rsp_hdlr(void * MsgStruct);

extern void mmi_java_highlight_option_select(S32 nIndex);

extern void mmi_java_entry_opt_select(void);

extern void mmi_java_entry_opt_update(void);

extern void mmi_java_entry_mids_network_profile_req(void);
extern void mmi_java_mids_recv_wap_prof_list_rsp(void * MSG);

/*****************************************************************************
** 1.JAVA_CONTENT_MANAGER feature: (3)
** 1.2   JAVA_CM_LAUNCH
*****************************************************************************/

extern void mmi_java_send_mid_start_req(void);
extern void mmi_java_entry_eureka_by_menu(void);
extern void mmi_java_entry_eureka_by_wap(void);
extern void mmi_java_entry_mid_launch(void);
extern void mmi_java_entry_mid_launch_from_idle(void);
extern void mmi_java_recv_mid_start_cnf(void *MsgStruct);
extern void mmi_java_recv_mid_stop_ind(void *MsgStruct);
extern void mmi_java_recv_shutdown_all_ind(void *MsgStruct);

/*****************************************************************************
** 1.JAVA_CONTENT_MANAGER feature: (4)
** 1.5   JAVA_CM_INFORMATION
*****************************************************************************/

extern void mmi_java_send_mids_getinfo_req(void);
extern void mmi_java_recv_mids_getinfo_cnf(void *MsgStruct);
extern void mmi_java_entry_opt_info(void);

/*****************************************************************************
** 1.JAVA_CONTENT_MANAGER feature: (23)
** 1.4   JAVA_CM_SETTING
*****************************************************************************/

extern void mmi_java_highlight_network_access(void);
extern void mmi_java_highlight_auto_invocation(void);
extern void mmi_java_highlight_messaging(void);
extern void mmi_java_highlight_multimedia(void);

#ifdef __PLUTO_MMI_PACKAGE__
extern void mmi_java_save_opt_setting(void);
#endif
extern void mmi_java_send_mids_get_setting_req(U32 mids_id, kal_char* mids_root);
extern void mmi_java_recv_mids_get_setting_cnf(void *MsgStruct);
extern void mmi_java_send_mids_set_setting_req(void);
extern void mmi_java_recv_mids_set_setting_cnf(void *MsgStruct);
extern void mmi_java_set_audio_volume_req(U8 volume);

extern void mmi_java_highlight_mids_setting_choice(S32 nIndex);
extern S8 mmi_java_get_choice_level(S8 permisisonLevel);
extern S8 mmi_java_get_new_permission_level(S8 choiceLevel, S8 max_setting, S8 org_seting);
extern void mmi_java_entry_opt_setting_network_access(void);
extern void mmi_java_entry_opt_setting_auto_invocation(void);
extern void mmi_java_entry_opt_setting_messaging(void);
extern void mmi_java_entry_opt_setting_multimedia(void);
extern void mmi_java_entry_opt_setting_data_read(void);
extern void mmi_java_entry_opt_setting_data_write(void);

#ifdef __PLUTO_MMI_PACKAGE__
extern void mmi_java_update_security_setting(void);
extern void mmi_java_recv_set_default_domain_cnf(void *MsgStruct);
extern void mmi_java_send_set_default_domain_req(void);
extern void mmi_java_recv_get_default_domain_cnf(void *MsgStruct);
extern void mmi_java_send_get_default_domain_req(S32 domain);
#endif
extern void mmi_java_recv_pause_ind(void *MsgStruct);
extern void mmi_java_recv_resume_ind(void *MsgStruct);
extern void mmi_java_recv_terminate_ind(void *MsgStruct);

extern mmi_ret mmi_java_recieve_da_file_hdlr(mmi_event_struct *param);
extern mmi_ret mmi_java_da_setting_hdlr(mmi_event_struct *param);

/* 20110223,SUPPORT_JAVA_SHARE_MED */
#if defined(J2ME_SUPPORT_PAUSE) || defined(J2ME_SUPPORT_BACKGROUND)
extern void mmi_java_resume_dialog_execute_resume(void);
#endif 

extern void mmi_java_recv_terminating_ind(void * MsgStruct);
/*****************************************************************************
** 1.JAVA_CONTENT_MANAGER feature: (13)
** 1.6   JAVA_CM_DELETE
*****************************************************************************/
extern kal_int32 mmi_java_mids_delete(kal_uint32 mids_id, kal_char* mids_storage_id,kal_bool need_confirm);
extern void mmi_java_entry_mids_delete_requesting(void);
extern void mmi_java_send_mids_delete_req(void);
extern void mmi_java_recv_mids_delete_confirm_ind(void *MsgStruct);
extern void mmi_java_entry_mids_delete_confirm(void);
extern void mmi_java_entry_mids_delete_confirmed(void);
extern void mmi_java_mids_delete_confirm_yes_hdlr(void);
extern void mmi_java_mids_delete_confirm_no_hdlr(void);
extern void mmi_java_send_mids_delete_confirm_res(MMI_BOOL confirm);
extern void mmi_java_recv_mids_delete_cnf(void *MsgStruct);
extern void mmi_java_recv_mids_package_cnf(void *MsgStruct);

/*****************************************************************************
** JAVA_PACKAGE
*****************************************************************************/
#if defined(__DRM_SUPPORT__) && defined(__MMI_JAVA_PACKAGE_MIDS__)
extern void mmi_java_entry_package_warn_user(void);
#endif
extern void mmi_java_entry_send_screen_from_java(void);

/*****************************************************************************
** 3. JAVA_TCK: (8)
*****************************************************************************/
extern void mmi_java_send_set_mode_req(void);
extern void mmi_java_recv_set_mode_cnf(void* MsgStruct);

extern void mmi_java_terminate_tck_mode(void);
extern void mmi_java_execute_em_tck(U8 tck_index);
extern void mmi_java_recv_tck_result_ind(void* MsgStruct);
#ifdef KDWP_DEBUG
extern void mmi_java_entry_kdwp_config(void);
#endif
extern void mmi_java_em_tck_enter(void);
extern void mmi_java_em_tck_close(void);
/*****************************************************************************
** 4. JAVA_INSTALL_UPDATE: (16)
*****************************************************************************/

#define MAX_PUSH_INSTALL_REGISTRY										    (5)
typedef struct
{
    kal_wchar *download_url;
    kal_wchar *jad_file_path;
    kal_wchar *jar_file_path;
    kal_wchar* drm_file_path;
    kal_int32 drm_serial;
    MMI_BOOL delete_after_install_fail;
} mmi_java_push_install_record_struct;

typedef struct _mmi_java_push_install_node_struct_t
{
    mmi_java_push_install_record_struct content;
    struct _mmi_java_push_install_node_struct_t* prev;
    struct _mmi_java_push_install_node_struct_t* next;
    kal_bool right_arrived;
}mmi_java_push_install_node_struct;
#ifdef __MMI_JAVA_INSTALL_AUTHENTICATION__  
extern void mmi_java_send_get_auth_res(U8* username, U8* password);
#endif 

#ifdef __MMI_JAVA_INSTALL_PUSHINSTALL__
extern void mmi_java_discard_current_push_install_req(void);
extern U16* mmi_java_get_push_install_confirm_string(void);
void mmi_java_set_push_install_info(void);
#endif

extern void mmi_java_send_mids_install_confirm_res(MMI_BOOL confirm);
extern void mmi_java_mids_install_request_start(void);
extern void mmi_java_mids_install_internal(void);
extern MMI_BOOL mmi_java_is_installing_by_dm(void);
extern void mmi_java_install_init(void);
extern U32 g_java_need_storage_size;
extern S32 g_java_need_storage_free_size;
extern S32 g_java_storage_drive;
extern S32 g_mmi_java_install_mids_id;
extern void mmi_java_send_mids_get_list_req(
                S32 start_index, 
                MMI_BOOL extend_mode, 
                mmi_java_mids_getlist_cnf_struct **ptr, 
                jam_getlist_filter_struct *filter);
extern MMI_BOOL mmi_java_storage_size_is_enough(void);
extern MMI_BOOL needToSendGetListReq;
extern void mmi_java_entry_delete_mids_menu_confirm(void);
extern void mmi_java_delete_mids_menu_reset_and_gobackhistory(void);
extern void mmi_java_restore_install_information(void);
extern void mmi_java_mids_put_np_cnf_handler(void* MSG);
extern void mmi_java_pre_entry_mids_network_profile_setting_screen(void *MsgStruct);
extern MMI_BOOL mmi_java_is_push_allowed_to_launch(void);
extern U8 g_mmi_java_reinstall_state;
extern void mmi_java_launch_after_install_confirm_yes_hdlr(void);
extern void mmi_java_launch_after_install_confirm_no_hdlr(void);
extern U8   mmi_java_launch_after_install_confirm_delete_cb(void *ptr);
extern void mmi_java_report_status(mmi_java_cmd_enum java_cmd,kal_int32 error_code,kal_char * mids_storage_id,U16 * mids_name,kal_char * mids_version);
/*****************************************************************************
 * RMS
 ************************************/
extern void mmi_java_recv_reset_rms_ind(void *MsgStruct);
extern void mmi_java_entry_reset_rms_res(void);
extern void mmi_java_send_reset_rms_res_yes(void);
extern void mmi_java_send_reset_rms_res_no(void);
extern void mmi_java_send_reset_rms_res(S8 confirm);

/*****************************************************************************
** 1.JAVA_CONTENT_MANAGER feature: (15)
** 1.3   JAVA_CM_UPDATE
*****************************************************************************/
#ifdef __MMI_JAVA_MIDS_UPDATE_CONFIRM__
extern void mmi_java_entry_mids_update_confirm(void);
extern void mmi_java_mids_update_confirm_yes_hdlr(void);
extern void mmi_java_mids_update_confirm_no_hdlr(void);
#endif //__MMI_JAVA_MIDS_UPDATE_CONFIRM__
extern void mmi_java_entry_mids_update(void);
extern void mmi_java_send_mids_update_req(void);
extern void mmi_java_recv_mids_update_cnf(void *MsgStruct);
extern void mmi_java_recv_get_file_and_save_ind(void *MsgStruct);
extern void mmi_java_entry_mids_vm_installing(void);
extern void mmi_java_send_get_file_and_sav_res(void);
extern void mmi_java_send_java_abort_req(void);
extern void mmi_java_recv_java_abort_cnf(void *MsgStruct);

/*****************************************************************************
** 5. JAVA_TIMEALARM_PUSH (11)
*****************************************************************************/

extern void mmi_java_push_recv_timealarm_push_ind(void *MsgStruct);
extern void mmi_java_push_recv_get_setting_cnf_hdlr(void *MsgStruct);
extern void mmi_java_push_send_push_res(U32 session_id, kal_char permission, MMI_BOOL execute);
extern void mmi_java_push_enter_confirm(void);
extern void mmi_java_push_confirm_hdlr(void);
extern void mmi_java_push_launch(void);
extern void mmi_java_push_launch_callback(U32 session_id, kal_char permission, MMI_BOOL execute);
extern void mmi_java_push_delete_vm_status_screen(void);
extern U8 mmi_java_reset_delete_menu_parameter(void *ptr);
extern void mmi_java_push_exit_vm_status_screen(void);

// #define j2me_launch_time_alarm mmi_java_launch_time_alarm

/*****************************************************************************
** 6. JAVA_ABORT (6)
*****************************************************************************/
extern void mmi_java_send_java_abort_req(void);
extern void mmi_java_recv_java_abort_cnf(void *MsgStruct);
extern void mmi_java_launch_after_install_callback(void);
extern void mmi_java_send_delete_menu_abort_req(void);
extern void mmi_java_recv_delete_menu_abort_cnf(void *MsgStruct);

extern MMI_BOOL mmi_java_fetch_mids_list(S32 item_index, UI_string_type str_buff, PU8 *img_buff_p, U8 str_img_mask);

/*****************************************************************************
 *
 *  8. Other tools
 *
 ******************************************************************************/
extern MMI_BOOL mmi_java_check_and_display_is_timealarmpush(void);
extern void mmi_java_recv_get_imsi_ind(void *MsgStruct);
extern MMI_BOOL mmi_java_is_drm_file(U16* filename);
extern void mmi_java_widget_not_ready(void);
extern void mmi_java_display_push_busy_ok_hdlr(void);
extern void mmi_java_display_push_busy(void);
extern void mmi_java_send_l4_get_lai_req(void);
extern void mmi_java_update_mids_runtime_setting(kal_int32 vm_id);
extern void mmi_java_try_to_shutdown_vm(void);
extern kal_int32 mmi_java_get_mid_list_in_mids(S32 mids_idx);
/*****************************************************************************
 *
 *  9. Utility
 *
 ******************************************************************************/

extern void mmi_java_entry_get_permission(void);
extern void mmi_java_recv_get_permission_ind(void *MsgStruct);
extern void mmi_java_get_permission_res(MMI_BOOL result);
extern void mmi_java_get_permission_info(CHAR** confirmStr,U16 *title);
extern kal_bool mmi_java_is_permission_force_fgmmi();
extern void mmi_java_send_message_from_active_mod(S32 dst_id, S32 sap_id, S32 msg_id, void *local_para_ptr);
extern CHAR *mmi_java_ucs2cat_secure(CHAR *strDestination, const CHAR *strSource, S32 destSize);
extern void mmi_java_recv_restore_factory_mode_cnf(void* MsgStruct);
#ifdef __DM_SCOMO_SUPPORT__
extern void mmi_java_recv_remove_mids_ind(void* MsgStruct);
extern void mmi_java_recv_preinstall_mids_ind(void * MsgStruct);
extern void mmi_java_dmui_scomo_get_title_and_confirm_str(U16* title, U16* confirm_str);
#endif /*_DM_SCOMO_SUPPORT__*/
#define FMGR_SUB_TITLE_LENGTH 20
typedef struct
{
    U8 *mid_name;
    U32 mid_id;
    U8 *mid_icon;
} java_mid_info_struct;

typedef struct
{
    S32 mids_index;
    S32 mid_index;

    U32 total_java_app_mids;
    U32 total_java_app_mid;
    mids_list_struct mids_info[MAX_SUB_MENUS];
    S32 mids_info_start;
    S32 mids_info_end;
    java_mid_info_struct mid_info[MAX_SUB_MENUS];

    U8 mids_trusted;
    S32 mids_choice_index[J2ME_SETTING_MAX];
    U16 *mids_choice_str[J2ME_CHOICE_PERMISSION_MAX];

    mmi_setting_struct mids_setting;
    mmi_setting_struct mids_max_setting;

    U8 tck_index;
    MMI_BOOL tck_execute;

    java_install_state_enum mids_install_state;
    java_update_state_enum mids_update_state;
    java_delete_state_enum mids_delete_state;

    jam_getlist_filter_struct mids_list_filter;
    MMI_BOOL is_jad_file_install;
    MMI_BOOL is_local_install;
    MMI_BOOL is_at_install;
    MMI_BOOL is_push;  /*lanch after user comfirm timeout/registered push*/

    U32 push_session_id;
    S8 push_permission; 
    MMI_BOOL push_execute;
    S32 screen_after_terminate;
    MMI_BOOL isinlock;
    MMI_BOOL isinlock_pushinstall;

    U8 download_percentage;
    U16* download_midlet_name;
    U16* download_string;
    U32 downloaded_size;

    U8 install_progress;

    S32 msg_ctrl;
    
    S32 hs_selected_ap_id;

    S32 domain;

#if defined(__MMI_JAVA_FMGR_HYPERLINK__)
    kal_char fmgr_hyperlink_sub_title[(FMGR_SUB_TITLE_LENGTH + 1)<<1];
#endif /* __MMI_JAVA_FMGR_HYPERLINK__ */

    MMI_BOOL is_enter_list_fail;
} java_context_struct;
extern java_context_struct g_java;

/*****************************************************************************
 *
 *  10. network profile
 *
 ******************************************************************************/
#define MAX_WAP_PROF_SUM 16
#define MIDS_NP_JAVA_DEFAULT 500
#define MAX_NP_LINE 150 /* suggest root name is less than 128 */
#define MAX_CRC_LINE 30 /* suggest crc is less than 30 */
typedef struct
{
    U16 profs_id[MAX_WAP_PROF_SUM + 2];              /* default + disable + profiles */
    UI_string_type profs_str[MAX_WAP_PROF_SUM + 2]; /* default + disable + profiles */
    S32 prof_selected;
    S32 profs_sum;
    UI_character_type profs_strs[MAX_WAP_PROF_SUM][WAP_PROF_MAX_NAME_SIZE];
        
}mmi_java_mids_network_profile_struct;


typedef struct
{
    mmi_java_mids_network_profile_struct np[SIM_NUM];
    UI_string_type java_profs_sim_str[SIM_NUM];
    S32 sim_selected;    
        
}mmi_java_mids_network_setting_struct;

#ifdef BROWSER_SUPPORT
typedef struct _jam_nw_install_data_struct_t
{
    LOCAL_PARA_HDR
    kal_bool is_success;
    srv_brw_profile_content_struct *active_prof;
}
jam_nw_install_data_struct;
#endif

typedef struct _mmi_java_nw_update_dtcnt_ind_struct_t
{
    LOCAL_PARA_HDR
    srv_dtcnt_acct_update_ind_evt_struct account_info;
}
mmi_java_nw_update_dtcnt_ind_struct;

typedef struct _mmi_java_nw_update_dtcnt_cnf_struct_t
{
    LOCAL_PARA_HDR
    kal_int8 error_code ;
}
mmi_java_nw_update_dtcnt_cnf_struct;

typedef struct _mmi_java_nw_delete_dtcnt_ind_struct_t
{
    LOCAL_PARA_HDR
    srv_dtcnt_acct_delete_ind_evt_struct account_info;
}
mmi_java_nw_delete_dtcnt_ind_struct;

typedef struct _mmi_java_nw_delete_dtcnt_cnf_struct_t
{
    LOCAL_PARA_HDR
    kal_int8 error_code ;
}
mmi_java_nw_delete_dtcnt_cnf_struct;

extern void mmi_java_real_entry_mids_network_profile_setting_screen(void);
extern kal_bool jam_mid_prof_id_use_default(void);

/* mmi_java_nw start */
typedef enum
{
    MMI_JAVA_NW_P_GSM_ONLY,
    MMI_JAVA_NW_P_WLAN_ONLY,
    MMI_JAVA_NW_P_GSM_PREFERRED,
    MMI_JAVA_NW_P_WLAN_PREFERRED,
    MMI_JAVA_NW_P_MODE_END
} mmi_java_nw_netset_prefered_mode;

extern void mmi_java_nw_init(void);
extern mmi_ret mmi_java_nw_cui_proc(mmi_event_struct *evt);
extern mmi_ret mmi_java_nw_inline_editor_cui_proc(mmi_event_struct *evt);
extern mmi_ret mmi_java_nw_dtcnt_cui_proc(mmi_event_struct *evt);
extern void mmi_java_nw_set_inline_sg_id(MMI_ID sg_id_inline_editor);
extern MMI_ID mmi_java_nw_get_inline_sg_id(void);

#ifdef __PLUTO_MMI_PACKAGE__
extern void mmi_java_global_setting_entry_inline_cui(void); // extern func of funandgamessrc.c
extern U16 mmi_java_global_setting_get_nw_inline_id(void);

extern void mmi_java_local_setting_entry_screen(void);
#endif
/* mmi_java_nw end */

/*****************************************************************************
 *
 *  11. Home screen
 *
 ******************************************************************************/
#ifdef __MMI_OP11_HOMESCREEN__
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
/* under construction !*/
#endif
/*****************************************************************************
 *
 *  12. Mides delete notify
 *
 ******************************************************************************/
#ifdef __MMI_JAVA_INSTALL_DELETE_NOTIFIER__
extern void mmi_java_recv_notify_start_req(void *MsgStruct);
extern void mmi_java_recv_notify_end_req(void *MsgStruct);
extern kal_bool g_mmi_java_post_notify_result;
#endif

extern void mmi_java_recv_make_call_req(void *MsgStruct);
extern MMI_BOOL mmi_java_is_allow_to_popup_screen(void);
extern jam_category_type_enum  mmi_java_catagory_cur_list_type(void); 
extern void mmi_java_entry_restore_default_confirm_screen(void);
extern void mmi_java_send_mids_restore_req(void);
extern mmi_ret mmi_java_dummy_entry_leave_proc(mmi_event_struct* evt);
extern mmi_ret mmi_java_sg_proc(mmi_event_struct * evt);
extern mmi_ret mmi_java_busy_sg_proc(mmi_event_struct *evt);
extern mmi_ret mmi_java_app_screen_proc (mmi_event_struct *param);
extern mmi_ret mmi_java_opt_sg_proc(mmi_event_struct *evt);
extern mmi_ret mmi_java_setting_and_security_sg_proc(mmi_event_struct *evt);
extern void mmi_java_set_screen_delete_callback_flag(MMI_BOOL);
extern void mmi_java_nw_pre_entry_network_settings_screen(void);
extern void mmi_java_launch_after_install_ask_terminate_cb(MMI_BOOL terminate);
extern void mmi_java_network_detect_req_hdlr(void *MsgStruct);
extern MMI_BOOL mmi_java_is_in_voice_call_ext(MMI_BOOL avoid_bg_call);
#if (MAX_VM_INSTANCE_NUM > 1)
extern void mmi_java_mvm_entry_java_task_mgr(void);
extern void mmi_java_get_running_list_scr_exit(void);
#endif /*#(MAX_VM_INSTANCE_NUM > 1)*/
extern MMI_BOOL get_setting_only;
extern MMI_BOOL get_domain_setting;
#ifdef __COSMOS_MMI_PACKAGE__
extern mmi_ret jam_mem_prepare_proc(mmi_event_struct *evt);
#endif
extern void mmi_java_resume_delete_scrn(void);
typedef struct _mmi_java_nw_cntx_t
{
    MMI_BOOL is_local;
    MMI_BOOL is_done;
    MMI_BOOL is_cancel;
    MMI_ID sg_id_parent;
    MMI_ID sg_id_dtcnt;
    MMI_ID sg_id_inline_editor;
    jam_mids_network_struct network[MMI_SIM_TOTAL];
    kal_uint8 sim_index;
    CHAR account_name[2 * (MAX_DATA_ACCOUNT_NAME_LEN + DATA_ACCOUNT_NAME_SUFFIX_LEN + 1) * ENCODING_LENGTH];
}mmi_java_nw_cntx;

typedef enum {
    MMI_JAVA_ABORT_NO_ERROR = 0,
    MMI_JAVA_ABORT_FOR_USER_CANCELED,
    MMI_JAVA_ABORT_FOR_DISK_OPERATION_FAILED,
    MMI_JAVA_ABORT_FOR_IN_VOICE_CALL
}mmi_java_abort_error_code_enum;
#endif /* __J2ME__ */ 
#endif /* JAVA_AGENCY_PROT_H */ /* #define JAVA_AGENCY_PROT_H */

