/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*******************************************************************************
 * Filename:
 * ---------
 * CalendarProt.h
 *
 * Project:
 * --------
 * MAUI
 *
 * Description:
 * ------------
 * This file defines constant, enum value, structure, and function prototypes for calendar application.
 *
 * Author:
 * -------
 * -------
 *
 *==============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *==============================================================================
 *******************************************************************************/
 /**
 * Copyright Notice
 * ?2002 - 2003, Pixtel Communications, Inc., 1489 43rd Ave. W.,
 * Vancouver, B.C. V6M 4K8 Canada. All Rights Reserved.
 *  (It is illegal to remove this copyright notice from this software or any
 *  portion of it)
 */

/**********************************************************************************
   Filename:      CalendarProt.h
   Author:        GAUTAM
   Date Created:  July-12-2003
   Contains:      Calendar Prot
**********************************************************************************/
#ifndef _MMI_CALENDARPROT_H
#define _MMI_CALENDARPROT_H

/*********************************************************************************
 * Include
 *********************************************************************************/
#include "MMI_features.h"

#ifdef __MMI_CALENDAR__
#include "wgui_categories_calendar.h"
#include "custom_mmi_default_value.h"
#include "gui_typedef.h"
#include "TodolistSrvGprot.h"
#include "MMIDataType.h"
#include "CalendarGprot.h"
#include "kal_general_types.h"
#include "gui_data_types.h"


/*********************************************************************************
 * Define
 *********************************************************************************/
#define MMI_CLNDR_MAX_YEAR_BUF_SIZE 5
#define MMI_CLNDR_MAX_DATE_BUF_SIZE 3
#define MMI_CLNDR_MAX_TIME_BUF_SIZE 3

#define MMI_CLNDR_SUNDAY_AS_BEGIN 0x00
#define MMI_CLNDR_MONDAY_AS_BEGIN 0x01

#ifdef __MMI_CALENDAR_FDOW__
#define MMI_CALENDAR_FDOW MMI_CLNDR_MONDAY_AS_BEGIN
#else
#define MMI_CALENDAR_FDOW MMI_CLNDR_SUNDAY_AS_BEGIN
#endif

#if defined(__MMI_INDICAL__) ||defined(__MMI_HIJRI_CALENDAR__)
#define		MAX_TITHI_FOR_CAL_POPUP				50
#endif

/********************************************************************************
 * Typedef 
 ********************************************************************************/
typedef enum
{
    MMI_VIEW_MODE_MONTH,
#ifndef __MMI_MAINLCD_96X64__
    MMI_VIEW_MODE_WEEK,
#endif
#ifdef __MMI_CALENDAR_EVENT__    
    MMI_VIEW_MODE_DAILY,
    MMI_VIEW_MODE_ALL,
#endif /* __MMI_CALENDAR_EVENT__ */    
    MMI_VIEW_MODE_TOTAL,
    MMI_VIEW_MODE_SEARCH
}mmi_clndr_view_mode_enum;

typedef struct
{
    mmi_id parent_id;
    mmi_id group_id;
    mmi_id child_id;
    mmi_id cui_menu_gid;
    mmi_id cui_inline_gid;
    mmi_id cui_cal_save_gid;
}mmi_cal_group_data_struct;

typedef struct
{
    mmi_id parent_id;
    mmi_id group_id;
    mmi_id child_id;
}mmi_cal_common_group_data_struct;

typedef void (*soft_key_hdlr) (MMI_ID);

typedef struct
{
    mmi_id sg_id;
    soft_key_hdlr LSK_function;
    soft_key_hdlr CSK_function;
    soft_key_hdlr RSK_function;
}mmi_clndr_confirm_user_data_struct;


typedef struct
{
    mmi_clndr_view_mode_enum current_mode;
    MMI_BOOL switch_setting_flag;
#if defined(__MMI_INDICAL__) || defined(__MMI_HIJRI_CALENDAR__)
    MMI_BOOL calendar_type_flag;
#endif /* defined(__MMI_INDICAL__) || defined(__MMI_HIJRI_CALENDAR__) */
}mmi_clndr_view_mode_struct;

typedef enum
{
    MMI_CLNDR_ENGLISH,
#if defined (__MMI_INDICAL__)
    MMI_CLNDR_INDIAN_LUNISOLAR,
#endif /* __MMI_INDICAL__ */
#if defined (__MMI_HIJRI_CALENDAR__)
    MMI_CLNDR_HIJRI_LUNAR,
#endif /* __MMI_HIJRI_CALENDAR__ */
    MMI_ONSCREEN_TOTAL
}mmi_clndr_onscreen_display_enum;

/* struct clndr_lnuar_date_info_struct defines all data needed for lunar calendar */
typedef struct
{
    U8 BaseDays;    /* different days from solar Jan 1 to lunar Jan 1. */
    U8 Intercalary;     /* an intercalary month in the lunar calendar.                    
                           0==no intercalary month in this year. */
    U16 MonthDays;  /* the number of days in lunar month, bit-level representation 0=29, 1=30. */
} clndr_lunar_table_struct;

/* struct DateInfo defines all data/result for calendar converting */
typedef struct
{
    U16 SolarYear;                      /* year in solar calendar system. */
    U16 LunarYear;                      /* year in lunar calendar system. */
    U8 SolarMonth;                      /* month in solar calendar system. */
    U8 SolarDay;                        /* day in solar calendar system. */
    U8 LunarMonth;                      /* month in lunar calendar system. */
    U8 LunarDay;                        /* day in lunar calendar system. */
    U8 KanYear;                         /* the Kan symbol of given year */
    U8 ChiYear;                         /* the Chin symbol of given year */
    U8 SolarTerm;                       /* solar term today, 25 == NONE  */
    MMI_BOOL LeapMonth;                 /* TRUE if LunarYear/LunarMonth has a leap month */
 //   CHAR TitleInfo[CLNDR_TITLE_LEN];     /* the string shown in the first line of title */
    U8 MessageLine1[CLNDR_HINT_LEN];    /* the string shown lunar day */
    U8 MessageLine2[CLNDR_HINT_LEN];    /* the string shown solar term and holiday */
} clndr_lnuar_date_info_struct;

typedef struct
{
    U8 date;
#ifdef __MMI_CLNDR_EVENT_INFO__
    U16 icon;
    srv_tdl_event_id_struct today_list[CLNDR_INFO_BOX_ROW]; /* today's event list */
#endif
} mmi_clndr_cell_struct;


typedef struct
{
    MYTIME cal_time;
    clndr_lnuar_date_info_struct LunarInfo;
    U8 lunar_state;
	U8 lunar_onoff;
    U8 *Title;
    U8 display_type;  /* monthly or weekly */
    mmi_clndr_cell_struct monthly_cell_info[CLNDR_COLUMN * CLNDR_ROW];
#ifdef __MMI_CALENDAR_EVENT__
    mmi_clndr_cell_struct weekly_cell_info[CLNDR_ROW];    
#endif
    //U8 period_interval;  /* unit of each period */
#ifdef __MMI_CLNDR_EVENT_INFO__
    U16 info_box_icon[CLNDR_INFO_BOX_ROW];
    U8 *info_box_text[CLNDR_INFO_BOX_ROW];
#endif /* __MMI_CLNDR_EVENT_INFO__ */ 

#ifdef __MMI_INDICAL__
	U8 str_indian_paksha[MAX_TITHI_FOR_CAL_POPUP];
	U8 str_indian_tithi[MAX_TITHI_FOR_CAL_POPUP];
#endif
#ifdef __MMI_HIJRI_CALENDAR__
    UI_character_type str_hijri_date1[MAX_TITHI_FOR_CAL_POPUP / ENCODING_LENGTH];
    UI_character_type str_hijri_date2[MAX_TITHI_FOR_CAL_POPUP / ENCODING_LENGTH];
#endif /* __MMI_HIJRI_CALENDAR__ */
#if defined(__MMI_INDICAL__) || defined(__MMI_HIJRI_CALENDAR__)
    CHAR* clndrswitchstring[MMI_ONSCREEN_TOTAL];
    CHAR* onoffstring[2];
    U8 infodispval;
    S32 CurrHighlightCalendar;
    S32 CurrHighlightDisplay;
#endif

#if 0
#ifdef __MMI_CALENDAR_ON_IDLE_SCREEN__   
/* under construction !*/
#endif
#endif

#ifdef	__MMI_CALENDAR_FDOW__
    U8 first_day_of_week;
#endif
#ifdef __MMI_BTD_BOX_UI_STYLE__    
    U8 date_text[80];
    U8 month;
    U8 day;
    U16 year;
#endif /* __MMI_BTD_BOX_UI_STYLE__ */
} clndr_context_struct;

typedef struct
{
    applib_time_struct highlight_time;
}mmi_cal_main_scrn_info;


typedef enum CLNDR_CLNDAR_MOVEMENT
{
    CLNDR_NEXT_MONTH,
    CLNDR_PRIVOUS_MONTH,
    CLNDR_CLNDAR_MOVEMENT_TOTAL
} CLNDR_CLNDAR_MOVEMENT_ENUM;

/********************************************************************************
 * Extern Global Variable
 ********************************************************************************/
extern clndr_context_struct *g_clndr_cntx;
extern mmi_clndr_view_mode_struct g_current_view_mode_context;
extern U8 g_mmi_clndr_weekday_index[];


/********************************************************************************
 * Extern Global Function 
 ********************************************************************************/
extern void ClndrPreEntryApp(void);
extern void HighlightClndrMenu(void);
extern void HighlightClndrDate(S32 date);
extern void ClndrLunarHintHandler(U16);
extern void mmi_clndr_set_swith_mode_flag(MMI_BOOL);
extern void mmi_clndr_confirm_user_data_init(mmi_clndr_confirm_user_data_struct* arg);

extern mmi_ret mmi_clndr_comfirm_proc(mmi_event_struct *evt);

/* construct calendar information */
extern void mmi_clndr_get_weekly_dates(MYTIME *currDate, U8 **dateStr);
extern void mmi_clndr_get_period_range(U8 PeriodStart, U8 **periodStr);
extern MMI_BOOL mmi_clndr_weekly_highlight(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_weekly_movement(U32 type);
extern U8 mmi_clndr_get_period_interval(void);
extern MMI_BOOL mmi_clndr_weekly_compute_next_time(U32 arrow);
extern MMI_BOOL mmi_clndr_weekly_out_of_boundary(MYTIME *resultDate, U32 highlightRow);
extern MMI_BOOL mmi_clndr_weekly_increase(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_weekly_decrease(U32 row, U32 column);

extern void mmi_clndr_get_indian_date(MYTIME curr_time, U8* str_indian_date);
extern  U16 mmi_clndr_get_onscreen_disp_type(void);
extern void mmi_clndr_set_onscreen_disp_type(U8);
extern void mmi_clndr_swith_view_mode(void); 
extern void mmi_clndr_entry_add_hdlr(void);


#ifdef __MMI_TOUCH_SCREEN__
extern MMI_BOOL mmi_clndr_touch_year_increase(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_touch_year_decrease(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_touch_month_increase(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_touch_month_decrease(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_periodly_movement(U32 type);
extern MMI_BOOL mmi_clndr_touch_multi_periodly_increase(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_touch_multi_periodly_decrease(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_touch_single_periodly_increase(U32 row, U32 column);
extern MMI_BOOL mmi_clndr_touch_single_periodly_decrease(U32 row, U32 column);
extern MMI_BOOLmmi_clndr_periodly_movement(U32 type);
#endif /* __MMI_TOUCH_SCREEN__ */ 
#endif /* __MMI_CALENDAR__ */ 


extern void mmi_clndr_on_screen_display(void);
extern void mmi_clndr_onscreen_display_none(void);

#if defined (__MMI_INDICAL__)
extern void mmi_clndr_onscreen_display_indian(void);
#endif /* __MMI_INDICAL__ */

extern void mmi_clndr_onscreen_display_chinese(void);

#if defined (__MMI_HIJRI_CALENDAR__)
extern void mmi_clndr_onscreen_display_hijri(void);
#endif /* __MMI_HIJRI_CALENDAR__ */


#if defined(__MMI_INDICAL__) || defined(__MMI_HIJRI_CALENDAR__)
extern void mmi_clndr_highlight_settings(void);
extern void mmi_clndr_pre_entry_settings(void);
extern void mmi_clndr_entry_settings(void);
//extern void mmi_clndr_exit_settings(void);
extern void mmi_clndr_settings_fill_inline_struct(void);
extern void mmi_clndr_save_settings(mmi_id parent_id);
extern void mmi_clndr_go_to_options(mmi_id parent_id);
extern void mmi_clndr_highlight_inline_select_calendar_type(S32 index);
extern void mmi_clndr_switch_clndr_type(void);
extern void mmi_clndr_entry_help(void);
extern void mmi_clndr_go_back_calendar_screen(void);
extern void mmi_clndr_set_jump_to_date(MYTIME t);
extern void mmi_clndr_get_updated_date_time_after_jump_to_date(MYTIME *);
#endif /* defined(__MMI_INDICAL__) || defined(__MMI_HIJRI_CALENDAR__) */

#endif /* _MMI_CALENDARPROT_H */ // #ifndef _MMI_CALENDARPROT_H
